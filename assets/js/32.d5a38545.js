(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{636:function(t,s,a){t.exports=a.p+"assets/img/ShiroFeatures.7f3d6693.png"},637:function(t,s,a){t.exports=a.p+"assets/img/ShiroBasicArchitecture.a54b0384.png"},638:function(t,s,a){t.exports=a.p+"assets/img/ShiroAuthenticationSequence.3471ccc8.png"},796:function(t,s,a){"use strict";a.r(s);var n=a(11),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"shiro"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shiro"}},[t._v("#")]),t._v(" Shiro")]),t._v(" "),n("h2",{attrs:{id:"åŠŸèƒ½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŠŸèƒ½"}},[t._v("#")]),t._v(" åŠŸèƒ½")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://shiro.apache.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("Apache Shiroæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”çµæ´»çš„å¼€æºå®‰å…¨æ¡†æ¶ï¼Œå¯ä»¥å¹²å‡€åœ°å¤„ç†èº«ä»½è®¤è¯ï¼Œæˆæƒï¼Œä¼ä¸šä¼šè¯ç®¡ç†å’ŒåŠ å¯†ã€‚Apache Shiroçš„é¦–è¦ç›®æ ‡æ˜¯æ˜“äºä½¿ç”¨å’Œç†è§£ã€‚ å®‰å…¨æœ‰æ—¶å¯èƒ½éå¸¸å¤æ‚ï¼Œç”šè‡³ä¼šå¾ˆç—›è‹¦ï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ã€‚ æ¡†æ¶åº”å°½å¯èƒ½æ©ç›–å¤æ‚æ€§ï¼Œå¹¶å…¬å¼€ç®€æ´ç›´è§‚çš„APIï¼Œä»¥ç®€åŒ–å¼€å‘äººå‘˜ç¡®ä¿å…¶åº”ç”¨ç¨‹åºå®‰å…¨çš„å·¥ä½œã€‚ShiroåŠŸèƒ½å¦‚ä¸‹ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(636),alt:"img"}})]),t._v(" "),n("p",[t._v("Primary Concerns")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("è®¤è¯")]),t._v("ï¼šæœ‰æ—¶ç§°ä¸ºâ€œç™»å½•â€ï¼Œè¿™æ˜¯è¯æ˜ç”¨æˆ·å°±æ˜¯ä»–ä»¬æ‰€è¯´çš„èº«ä»½çš„è¡Œä¸ºã€‚")]),t._v(" "),n("li",[n("strong",[t._v("æˆæƒ")]),t._v("ï¼šè®¿é—®æ§åˆ¶çš„è¿‡ç¨‹ï¼Œå³ç¡®å®šâ€œè°â€æœ‰æƒè®¿é—®â€œä»€ä¹ˆâ€ã€‚")]),t._v(" "),n("li",[t._v("ä¼šè¯ç®¡ç†ï¼šå³ä½¿åœ¨éWebæˆ–EJBåº”ç”¨ç¨‹åºä¸­ï¼Œä¹Ÿå¯ä»¥ç®¡ç†ç”¨æˆ·ç‰¹å®šçš„ä¼šè¯ã€‚")]),t._v(" "),n("li",[t._v("åŠ å¯†ï¼šä½¿ç”¨å¯†ç ç®—æ³•ä¿æŒæ•°æ®å®‰å…¨ï¼ŒåŒæ—¶ä»ç„¶æ˜“äºä½¿ç”¨ã€‚")])]),t._v(" "),n("p",[t._v("Supporting Features")]),t._v(" "),n("ul",[n("li",[t._v("ç½‘ç»œæ”¯æŒï¼šShiroçš„ç½‘ç»œæ”¯æŒAPIå¯å¸®åŠ©è½»æ¾ä¿æŠ¤ç½‘ç»œåº”ç”¨ç¨‹åºã€‚")]),t._v(" "),n("li",[t._v("ç¼“å­˜ï¼šç¼“å­˜æ˜¯Apache Shiro APIçš„ä¸€çº¿å…¬æ°‘ï¼Œå¯ç¡®ä¿å®‰å…¨æ“ä½œä¿æŒå¿«é€Ÿæœ‰æ•ˆã€‚æ¯”å¦‚ç”¨æˆ·ç™»å½•åï¼Œå…¶ç”¨æˆ·ä¿¡æ¯ã€æ‹¥æœ‰çš„è§’è‰²/æƒé™ä¸å¿…æ¯æ¬¡å»æŸ¥ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ï¼›")]),t._v(" "),n("li",[t._v("å¹¶å‘æ€§ï¼šApache Shiroçš„å¹¶å‘åŠŸèƒ½æ”¯æŒå¤šçº¿ç¨‹åº”ç”¨ç¨‹åºã€‚å³å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œèƒ½æŠŠæƒé™è‡ªåŠ¨ä¼ æ’­è¿‡å»ï¼›")]),t._v(" "),n("li",[t._v("æµ‹è¯•ï¼šæµ‹è¯•æ”¯æŒå¯å¸®åŠ©æ‚¨ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œå¹¶ç¡®ä¿æ‚¨çš„ä»£ç å°†æŒ‰é¢„æœŸè¿›è¡Œä¿æŠ¤ã€‚")]),t._v(" "),n("li",[t._v("â€œ"),n("strong",[t._v("Run As")]),t._v("â€ï¼šå…è®¸ç”¨æˆ·é‡‡ç”¨å…¶ä»–ç”¨æˆ·çš„èº«ä»½ï¼ˆå¦‚æœå…è®¸ï¼‰çš„åŠŸèƒ½ï¼Œæœ‰æ—¶åœ¨ç®¡ç†æ–¹æ¡ˆä¸­å¾ˆæœ‰ç”¨ã€‚")]),t._v(" "),n("li",[t._v("â€œ"),n("strong",[t._v("Remember Me")]),t._v("â€ï¼šè®°ä½ç”¨æˆ·åœ¨å„ä¸ªä¼šè¯ä¸­çš„èº«ä»½ï¼Œå› æ­¤ä»–ä»¬åªéœ€è¦åœ¨å¿…è¦æ—¶ç™»å½•å³å¯ã€‚")])]),t._v(" "),n("h2",{attrs:{id:"æ¶æ„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¶æ„"}},[t._v("#")]),t._v(" æ¶æ„")]),t._v(" "),n("p",[t._v("Apache Shiroçš„è®¾è®¡ç›®æ ‡æ˜¯é€šè¿‡ç›´è§‚ä¸”æ˜“äºä½¿ç”¨æ¥ç®€åŒ–åº”ç”¨ç¨‹åºå®‰å…¨æ€§ã€‚Shiroçš„æ ¸å¿ƒè®¾è®¡æ¨¡æ‹Ÿäº†å¤§å¤šæ•°äººå¦‚ä½•åœ¨ä¸æŸäººï¼ˆæˆ–æŸç‰©ï¼‰è¿›è¡Œäº¤äº’çš„æƒ…å†µä¸‹å¦‚ä½•è€ƒè™‘åº”ç”¨ç¨‹åºå®‰å…¨æ€§ã€‚")]),t._v(" "),n("p",[t._v("åœ¨æœ€é«˜æ¦‚å¿µå±‚æ¬¡ï¼ŒShiro çš„æ¶æ„æœ‰3ä¸ªä¸»è¦çš„æ¦‚å¿µï¼š"),n("code",[t._v("Subject")]),t._v("ï¼Œ"),n("code",[t._v("SecurityManager")]),t._v("å’Œ"),n("code",[t._v("Realms")]),t._v("ã€‚ä¸‹å›¾æ˜¯è¿™äº›ç»„ä»¶å¦‚ä½•äº¤äº’çš„é«˜çº§æ¦‚è¿°ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:a(637),alt:"img"}})]),t._v(" "),n("h3",{attrs:{id:"subject-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#subject-ğŸ”¥"}},[t._v("#")]),t._v(" Subject ğŸ”¥")]),t._v(" "),n("p",[n("strong",[t._v("Subject æœ¬è´¨ä¸Šæ˜¯å½“å‰æ‰§è¡Œç”¨æˆ·çš„ç‰¹å®šäºå®‰å…¨æ€§çš„â€œè§†å›¾â€")]),t._v("ã€‚ â€œç”¨æˆ·â€ä¸€è¯é€šå¸¸è¡¨ç¤ºä¸€ä¸ªäººï¼Œè€Œä¸»é¢˜å¯ä»¥æ˜¯ä¸€ä¸ªäººï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥è¡¨ç¤ºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå®ˆæŠ¤ç¨‹åºå¸æˆ·ï¼Œå®šæ—¶ä»»åŠ¡æˆ–ç±»ä¼¼çš„ä¸œè¥¿ï¼ŒåŸºæœ¬ä¸Šæ˜¯"),n("strong",[t._v("å½“å‰ä¸è¯¥è½¯ä»¶äº¤äº’çš„ä»»ä½•ä¸œè¥¿")]),t._v("ã€‚"),n("strong",[t._v("Subject å®ä¾‹éƒ½ç»‘å®šåˆ°ï¼ˆå¹¶éœ€è¦ï¼‰SecurityManager")]),t._v("ã€‚ä¸ Subject è¿›è¡Œäº¤äº’æ—¶ï¼Œè¿™äº›äº¤äº’ä¼šè½¬æ¢ä¸ºä¸ SecurityManager çš„ç‰¹å®š Subject çš„äº¤äº’ã€‚")]),t._v(" "),n("h3",{attrs:{id:"securitymanager-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#securitymanager-ğŸ”¥"}},[t._v("#")]),t._v(" SecurityManager ğŸ”¥")]),t._v(" "),n("p",[n("strong",[t._v("SecurityManager æ˜¯ Shiro ä½“ç³»ç»“æ„çš„æ ¸å¿ƒ")]),t._v("ï¼Œå……å½“ä¸€ç§ä¼å½¢å¯¹è±¡ï¼Œåè°ƒå…¶å†…éƒ¨å®‰å…¨ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¸€èµ·å½¢æˆä¸€ä¸ªå¯¹è±¡å›¾ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦ä¸ºåº”ç”¨ç¨‹åºé…ç½®äº†SecurityManageråŠå…¶å†…éƒ¨å¯¹è±¡å›¾ï¼Œå®ƒé€šå¸¸å°±ä¼šè¢«æç½®ï¼Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å‡ ä¹æŠŠæ‰€æœ‰æ—¶é—´éƒ½èŠ±åœ¨Subject APIä¸Šã€‚ç¨åæˆ‘ä»¬å°†è¯¦ç»†è®¨è®ºSecurityManagerï¼Œä½†é‡è¦çš„æ˜¯è¦è®¤è¯†åˆ°ï¼Œå½“æ‚¨ä¸ä¸»é¢˜äº¤äº’æ—¶ï¼Œå®é™…ä¸Šæ˜¯SecurityManageråœ¨å¹•åæ‰§è¡Œ"),n("strong",[t._v("æ‰€æœ‰æ“ä½œ")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"realm-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#realm-ğŸ”¥"}},[t._v("#")]),t._v(" Realm ğŸ”¥")]),t._v(" "),n("p",[t._v("é¢†åŸŸå……å½“ Shiro å’Œåº”ç”¨ç¨‹åºå®‰å…¨æ•°æ®ä¹‹é—´çš„æ¡¥æ¢æˆ–è¿æ¥å™¨ã€‚å½“éœ€è¦ä¸å®‰å…¨ç›¸å…³çš„æ•°æ®(å¦‚ç”¨æˆ·å¸æˆ·)è¿›è¡Œå®é™…äº¤äº’ä»¥æ‰§è¡Œèº«ä»½éªŒè¯(ç™»å½•)å’Œæˆæƒ(è®¿é—®æ§åˆ¶)æ—¶ï¼ŒShiroä¼šä»ä¸ºåº”ç”¨ç¨‹åºé…ç½®çš„"),n("strong",[t._v("ä¸€ä¸ªæˆ–å¤šä¸ª")]),t._v("é¢†åŸŸä¸­æŸ¥æ‰¾è¿™äº›å†…å®¹ã€‚")]),t._v(" "),n("p",[t._v("ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒRealm æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå®‰å…¨ç‰¹å®šçš„ "),n("strong",[t._v("DAO")]),t._v("ï¼šå®ƒå°è£…äº†æ•°æ®æºçš„è¿æ¥ç»†èŠ‚ï¼Œå¹¶æ ¹æ®éœ€è¦å°†ç›¸å…³æ•°æ®æä¾›ç»™Shiroã€‚åœ¨é…ç½®Shiroæ—¶ï¼Œå¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ªç”¨äºèº«ä»½éªŒè¯å’Œ/æˆ–æˆæƒçš„é¢†åŸŸã€‚SecurityManager "),n("strong",[t._v("å¯ä»¥é…ç½®å¤šä¸ªåŸŸï¼Œä½†è‡³å°‘éœ€è¦ä¸€ä¸ªåŸŸ")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("Shiro æä¾›äº†å¼€ç®±å³ç”¨çš„ Realm æ¥è¿æ¥è®¸å¤šå®‰å…¨æ•°æ®æºï¼Œå¦‚LDAPã€å…³ç³»æ•°æ®åº“(JDBC)ã€æ–‡æœ¬é…ç½®æº(å¦‚INIå’Œå±æ€§æ–‡ä»¶)ç­‰ç­‰ã€‚å¦‚æœç¼ºçœé¢†åŸŸä¸èƒ½æ»¡è¶³æ‚¨çš„éœ€è¦ï¼Œæ‚¨å¯ä»¥æ’å…¥è‡ªå·±çš„åŸŸå®ç°æ¥è¡¨ç¤ºè‡ªå®šä¹‰æ•°æ®æºã€‚")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),n("p",[t._v("ä¸å…¶ä»–å†…éƒ¨ç»„ä»¶ä¸€æ ·ï¼Œ"),n("strong",[t._v("SecurityManager ç®¡ç†å¦‚ä½•ä½¿ç”¨ Realm æ¥è·å–å®‰å…¨æ•°æ®å’Œèº«ä»½æ•°æ®ï¼Œå¹¶å°†å…¶è¡¨ç¤ºä¸º Subject å®ä¾‹")]),t._v("ã€‚")])]),t._v(" "),n("h3",{attrs:{id:"authenticator"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authenticator"}},[t._v("#")]),t._v(" Authenticator")]),t._v(" "),n("p",[t._v("è®¤è¯å™¨")]),t._v(" "),n("p",[t._v("æ˜¯è´Ÿè´£æ‰§è¡Œå’Œå“åº”ç”¨æˆ·èº«ä»½éªŒè¯(ç™»å½•)å°è¯•çš„ç»„ä»¶ã€‚å½“ç”¨æˆ·å°è¯•ç™»å½•æ—¶ï¼ŒéªŒè¯ç¨‹åºå°†æ‰§è¡Œè¯¥é€»è¾‘ã€‚AuthenticatorçŸ¥é“å¦‚ä½•ä¸å­˜å‚¨ç›¸å…³ç”¨æˆ·/å¸æˆ·ä¿¡æ¯çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŸŸè¿›è¡Œåè°ƒã€‚ä»è¿™äº›é¢†åŸŸè·å¾—çš„æ•°æ®ç”¨äºéªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œä»¥ç¡®ä¿ç”¨æˆ·ç¡®å®æ˜¯ä»–ä»¬æ‰€è¯´çš„é‚£ä¸ªäººã€‚")]),t._v(" "),n("p",[t._v("èº«ä»½éªŒè¯ç­–ç•¥")]),t._v(" "),n("p",[t._v("å¦‚æœé…ç½®äº†å¤šä¸ªåŸŸï¼ŒAuthenticationStrategyå°†åè°ƒåŸŸä»¥ç¡®å®šèº«ä»½éªŒè¯å°è¯•æˆåŠŸæˆ–å¤±è´¥çš„æ¡ä»¶(ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåŸŸæˆåŠŸä½†å…¶ä»–åŸŸå¤±è´¥ï¼Œé‚£ä¹ˆå°è¯•æˆåŠŸå—?)æ‰€æœ‰é¢†åŸŸå¿…é¡»æˆåŠŸå—?åªæœ‰ç¬¬ä¸€ä¸ª?)")]),t._v(" "),n("h3",{attrs:{id:"authrizer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authrizer"}},[t._v("#")]),t._v(" Authrizer")]),t._v(" "),n("p",[t._v("æˆæƒå™¨æ˜¯è´Ÿè´£ç¡®å®šåº”ç”¨ç¨‹åºä¸­ç”¨æˆ·è®¿é—®æ§åˆ¶çš„ç»„ä»¶ã€‚å®ƒæ˜¯æœ€ç»ˆå†³å®šç”¨æˆ·æ˜¯å¦è¢«å…è®¸åšæŸäº‹çš„æœºåˆ¶ã€‚ä¸Authenticatorä¸€æ ·ï¼Œæˆæƒå™¨ä¹ŸçŸ¥é“å¦‚ä½•ä¸å¤šä¸ªåç«¯æ•°æ®æºåè°ƒï¼Œä»¥è®¿é—®è§’è‰²å’Œæƒé™ä¿¡æ¯ã€‚æˆæƒæ–¹ä½¿ç”¨æ­¤ä¿¡æ¯å‡†ç¡®åœ°ç¡®å®šæ˜¯å¦å…è®¸ç”¨æˆ·æ‰§è¡Œç»™å®šçš„æ“ä½œã€‚")]),t._v(" "),n("h3",{attrs:{id:"sessionmanager"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sessionmanager"}},[t._v("#")]),t._v(" SessionManager")]),t._v(" "),n("p",[t._v("SessionManagerçŸ¥é“å¦‚ä½•åˆ›å»ºå’Œç®¡ç†ç”¨æˆ·ä¼šè¯ç”Ÿå‘½å‘¨æœŸï¼Œä¸ºæ‰€æœ‰ç¯å¢ƒä¸­çš„ç”¨æˆ·æä¾›å¥å£®çš„ä¼šè¯ä½“éªŒã€‚è¿™æ˜¯å®‰å…¨æ¡†æ¶ä¸–ç•Œä¸­çš„ä¸€ä¸ªç‹¬ç‰¹ç‰¹æ€§â€”Shiroèƒ½å¤Ÿåœ¨ä»»ä½•ç¯å¢ƒä¸­æœ¬åœ°ç®¡ç†ç”¨æˆ·ä¼šè¯ï¼Œå³ä½¿æ²¡æœ‰Web/Servletæˆ–EJBå®¹å™¨å¯ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒShiroå°†ä½¿ç”¨ç°æœ‰çš„ä¼šè¯æœºåˆ¶(å¦‚Servletå®¹å™¨)ï¼Œä½†å¦‚æœæ²¡æœ‰ï¼Œä¾‹å¦‚åœ¨ç‹¬ç«‹åº”ç”¨ç¨‹åºæˆ–éwebç¯å¢ƒä¸­ï¼Œå®ƒå°†ä½¿ç”¨å†…ç½®çš„ä¼ä¸šä¼šè¯ç®¡ç†æ¥æä¾›ç›¸åŒçš„ç¼–ç¨‹ä½“éªŒã€‚SessionDAOçš„å­˜åœ¨æ˜¯ä¸ºäº†å…è®¸ä½¿ç”¨ä»»ä½•æ•°æ®æºæ¥æŒä¹…åŒ–ä¼šè¯ã€‚")]),t._v(" "),n("h3",{attrs:{id:"sessiondao"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sessiondao"}},[t._v("#")]),t._v(" SessionDAO")]),t._v(" "),n("p",[t._v("SessionDAOä»£è¡¨SessionManageræ‰§è¡Œä¼šè¯æŒä¹…æ€§(CRUD)æ“ä½œã€‚è¿™å…è®¸å°†ä»»ä½•æ•°æ®å­˜å‚¨æ’å…¥åˆ°ä¼šè¯ç®¡ç†åŸºç¡€è®¾æ–½ã€‚")]),t._v(" "),n("h3",{attrs:{id:"cachemanager"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cachemanager"}},[t._v("#")]),t._v(" CacheManager")]),t._v(" "),n("p",[t._v("CacheManageråˆ›å»ºå’Œç®¡ç†å…¶ä»–Shiroç»„ä»¶ä½¿ç”¨çš„ç¼“å­˜å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ç”±äºShiroå¯ä»¥è®¿é—®è®¸å¤šåç«¯æ•°æ®æºæ¥è¿›è¡Œèº«ä»½éªŒè¯ã€æˆæƒå’Œä¼šè¯ç®¡ç†ï¼Œå› æ­¤ç¼“å­˜ä¸€ç›´æ˜¯æ¡†æ¶ä¸­çš„ä¸€ä¸ªä¸€æµæ¶æ„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä½¿ç”¨è¿™äº›æ•°æ®æºæ—¶æé«˜æ€§èƒ½ã€‚ä»»ä½•ç°ä»£çš„å¼€æºå’Œ/æˆ–ä¼ä¸šç¼“å­˜äº§å“éƒ½å¯ä»¥æ’å…¥åˆ°Shiroä¸­ï¼Œä»¥æä¾›å¿«é€Ÿå’Œé«˜æ•ˆçš„ç”¨æˆ·ä½“éªŒã€‚")]),t._v(" "),n("p",[t._v("ç¼“å­˜æ§åˆ¶å™¨ï¼Œæ¥ç®¡ç†å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰çš„ç¼“å­˜çš„ï¼›å› ä¸ºè¿™äº›æ•°æ®åŸºæœ¬ä¸Šå¾ˆå°‘å»æ”¹å˜ï¼Œæ”¾åˆ°ç¼“å­˜ä¸­åå¯ä»¥æé«˜è®¿é—®çš„æ€§èƒ½")]),t._v(" "),n("h3",{attrs:{id:"cryptography"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cryptography"}},[t._v("#")]),t._v(" Cryptography")]),t._v(" "),n("p",[t._v("å¯†ç å­¦æ˜¯ä¼ä¸šå®‰å…¨æ¡†æ¶çš„è‡ªç„¶è¡¥å……ã€‚Shiroçš„åŠ å¯†åŒ…åŒ…å«æ˜“äºä½¿ç”¨å’Œç†è§£çš„å¯†ç ã€æ•£åˆ—(åˆåæ‘˜è¦)å’Œä¸åŒçš„ç¼–è§£ç å™¨å®ç°çš„è¡¨ç¤ºå½¢å¼ã€‚è¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç±»éƒ½ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œéå¸¸æ˜“äºä½¿ç”¨å’Œç†è§£ã€‚ä»»ä½•ä½¿ç”¨è¿‡Javaçš„æœ¬åœ°åŠ å¯†æ”¯æŒçš„äººéƒ½çŸ¥é“ï¼Œè¦é©¯æœå®ƒæ˜¯ä¸€ç§å…·æœ‰æŒ‘æˆ˜æ€§çš„åŠ¨ç‰©ã€‚Shiroçš„crypto apiç®€åŒ–äº†å¤æ‚çš„Javaæœºåˆ¶ï¼Œä½¿æ™®é€šäººå¯ä»¥è½»æ¾åœ°ä½¿ç”¨å¯†ç æœ¯ã€‚")]),t._v(" "),n("h2",{attrs:{id:"æœ¯è¯­"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ¯è¯­"}},[t._v("#")]),t._v(" æœ¯è¯­")]),t._v(" "),n("h3",{attrs:{id:"authentication-è®¤è¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authentication-è®¤è¯"}},[t._v("#")]),t._v(" Authenticationâ€”è®¤è¯")]),t._v(" "),n("p",[t._v("èº«ä»½éªŒè¯æ˜¯éªŒè¯ä¸»ä½“èº«ä»½çš„è¿‡ç¨‹â€”â€”æœ¬è´¨ä¸Šè¯æ˜æŸäººç¡®å®æ˜¯ä»–ä»¬æ‰€è¯´çš„é‚£ä¸ªäººã€‚å½“èº«ä»½éªŒè¯å°è¯•æˆåŠŸæ—¶ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç›¸ä¿¡è¯¥ä¸»é¢˜ä¸€å®šæ˜¯åº”ç”¨ç¨‹åºæ‰€æœŸæœ›çš„ã€‚")]),t._v(" "),n("h3",{attrs:{id:"authorization-æˆæƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authorization-æˆæƒ"}},[t._v("#")]),t._v(" Authorizationâ€”æˆæƒ")]),t._v(" "),n("p",[t._v("æˆæƒï¼Œä¹Ÿç§°ä¸ºè®¿é—®æ§åˆ¶ï¼Œæ˜¯å†³å®š user / Subject æ˜¯å¦è¢«å…è®¸åšæŸäº‹çš„è¿‡ç¨‹ã€‚å®ƒé€šå¸¸æ˜¯é€šè¿‡æ£€æŸ¥å’Œè§£é‡Š Subject çš„è§’è‰²å’Œæƒé™(è§ä¸‹é¢)ï¼Œç„¶åå…è®¸æˆ–æ‹’ç»è®¿é—®è¯·æ±‚çš„èµ„æºæˆ–å‡½æ•°æ¥å®Œæˆçš„ã€‚")]),t._v(" "),n("h3",{attrs:{id:"cipher-åŠ å¯†ç®—æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cipher-åŠ å¯†ç®—æ³•"}},[t._v("#")]),t._v(" Cipherâ€”åŠ å¯†ç®—æ³•")]),t._v(" "),n("p",[t._v("åŠ å¯†ç®—æ³•æ˜¯æ‰§è¡ŒåŠ å¯†æˆ–è§£å¯†çš„ç®—æ³•ã€‚è¯¥ç®—æ³•é€šå¸¸ä¾èµ–äºä¸€æ¡åä¸ºå¯†é’¥çš„ä¿¡æ¯ã€‚è€ŒåŠ å¯†æ˜¯æ ¹æ®å¯†é’¥è€Œå˜åŒ–çš„ï¼Œæ‰€ä»¥æ²¡æœ‰å¯†é’¥çš„è§£å¯†æ˜¯éå¸¸å›°éš¾çš„ã€‚\nå¯†ç æœ‰ä¸åŒçš„å˜ä½“ã€‚å—å¯†ç é€šå¸¸åœ¨å›ºå®šå¤§å°çš„ç¬¦å·å—ä¸Šå·¥ä½œï¼Œè€Œæµå¯†ç åˆ™åœ¨è¿ç»­çš„ç¬¦å·æµä¸Šå·¥ä½œã€‚å¯¹ç§°å¯†ç ä½¿ç”¨ç›¸åŒçš„å¯†é’¥è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œè€Œéå¯¹ç§°å¯†ç ä½¿ç”¨ä¸åŒçš„å¯†é’¥ã€‚å¦‚æœéå¯¹ç§°å¯†ç ä¸­çš„å¯†é’¥ä¸èƒ½ä»å¦ä¸€ä¸ªå¯†é’¥æ´¾ç”Ÿå‡ºæ¥ï¼Œåˆ™å¯ä»¥å…¬å¼€å…±äº«ä¸€ä¸ªå¯†é’¥ï¼Œä»è€Œåˆ›å»ºå…¬å…±/ç§æœ‰å¯†é’¥å¯¹ã€‚")]),t._v(" "),n("h3",{attrs:{id:"credential-å‡­æ®-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#credential-å‡­æ®-ğŸ”¥"}},[t._v("#")]),t._v(" Credentialâ€”å‡­æ® ğŸ”¥")]),t._v(" "),n("p",[n("strong",[t._v("å‡­æ®")]),t._v("æ˜¯éªŒè¯ user / Subject èº«ä»½çš„ä¸€æ®µä¿¡æ¯ã€‚åœ¨éªŒè¯è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ª(æˆ–å¤šä¸ª) Credential ä¸ Subject ä¸€èµ·æäº¤ï¼Œä»¥éªŒè¯æäº¤ Credential çš„ user / Subject å®é™…ä¸Šæ˜¯å…³è”çš„ç”¨æˆ·ã€‚å‡­è¯é€šå¸¸æ˜¯åªæœ‰ç‰¹å®š user / Subject æ‰çŸ¥é“çš„éå¸¸ç§˜å¯†çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¯†ç ã€PGPå¯†é’¥ã€ç”Ÿç‰©ç»Ÿè®¡å±æ€§æˆ–ç±»ä¼¼çš„æœºåˆ¶ã€‚\nå…¶æ€æƒ³æ˜¯ï¼Œå¯¹äºä¸€ä¸ªè´Ÿè´£äººï¼Œåªæœ‰ä¸€ä¸ªäººçŸ¥é“æ­£ç¡®çš„ Credential æ¥ä¸è¯¥è´Ÿè´£äººâ€œé…å¯¹â€ã€‚å¦‚æœå½“å‰ user / Subject æä¾›äº†ä¸ç³»ç»Ÿä¸­å­˜å‚¨çš„ Credential ç›¸åŒ¹é…çš„æ­£ç¡® Credential ï¼Œé‚£ä¹ˆç³»ç»Ÿå¯ä»¥å‡å®šå¹¶ç›¸ä¿¡å½“å‰ user / Subject å°±æ˜¯ä»–ä»¬æ‰€è¯´çš„é‚£ä¸ªäººã€‚ä¿¡ä»»ç¨‹åº¦éšç€æ›´å®‰å…¨çš„å‡­æ®ç±»å‹(ä¾‹å¦‚ç”Ÿç‰©ç‰¹å¾ç­¾å>å¯†ç )çš„å¢åŠ è€Œå¢åŠ ã€‚")]),t._v(" "),n("h3",{attrs:{id:"cryptography-åŠ å¯†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cryptography-åŠ å¯†"}},[t._v("#")]),t._v(" Cryptographyâ€”åŠ å¯†")]),t._v(" "),n("p",[t._v("åŠ å¯†æ˜¯ä¸€ç§å®è·µï¼Œé€šè¿‡éšè—ä¿¡æ¯æˆ–å°†å…¶è½¬æ¢æˆæ²¡æœ‰æ„ä¹‰çš„ä¿¡æ¯ï¼Œä»è€Œé¿å…ä¸å¸Œæœ›çš„è®¿é—®ï¼Œè¿™æ ·å…¶ä»–äººå°±æ— æ³•è¯»å–ä¿¡æ¯ã€‚Shiroä¸“æ³¨äºå¯†ç å­¦çš„ä¸¤ä¸ªæ ¸å¿ƒå…ƒç´ ï¼šä½¿ç”¨å…¬é’¥æˆ–ç§é’¥åŠ å¯†æ•°æ®(å¦‚ç”µå­é‚®ä»¶)çš„å¯†ç ï¼Œä»¥åŠä¸å¯é€†åŠ å¯†æ•°æ®(å¦‚å¯†ç )çš„æ•£åˆ—(åˆåæ¶ˆæ¯æ‘˜è¦)ã€‚")]),t._v(" "),n("h3",{attrs:{id:"hash-å“ˆå¸Œ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hash-å“ˆå¸Œ"}},[t._v("#")]),t._v(" Hashâ€”å“ˆå¸Œ")]),t._v(" "),n("p",[t._v("å“ˆå¸Œå‡½æ•°æ˜¯è¾“å…¥æº(æœ‰æ—¶ç§°ä¸ºæ¶ˆæ¯)åˆ°ç»è¿‡ç¼–ç çš„å“ˆå¸Œå€¼(æœ‰æ—¶ç§°ä¸ºæ¶ˆæ¯æ‘˜è¦)çš„å•å‘ã€ä¸å¯é€†è½¬æ¢ã€‚å®ƒé€šå¸¸ç”¨äºå¯†ç ã€æ•°å­—æŒ‡çº¹æˆ–å…·æœ‰åº•å±‚å­—èŠ‚æ•°ç»„çš„æ•°æ®ã€‚")]),t._v(" "),n("h3",{attrs:{id:"permission-æƒé™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#permission-æƒé™"}},[t._v("#")]),t._v(" Permissionâ€”æƒé™")]),t._v(" "),n("p",[t._v("æƒé™(è‡³å°‘æŒ‰ç…§Shiroçš„è§£é‡Š)æ˜¯æè¿°åº”ç”¨ç¨‹åºåŸå§‹åŠŸèƒ½çš„è¯­å¥ï¼Œä»…æ­¤è€Œå·²ã€‚æƒé™æ˜¯å®‰å…¨ç­–ç•¥ä¸­æœ€ä½çº§åˆ«çš„æ„é€ ã€‚å®ƒä»¬åªå®šä¹‰åº”ç”¨ç¨‹åºå¯ä»¥åšä»€ä¹ˆã€‚å®ƒä»¬æ²¡æœ‰æè¿°â€œè°â€èƒ½å¤Ÿæ‰§è¡Œè¿™äº›æ“ä½œã€‚è®¸å¯åªæ˜¯ä¸€ç§è¡Œä¸ºçš„é™ˆè¿°ï¼Œä»…æ­¤è€Œå·²ã€‚")]),t._v(" "),n("h3",{attrs:{id:"principal-ä¸»ä½“-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#principal-ä¸»ä½“-ğŸ”¥"}},[t._v("#")]),t._v(" Principalâ€”ä¸»ä½“ ğŸ”¥")]),t._v(" "),n("p",[n("strong",[t._v("Principal æ˜¯åº”ç”¨ç¨‹åº user ( Subject ) çš„æ ‡è¯†å±æ€§")]),t._v("ã€‚â€œæ ‡è¯†å±æ€§â€å¯ä»¥æ˜¯å¯¹æ‚¨çš„åº”ç”¨ç¨‹åºæœ‰æ„ä¹‰çš„ä»»ä½•å†…å®¹â€”ç”¨æˆ·åã€å§“æ°ã€ç»™å®šåç§°ã€ç¤¾ä¼šå®‰å…¨å·ç ã€ç”¨æˆ·IDç­‰ç­‰ã€‚\nShiroè¿˜å¼•ç”¨äº†æˆ‘ä»¬ç§°ä¸º Principal çš„ä¸»è¦åŸåˆ™çš„ä¸œè¥¿ã€‚ Principal æ˜¯åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å”¯ä¸€æ ‡è¯† Subject çš„ä»»ä½• Principalã€‚ç†æƒ³çš„Principal æ˜¯åƒ RDBMS ç”¨æˆ·è¡¨ä¸»é”®é‚£æ ·çš„ç”¨æˆ·åæˆ–ç”¨æˆ·IDã€‚åœ¨"),n("strong",[t._v("åº”ç”¨ç¨‹åºä¸­ï¼Œ user ( Subject ) åªæœ‰ä¸€ä¸ªä¸» Principal")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"realm-é¢†åŸŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#realm-é¢†åŸŸ"}},[t._v("#")]),t._v(" Realmâ€”é¢†åŸŸ")]),t._v(" "),n("p",[t._v("ç•¥")]),t._v(" "),n("h3",{attrs:{id:"role-è§’è‰²"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#role-è§’è‰²"}},[t._v("#")]),t._v(" Roleâ€”è§’è‰²")]),t._v(" "),n("p",[t._v("ç•¥")]),t._v(" "),n("h3",{attrs:{id:"session-ä¼šè¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#session-ä¼šè¯"}},[t._v("#")]),t._v(" Sessionâ€”ä¼šè¯")]),t._v(" "),n("p",[t._v("Session æ˜¯ä¸åœ¨ä¸€æ®µæ—¶é—´å†…ä¸è½¯ä»¶ç³»ç»Ÿäº¤äº’çš„å•ä¸ª user ( Subject ) ç›¸å…³è”çš„æœ‰çŠ¶æ€æ•°æ®ä¸Šä¸‹æ–‡ã€‚å½“ä¸»é¢˜ä½¿ç”¨åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥ä»ä¼šè¯ä¸­æ·»åŠ /è¯»å–/åˆ é™¤æ•°æ®ï¼Œè€Œåº”ç”¨ç¨‹åºç¨ååœ¨éœ€è¦æ—¶å¯ä»¥ä½¿ç”¨è¿™äº›æ•°æ®ã€‚ä¼šè¯åœ¨ç”¨æˆ·/ä¸»é¢˜æ³¨é”€åº”ç”¨ç¨‹åºæˆ–ç”±äºä¸æ´»åŠ¨è€Œè¶…æ—¶æ—¶ç»ˆæ­¢ã€‚\nå¯¹äºé‚£äº›ç†Ÿæ‚‰HttpSessionçš„äººæ¥è¯´ï¼ŒShiroä¼šè¯å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªæ˜¯Shiroä¼šè¯å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå³ä½¿æ²¡æœ‰Servletå®¹å™¨æˆ–EJBå®¹å™¨å¯ç”¨ã€‚")]),t._v(" "),n("h3",{attrs:{id:"subject"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#subject"}},[t._v("#")]),t._v(" Subject")]),t._v(" "),n("p",[t._v("Subject åªæ˜¯ä¸€ä¸ªèŠ±å“¨çš„å®‰å…¨æœ¯è¯­ï¼ŒåŸºæœ¬ä¸Šæ˜¯æŒ‡åº”ç”¨ç¨‹åºç”¨æˆ·çš„ç‰¹å®šäºå®‰å…¨çš„â€œè§†å›¾â€ã€‚ä½†æ˜¯ï¼ŒSubjectå¹¶ä¸æ€»æ˜¯éœ€è¦åæ˜ äººâ€”â€”å®ƒå¯ä»¥è¡¨ç¤ºè°ƒç”¨æ‚¨çš„åº”ç”¨ç¨‹åºçš„å¤–éƒ¨è¿›ç¨‹ï¼Œæˆ–è€…å¯èƒ½è¡¨ç¤ºåœ¨ä¸€æ®µæ—¶é—´å†…é—´æ­‡æ‰§è¡ŒæŸäº›æ“ä½œçš„å®ˆæŠ¤è¿›ç¨‹ç³»ç»Ÿå¸æˆ·(ä¾‹å¦‚cronä½œä¸š)ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä»»ä½•å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæ“ä½œçš„å®ä½“çš„è¡¨ç¤ºã€‚")]),t._v(" "),n("h2",{attrs:{id:"authentication-è®¤è¯-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authentication-è®¤è¯-2"}},[t._v("#")]),t._v(" Authenticationâ€”è®¤è¯")]),t._v(" "),n("p",[n("img",{attrs:{src:a(638),alt:"img"}})]),t._v(" "),n("h3",{attrs:{id:"è®¤è¯æµç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è®¤è¯æµç¨‹"}},[t._v("#")]),t._v(" è®¤è¯æµç¨‹")]),t._v(" "),n("ol",[n("li",[t._v("åº”ç”¨ç¨‹åºä»£ç æ‰§è¡Œ "),n("code",[t._v("Subject.login")]),t._v(" æ–¹æ³•ï¼Œä¼ é€’æ„é€ çš„ AuthenticationToken å®ä¾‹ï¼Œè¯¥å®ä¾‹è¡¨ç¤ºæœ€ç»ˆç”¨æˆ·çš„ principals å’Œ credentialsã€‚")]),t._v(" "),n("li",[t._v("Subject å®ä¾‹ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª DelegatingSubjectï¼ˆæˆ–å­ç±»ï¼‰è¢«åº”ç”¨å§”æ‰˜æ¥è°ƒç”¨"),n("code",[t._v("SecurityManager.login(token)")]),t._v("ï¼Œå®é™…çš„èº«ä»½éªŒè¯å·¥ä½œä»è¿™é‡Œå¼€å§‹ã€‚")]),t._v(" "),n("li",[t._v("SecurityManager æ˜¯ä¸€ä¸ªåŸºæœ¬çš„â€œä¼å½¢â€ç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä»¤ç‰Œå¹¶é€šè¿‡è°ƒç”¨"),n("code",[t._v("Authenticator.authenticate(token)")]),t._v("å°†å…¶ç®€å•åœ°å§”æ‰˜ç»™å®ƒçš„å†…éƒ¨ Authenticator å®ä¾‹ã€‚è¿™å‡ ä¹æ€»æ˜¯ä¸€ä¸ª ModularRealmAuthenticator å®ä¾‹ï¼Œå®ƒæ”¯æŒåœ¨èº«ä»½éªŒè¯æœŸé—´åè°ƒä¸€ä¸ªæˆ–å¤šä¸ª Realm å®ä¾‹ã€‚ ModularRealmAuthenticator æœ¬è´¨ä¸Šä¸ºApache Shiroæä¾›äº†ä¸€ä¸ªPAMæ ·å¼çš„èŒƒå‹(åœ¨PAMæœ¯è¯­ä¸­ï¼Œæ¯ä¸ª Realm éƒ½æ˜¯ä¸€ä¸ªâ€œæ¨¡å—â€)ã€‚")]),t._v(" "),n("li",[t._v("å¦‚æœåªé…ç½®äº†å•ä¸ª Realmï¼Œåˆ™ç›´æ¥è°ƒç”¨å®ƒâ€”â€”åœ¨å•ä¸ªåŸŸåº”ç”¨ç¨‹åºä¸­ä¸éœ€è¦éªŒè¯ç­–ç•¥ã€‚")]),t._v(" "),n("li",[t._v("å¦‚æœä¸ºåº”ç”¨ç¨‹åºé…ç½®äº†å¤šä¸ª Realmï¼ŒModularRealmAuthenticator å®ä¾‹å°†åˆ©ç”¨å…¶é…ç½®çš„ AuthenticationStrategy å‘èµ·å¤šåŸŸèº«ä»½éªŒè¯å°è¯•ã€‚åœ¨ä¸ºèº«ä»½éªŒè¯è°ƒç”¨é¢†åŸŸä¹‹å‰ã€æœŸé—´å’Œä¹‹åï¼Œå°†è°ƒç”¨ AuthenticationStrategy ä»¥å…è®¸å®ƒå¯¹æ¯ä¸ªé¢†åŸŸçš„ç»“æœä½œå‡ºååº”ã€‚æˆ‘ä»¬å°†å¾ˆå¿«ä»‹ç»èº«ä»½éªŒè¯ç­–ç•¥ã€‚")]),t._v(" "),n("li",[t._v("æ¯ä¸ªå·²é…ç½®çš„ Realm éƒ½å°†è¢«æŸ¥è¯¢ï¼Œä»¥æŸ¥çœ‹å®ƒæ˜¯å¦æ”¯æŒæäº¤çš„ AuthenticationTokenã€‚å¦‚æœæ˜¯ï¼Œå°†ä½¿ç”¨æäº¤çš„ä»¤ç‰Œè°ƒç”¨æ”¯æŒåŸŸçš„"),n("code",[t._v("getAuthenticationInfo")]),t._v("æ–¹æ³•ã€‚"),n("code",[t._v("getAuthenticationInfo")]),t._v("æ–¹æ³•æœ‰æ•ˆåœ°è¡¨ç¤ºè¯¥ç‰¹å®š Realm çš„å•ä¸ªèº«ä»½è®¤è¯å°è¯•ã€‚æˆ‘ä»¬ç¨åå°†è®¨è®ºé¢†åŸŸèº«ä»½è®¤è¯è¡Œä¸ºã€‚")])]),t._v(" "),n("h3",{attrs:{id:"authenticator-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authenticator-2"}},[t._v("#")]),t._v(" Authenticator")]),t._v(" "),n("p",[t._v("å¦‚å‰æ‰€è¿°ï¼ŒShiro SecurityManagerå®ç°é»˜è®¤ä½¿ç”¨ ModularRealmAuthenticator å®ä¾‹ã€‚ModularRealmAuthenticator åŒæ ·æ”¯æŒå…·æœ‰å•ä¸ª Realm çš„åº”ç”¨ç¨‹åºå’Œå…·æœ‰å¤šä¸ª Realm çš„åº”ç”¨ç¨‹åºã€‚")]),t._v(" "),n("p",[t._v("åœ¨å•ä¸€ Realm åº”ç”¨ç¨‹åºä¸­ï¼ŒModularRealmAuthenticator å°†ç›´æ¥è°ƒç”¨å•ä¸€é¢†åŸŸã€‚å¦‚æœé…ç½®äº†ä¸¤ä¸ªæˆ–å¤šä¸ªåŸŸï¼Œå®ƒå°†ä½¿ç”¨AuthenticationStrategyå®ä¾‹æ¥åè°ƒå¦‚ä½•è¿›è¡Œå°è¯•ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢è®¨è®ºèº«ä»½éªŒè¯ç­–ç•¥ã€‚")]),t._v(" "),n("p",[t._v("å¯ä»¥è‡ªå®šä¹‰è®¤è¯å™¨ï¼Œè™½ç„¶ ModularRealmAuthenticator å¯ä»¥é€‚åº”å¤§éƒ¨åˆ†éœ€æ±‚ã€‚ç•¥")]),t._v(" "),n("h3",{attrs:{id:"authenticationstrategy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authenticationstrategy"}},[t._v("#")]),t._v(" AuthenticationStrategy")]),t._v(" "),n("p",[t._v("å¤šä¸ª Realm æ‰ä¼šä½¿ç”¨ï¼Œè§æ–‡æ¡£ï¼Œç•¥")]),t._v(" "),n("h2",{attrs:{id:"quickstart"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#quickstart"}},[t._v("#")]),t._v(" QuickStart")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("æç¤º")]),t._v(" "),n("p",[t._v("è¯¦ç»†ä»£ç æŸ¥çœ‹ä»“åº“")])]),t._v(" "),n("h3",{attrs:{id:"å¼•å…¥ä¾èµ–"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å…¥ä¾èµ–"}},[t._v("#")]),t._v(" å¼•å…¥ä¾èµ–")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.shiro"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("shiro-spring-boot-starter"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.5.1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--å“”äº†ç‹—ï¼Œå®˜ç½‘æ–‡æ¡£ç»™çš„1.5.2-SNAPSHOTä½†æ˜¯å¹¶æ²¡æœ‰å­˜å…¥Mavenåº“é‡Œ--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h3",{attrs:{id:"é…ç½®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®"}},[t._v("#")]),t._v(" é…ç½®")]),t._v(" "),n("div",{staticClass:"language-ini line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ini"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -----------------------------------------------------------------------------")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Users and their assigned roles")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Each line conforms to the format defined in the")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# org.apache.shiro.realm.text.TextConfigurationRealm#setUserDefinitions JavaDoc")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -----------------------------------------------------------------------------")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token header"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("users")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# user 'root' with password 'secret' and the 'admin' role")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("root")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("secret, admin")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# user 'guest' with the password 'guest' and the 'guest' role")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("guest")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("guest, guest")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# user 'presidentskroob' with password '12345' (\"That's the same combination on")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# my luggage!!!\" ;)), and role 'president'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("presidentskroob")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("12345, president")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# user 'darkhelmet' with password 'ludicrousspeed' and roles 'darklord' and 'schwartz'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("darkhelmet")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ludicrousspeed, darklord, schwartz")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# user 'lonestarr' with password 'vespa' and roles 'goodguy' and 'schwartz'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("lonestarr")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("vespa, goodguy, schwartz")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -----------------------------------------------------------------------------")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Roles with assigned permissions")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Each line conforms to the format defined in the")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# org.apache.shiro.realm.text.TextConfigurationRealm#setRoleDefinitions JavaDoc")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -----------------------------------------------------------------------------")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token header"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("roles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 'admin' role has all permissions, indicated by the wildcard '*'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("admin")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("*")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The 'schwartz' role can do anything (*) with any lightsaber:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("schwartz")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("lightsaber:*")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The 'goodguy' role is allowed to 'drive' (action) the winnebago (type) with")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# license plate 'eagle5' (instance specific id)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("goodguy")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("winnebago:drive:eagle5")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br")])]),n("h3",{attrs:{id:"ç¤ºä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹"}},[t._v("#")]),t._v(" ç¤ºä¾‹")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   åˆ›å»ºé…ç½®äº†Shiro SecurityManagerçš„æœ€ç®€å•æ–¹æ³•, realms, users, roles å’Œ permissions ä½¿ç”¨äº†ç®€å•çš„ INI é…ç½®\n   å®˜æ–¹ç»™çš„ç¤ºä¾‹ä¸­ä½¿ç”¨ IniSecurityManagerFactory æ„é€ æ¥è·å– SecurityManager çš„æ–¹å¼å·²ç»è¿‡æ—¶ï¼Œæ¨èä½¿ç”¨ Shiro çš„ Environment æ›¿ä»£\n  */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BasicIniEnvironment")]),t._v(" basicIniEnvironment "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BasicIniEnvironment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classpath:shiro.ini"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityManager")]),t._v(" securityManager "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" basicIniEnvironment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSecurityManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   å¯¹äºè¿™ä¸ªç®€å•çš„å¿«é€Ÿå…¥é—¨ç¤ºä¾‹ï¼Œä½¿ç”¨SecurityManagerå¯ä½œä¸ºJVMå•ä¾‹è®¿é—®ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸ä¼šè¿™æ ·åšè€Œæ˜¯ä¾èµ–äºå®ƒä»¬çš„å®¹å™¨é…ç½®æˆ– webapps çš„web.xmlã€‚\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSecurityManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("securityManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   è·å–å½“å‰æ‰§è¡Œçš„ç”¨æˆ·ï¼ˆå®‰å…¨é¢†åŸŸå…¬è®¤çš„å‘½å Subjectï¼‰\n   ç‹¬ç«‹åº”ç”¨ç¨‹åºä¸­çš„ getSubject() è°ƒç”¨å¯èƒ½åŸºäºç‰¹å®šäºåº”ç”¨ç¨‹åºä½ç½®çš„ç”¨æˆ·æ•°æ®è¿”å› Subjectï¼Œè€Œåœ¨æœåŠ¡å™¨ç¯å¢ƒ(ä¾‹å¦‚webåº”ç”¨ç¨‹åº)ä¸­ï¼Œå®ƒåŸºäºä¸å½“å‰çº¿ç¨‹æˆ–ä¼ å…¥è¯·æ±‚ç›¸å…³çš„ç”¨æˆ·æ•°æ®è·å– Subjectã€‚\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Subject")]),t._v(" currentUser "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSubject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   ä½¿ç”¨ Session åšä¸€äº›äº‹æƒ…(ä¸éœ€è¦webæˆ–EJBå®¹å™¨!!)\n   è¯¥ Session æ˜¯ä¸€ä¸ªç‰¹å®šäº Shiro çš„å®ä¾‹ï¼Œå®ƒæä¾›äº†å¸¸è§„ HttpSession æ‰€æä¾›çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œä½†ä¹Ÿæä¾›äº†ä¸€äº›é¢å¤–çš„å¥½å¤„ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«: å®ƒä¸éœ€è¦HTTPç¯å¢ƒ!\n   å¦‚æœåœ¨ web åº”ç”¨ç¨‹åºä¸­éƒ¨ç½²ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè¯å°†åŸºäº HttpSessionã€‚ä½†æ˜¯ï¼Œåœ¨é web ç¯å¢ƒä¸­ï¼Œæ¯”å¦‚è¿™ä¸ªç®€å•çš„å¿«é€Ÿå…¥é—¨ï¼ŒShiroé»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨ä½¿ç”¨å®ƒçš„ä¼ä¸šä¼šè¯ç®¡ç†ã€‚\n   è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨ä»»ä½•å±‚çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ç›¸åŒçš„APIï¼Œè€Œä¸ç®¡éƒ¨ç½²ç¯å¢ƒå¦‚ä½•ã€‚è¿™æ‰“å¼€äº†ä¸€ä¸ªå…¨æ–°çš„åº”ç”¨ç¨‹åºä¸–ç•Œï¼Œå› ä¸ºä»»ä½•éœ€è¦ä¼šè¯çš„åº”ç”¨ç¨‹åºéƒ½ä¸éœ€è¦å¼ºåˆ¶ä½¿ç”¨HttpSessionæˆ–EJBæœ‰çŠ¶æ€ä¼šè¯beanã€‚\n   è€Œä¸”ï¼Œä»»ä½•å®¢æˆ·æœºæŠ€æœ¯ç°åœ¨éƒ½å¯ä»¥å…±äº«ä¼šè¯æ•°æ®ã€‚\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Session")]),t._v(" session "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSession")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conanan"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conanan"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è·å–åˆ°æ­£ç¡®çš„å€¼! ["')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   ç™»å½•å½“å‰ç”¨æˆ·ï¼Œå¯ä»¥æ£€æŸ¥è§’è‰²å’Œæƒé™\n   æˆ‘ä»¬åªèƒ½å¯¹å·²çŸ¥ç”¨æˆ·è¿›è¡Œè¿™äº›æ£€æŸ¥ã€‚ä¸Šé¢çš„ Subject å®ä¾‹è¡¨ç¤ºå½“å‰ç”¨æˆ·ï¼Œä½†æ˜¯è°æ˜¯å½“å‰ç”¨æˆ·å‘¢?å—¯ï¼Œä»–ä»¬æ˜¯åŒ¿åçš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œç›´åˆ°ä»–ä»¬è‡³å°‘ç™»å½•ä¸€æ¬¡ã€‚è®©æˆ‘ä»¬è¿™æ ·åš:\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isAuthenticated")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsernamePasswordToken")]),t._v(" token "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsernamePasswordToken")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lonestarr"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vespa"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// token.setRememberMe(true); //ä¹Ÿå¯ä»¥åœ¨æ„é€ ä¸­ç¬¬ä¸‰ä¸ªå‚æ•°æ·»åŠ ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç™»å½•å¤±è´¥éœ€æ•è·å¼‚å¸¸")]),t._v("\n      currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UnknownAccountException")]),t._v(" uae"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯¥ç”¨æˆ·ä¸å­˜åœ¨ï¼š"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrincipal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IncorrectCredentialsException")]),t._v(" ice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrincipal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è´¦å·çš„å¯†ç é”™è¯¯!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LockedAccountException")]),t._v(" lae"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è´¦å·"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrincipal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('" å·²è¢«é”.  "')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n               "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¯·è”ç³»ç®¡ç†å‘˜è§£é”."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è¿™é‡Œæ•è·æ›´å¤šçš„å¼‚å¸¸(å¯èƒ½æ˜¯ç‰¹å®šäºæ‚¨çš„åº”ç”¨ç¨‹åºçš„è‡ªå®šä¹‰å¼‚å¸¸?)")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯å‚è€ƒhttps://shiro.apache.org/static/1.5.1/apidocs/org/apache/shiro/authc/AuthenticationException.html")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationException")]),t._v(" ae"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//unexpected condition?  error?")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   ç”¨æˆ·ç™»é™†åå¯ä»¥åšå¦‚ä¸‹äº‹æƒ…ï¼šå‘Šè¯‰æˆ‘ä»¬å½“å‰ç”¨æˆ·æ˜¯è°ï¼Œè¾“å‡ºä»–çš„ identifying principalï¼ˆä¸»è¦èº«ä»½ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­æ˜¯ usernameï¼‰\n   */")]),t._v("\n  log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ç”¨æˆ· ["')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPrincipal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"] ç™»é™†æˆåŠŸ."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   æµ‹è¯•æ˜¯å¦æœ‰è¿™ä¸ªè§’è‰²\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"schwartz"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"May the Schwartz be with you!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, mere mortal."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ä»–ä»¬æ˜¯å¦æœ‰æƒé™å¯¹æŸç§ç±»å‹çš„å®ä½“é‡‡å–è¡ŒåŠ¨:\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPermitted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lightsaber:wield"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"You may use a lightsaber ring.  Use it wisely."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sorry, lightsaber rings are for schwartz masters only."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä¸€ä¸ªéå¸¸å¼ºå¤§çš„å®ä¾‹çº§æƒé™æ£€æŸ¥â€”â€”æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦æœ‰èƒ½åŠ›è®¿é—®æŸä¸ªç±»å‹çš„ç‰¹å®šå®ä¾‹:\n   */")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPermitted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"winnebago:drive:eagle5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"You are permitted to 'drive' the winnebago with license plate (id) 'eagle5'.  \"")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Here are the keys - have fun!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"Sorry, you aren't allowed to drive the 'eagle5' winnebago!\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n   é€€å‡ºã€‚åˆ é™¤æ‰€æœ‰æ ‡è¯†ä¿¡æ¯å¹¶ä½¿å…¶ä¼šè¯æ— æ•ˆã€‚\n   å› ä¸º remember æ ‡ç¤ºé€šå¸¸ä½¿ç”¨cookieè¡¨ç¤ºï¼Œå®šå‘åˆ°ç™»é™†é¡µé¢ï¼Œè®¾ç½®åŒåcookieä¸”maxAgeä¸º0\n   */")]),t._v("\n  currentUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br"),n("span",{staticClass:"line-number"},[t._v("98")]),n("br"),n("span",{staticClass:"line-number"},[t._v("99")]),n("br")])]),n("p",[t._v("æ‰§è¡Œåçš„æ—¥å¿—")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("a.s.s.m.AbstractValidatingSessionManager : Enabling session validation scheduler...\nt.c.s.ShiroQuickstartApplication         : è·å–åˆ°æ­£ç¡®çš„å€¼! [conanan]\nt.c.s.ShiroQuickstartApplication         : ç”¨æˆ· [lonestarr] ç™»é™†æˆåŠŸ.\nt.c.s.ShiroQuickstartApplication         : May the Schwartz be with you!\nt.c.s.ShiroQuickstartApplication         : You may use a lightsaber ring.  Use it wisely.\nt.c.s.ShiroQuickstartApplication         : You are permitted to 'drive' the winnebago with license plate (id) 'eagle5'.  Here are the keys - have fun!\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("h2",{attrs:{id:"web-åº”ç”¨ç¨‹åº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#web-åº”ç”¨ç¨‹åº"}},[t._v("#")]),t._v(" Web åº”ç”¨ç¨‹åº")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("æ–‡æ¡£&åšå®¢")]),t._v(" "),n("p",[t._v("é›†æˆ Shiro åˆ° SpringBoot çš„"),n("a",{attrs:{href:"https://shiro.apache.org/spring-boot.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®˜æ–¹æ–‡æ¡£"),n("OutboundLink")],1),t._v("ã€‚è¿˜æ˜¯ç”¨è°·æ­Œæœå‡ºæ¥çš„ï¼Œå®˜æ–¹æ–‡æ¡£æ²¡æ‰¾åˆ°å…¥å£ï¼ŒğŸ‘´ä½›äº†ã€‚"),n("a",{attrs:{href:"https://github.com/apache/shiro",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub"),n("OutboundLink")],1),t._v(" çš„ samples ä¹Ÿæœ‰è¯¦ç»†ä»£ç ã€‚è¿™ç¯‡"),n("a",{attrs:{href:"https://developer.okta.com/blog/2017/07/13/apache-shiro-spring-boot",target:"_blank",rel:"noopener noreferrer"}},[t._v("åšå®¢"),n("OutboundLink")],1),t._v("ä¹Ÿä¸é”™ã€‚")])]),t._v(" "),n("p",[t._v("Shiro å¯¹ Spring webåº”ç”¨ç¨‹åºæä¾›äº†ä¸€æµçš„æ”¯æŒã€‚åœ¨ web åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰€æœ‰å¯è®¿é—® Shiro çš„ web è¯·æ±‚éƒ½å¿…é¡»ç»è¿‡ä¸€ä¸ª"),n("strong",[t._v("ä¸» Shiro è¿‡æ»¤å™¨")]),t._v("ã€‚è¿™ä¸ªè¿‡æ»¤å™¨æœ¬èº«éå¸¸å¼ºå¤§ï¼Œå…è®¸åŸºäºä»»ä½• URL è·¯å¾„è¡¨è¾¾å¼æ‰§è¡Œ"),n("strong",[t._v("è‡ªå®šä¹‰è¿‡æ»¤å™¨é“¾")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"å¼•å…¥ä¾èµ–-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å…¥ä¾èµ–-2"}},[t._v("#")]),t._v(" å¼•å…¥ä¾èµ–")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.shiro"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("shiro-spring-boot-web-starter"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.5.1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--å“”äº†ç‹—ï¼Œå®˜ç½‘æ–‡æ¡£ç»™çš„1.5.2-SNAPSHOTä½†æ˜¯å¹¶æ²¡æœ‰å­˜å…¥Mavenåº“é‡Œ--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("ul",[n("li",[t._v("Maven: org.apache.shiro:shiro-cache:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-config-core:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-config-ogdl:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-core:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-crypto-cipher:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-crypto-core:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-crypto-hash:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-event:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-lang:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-spring:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-web:1.5.1")]),t._v(" "),n("li",[t._v("Maven: org.apache.shiro:shiro-spring-boot-starter:1.5.1")])]),t._v(" "),n("h3",{attrs:{id:"æä¾›-realm-å®ç°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æä¾›-realm-å®ç°"}},[t._v("#")]),t._v(" æä¾› Realm å®ç°")]),t._v(" "),n("p",[n("strong",[t._v("å…·ä½“Realmå®ç°éœ€è¦é‡å†™ä¸€ä¸ªç±»ï¼Œä¸”éœ€å°†å…¶Beanæ”¾å…¥é…ç½®ç±»ä¸­")])]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * AuthorizingRealm ç»§æ‰¿äº†é¡¶çº§æŠ½è±¡ç±» AuthenticatingRealmï¼ˆä»…ç”¨äºç™»é™†è®¤è¯ï¼‰\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserRealm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorizingRealm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * è®¤è¯\n     *\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationInfo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doGetAuthenticationInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationToken")]),t._v(" authenticationToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthenticationException")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è®¤è¯ï¼Œè¯¦ç»†è§è®¤è¯æ­¥éª¤"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * æˆæƒ\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthorizationInfo")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doGetAuthorizationInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PrincipalCollection")]),t._v(" principalCollection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æˆæƒ"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br")])]),n("p",[t._v("å¦‚æœæœªå®šä¹‰"),n("code",[t._v("Realm")]),t._v(" beanï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œ"),n("code",[t._v("ShiroAutoConfiguration")]),t._v("å°†æä¾›"),n("code",[t._v("IniRealm")]),t._v("å®ç°ï¼Œè¯¥å®ç°æœŸæœ›åœ¨"),n("code",[t._v("src/main/resources")]),t._v("æˆ–"),n("code",[t._v("src/main/resources/META-INF")]),t._v("ä¸­æ‰¾åˆ°"),n("code",[t._v("shiro.ini")]),t._v("æ–‡ä»¶ã€‚")]),t._v(" "),n("h3",{attrs:{id:"shirofilterchaindefinition"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shirofilterchaindefinition"}},[t._v("#")]),t._v(" ShiroFilterChainDefinition")]),t._v(" "),n("p",[n("strong",[t._v("å¯å†™åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸­")])]),t._v(" "),n("p",[t._v("å®ƒå°†æŠŠä»»ä½•åº”ç”¨ç¨‹åºç‰¹å®šçš„è·¯å¾„"),n("strong",[t._v("æ˜ å°„åˆ°ç»™å®šçš„è¿‡æ»¤å™¨")]),t._v("ï¼Œä»¥å…è®¸"),n("strong",[t._v("ä¸åŒçš„è·¯å¾„ä¸åŒçº§åˆ«çš„è®¿é—®")]),t._v("ã€‚")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ShiroFilterChainDefinition")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("shiroFilterChainDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultShiroFilterChainDefinition")]),t._v(" chainDefinition "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultShiroFilterChainDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// logged in users with the 'admin' role")]),t._v("\n    chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin/**"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authc, roles[admin]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// logged in users with the 'document:read' permission")]),t._v("\n    chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/docs/**"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authc, perms[document:read]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// all other paths require a logged in user")]),t._v("\n    chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/**"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authc"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("å¦‚æœæˆ‘ä»¬ä¸å®šä¹‰ä¸€ä¸ªShiroFilterChainDefinition beanï¼Œé‚£ä¹ˆæ¡†æ¶å°†ä¿æŠ¤æ‰€æœ‰è·¯å¾„å¹¶å°†ç™»å½•URLè®¾ç½®ä¸ºlogin.jspã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘application.yml ä¸­æ·»åŠ ä»¥ä¸‹æ¡ç›®æ¥æ›´æ”¹è¿™ä¸ªé»˜è®¤çš„ç™»å½•URLå’Œå…¶ä»–é»˜è®¤å€¼")]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("shiro")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("loginUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /login.html\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("successUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /index.html\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("unauthorizedUrl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /login.html\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"shiro-æ³¨è§£"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#shiro-æ³¨è§£"}},[t._v("#")]),t._v(" Shiro æ³¨è§£")]),t._v(" "),n("p",[t._v("åœ¨ç‹¬ç«‹åº”ç”¨ç¨‹åºå’Œ web åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥ Shiro çš„æ³¨é‡Šç”¨äºå®‰å…¨æ£€æŸ¥ï¼Œæ›¿ä»£"),n("code",[t._v("ShiroFilterChainDefinition")]),t._v("ï¼Œä¾‹å¦‚ï¼Œ"),n("code",[t._v("@RequiresRoles")]),t._v("ã€"),n("code",[t._v("@requirespermission")]),t._v("ç­‰ï¼Œè¿™äº›æ³¨é‡Šåœ¨ä¸Šè¿°ä¸¤ä¸ªå¯åŠ¨ç¨‹åºä¸­éƒ½æ˜¯è‡ªåŠ¨å¯ç”¨çš„ã€‚åªéœ€æ³¨é‡Šæ‚¨çš„æ–¹æ³•ä»¥ä¾¿ä½¿ç”¨å®ƒä»¬ã€‚")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequiresPermissions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"document:read"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readDocument")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("Shiro æ³¨è§£å®Œå…¨æ”¯æŒåœ¨"),n("code",[t._v("@Controller")]),t._v("ç±»ä¸­ä½¿ç”¨")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountInfoController")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequiresRoles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin/config"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("adminConfig")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Model")]),t._v(" model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"view"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("p",[n("code",[t._v("ShiroFilterChainDefinition")]),t._v(" beanä»ç„¶éœ€è¦è‡³å°‘ä¸€ä¸ªå®šä¹‰æ‰èƒ½å·¥ä½œï¼ŒäºŒé€‰ä¸€ï¼šè¦ä¹ˆé…ç½®æ‰€æœ‰è·¯å¾„ä¸ºå¯é€šè¿‡"),n("code",[t._v("anon")]),t._v("è¿‡æ»¤å™¨è®¿é—®ï¼Œè¦ä¹ˆé…ç½®ä¸€ä¸ªè¿‡æ»¤å™¨ä¸ºå…è®¸æ¨¡å¼ï¼Œä¾‹å¦‚"),n("code",[t._v("authcBasic[per]")]),t._v("ã€‚")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ShiroFilterChainDefinition")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("shiroFilterChainDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultShiroFilterChainDefinition")]),t._v(" chainDefinition "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultShiroFilterChainDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// logged in users with the 'admin' role")]),t._v("\n    chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/admin/**"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authc, roles[admin]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// logged in users with the 'document:read' permission")]),t._v("\n    chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/docs/**"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authc, perms[document:read]"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// all other paths require a logged in user")]),t._v("\n    chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addPathDefinition")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/**"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authc"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" chainDefinition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("h2",{attrs:{id:"ç‹¬ç«‹åº”ç”¨ç¨‹åº-â˜ ï¸"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç‹¬ç«‹åº”ç”¨ç¨‹åº-â˜ ï¸"}},[t._v("#")]),t._v(" ç‹¬ç«‹åº”ç”¨ç¨‹åºâ€”â˜ ï¸")]),t._v(" "),n("h3",{attrs:{id:"å¼•å…¥ä¾èµ–-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å…¥ä¾èµ–-3"}},[t._v("#")]),t._v(" å¼•å…¥ä¾èµ–")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.shiro"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("shiro-spring-boot-starter"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.5.1"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--å“”äº†ç‹—ï¼Œå®˜ç½‘æ–‡æ¡£ç»™çš„1.5.2-SNAPSHOTä½†æ˜¯å¹¶æ²¡æœ‰å­˜å…¥Mavenåº“é‡Œ--\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h3",{attrs:{id:"è‡ªå®šä¹‰-realm-ç±»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰-realm-ç±»"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰ Realm ç±»")]),t._v(" "),n("p",[t._v("ä½¿ç”¨"),n("code",[t._v("shiro-spring-boot-starter")]),t._v("å‰©ä¸‹çš„æƒŸä¸€å·¥ä½œå°±æ˜¯é…ç½®ä¸€ä¸ªRealm")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Realm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("realm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("è®¾ç½®Shiroçš„æœ€ç®€å•çš„æ–¹æ³•ï¼Œè¿™æ ·æ‰€æœ‰çš„"),n("code",[t._v("SecurityUtils.*")]),t._v("æ–¹æ³•åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½èƒ½å·¥ä½œï¼Œå°±æ˜¯ä½¿"),n("code",[t._v("SecurityManager")]),t._v(" beanæˆä¸ºä¸€ä¸ªé™æ€å•ä¾‹ã€‚ä¸è¦åœ¨webåº”ç”¨ç¨‹åºä¸­è¿™æ ·åšâ€”â€”è¯·å‚é˜…ä¸Šé¢çš„webåº”ç”¨ç¨‹åºéƒ¨åˆ†ã€‚")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityManager")]),t._v(" securityManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initStaticSecurityManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SecurityUtils")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSecurityManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("securityManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v("å…¶ä»–è‡ªå·±çœ‹æ–‡æ¡£")]),t._v(" "),n("h2",{attrs:{id:"è¿‡æ»¤å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¿‡æ»¤å™¨"}},[t._v("#")]),t._v(" è¿‡æ»¤å™¨")]),t._v(" "),n("p",[t._v("æŸ¥çœ‹"),n("code",[t._v("org.apache.shiro.web.filter.mgt.DefaultFilter")]),t._v("è¯¥æšä¸¾")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DefaultFilter")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("anon")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AnonymousFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("authc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FormAuthenticationFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("authcBasic")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BasicHttpAuthenticationFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("authcBearer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BearerHttpAuthenticationFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LogoutFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("noSessionCreation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NoSessionCreationFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("perms")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PermissionsAuthorizationFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("port")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PortFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpMethodPermissionFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("roles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RolesAuthorizationFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssl")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SslFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("h3",{attrs:{id:"anon-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#anon-ğŸ”¥"}},[t._v("#")]),t._v(" anon ğŸ”¥")]),t._v(" "),n("p",[n("strong",[t._v("æ— éœ€æ‰§è¡Œä»»ä½•ç±»å‹çš„å®‰å…¨æ€§æ£€æŸ¥å³å¯ç›´æ¥è®¿é—®è·¯å¾„çš„ç­›é€‰å™¨ã€‚")])]),t._v(" "),n("p",[t._v("æ­¤è¿‡æ»¤å™¨ä¸»è¦åœ¨"),n("strong",[t._v("æ’é™¤ç­–ç•¥")]),t._v("ä¸­æœ‰ç”¨ï¼Œåœ¨è¯¥ç­–ç•¥ä¸­ï¼Œæ‚¨å·²å®šä¹‰äº†urlæ¨¡å¼ä»¥è¦æ±‚ä¸€å®šçš„å®‰å…¨çº§åˆ«ï¼Œä½†ä¹Ÿè®¸è¯¥æ¨¡å¼ä¸­ä»…URLçš„å­é›†åº”å…è®¸ä»»ä½•è®¿é—®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ç½‘ç«™çš„ä»…ç”¨æˆ·éƒ¨åˆ†ï¼Œåˆ™å¯èƒ½éœ€è¦è¦æ±‚è¯¥éƒ¨åˆ†ä¸­çš„ä»»ä½•URLè®¿é—®éƒ½å¿…é¡»æ¥è‡ªç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ã€‚")]),t._v(" "),n("p",[t._v("è¿™æ˜¯IniShiroFilteré…ç½®")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[urls] \n/user/** = authc\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¸Œæœ›"),n("code",[t._v("/user/signup/**")]),t._v("å¯¹ä»»ä½•äººéƒ½å¯ç”¨ï¼Œåˆ™å¿…é¡»æ’é™¤è¯¥è·¯å¾„ï¼Œå› ä¸ºå®ƒæ˜¯ä¸Šè¿°IniShiroFilteré…ç½®çš„è·¯å¾„çš„å­é›†ã€‚")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("/user/signup/** = anon\n/user/** = authc\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("h3",{attrs:{id:"authc-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authc-ğŸ”¥"}},[t._v("#")]),t._v(" authc ğŸ”¥")]),t._v(" "),n("p",[t._v("è¦æ±‚"),n("strong",[t._v("å¯¹è¯·æ±‚ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯")]),t._v("ä»¥ä½¿è¯·æ±‚ç»§ç»­ï¼Œå¦‚æœæœªé€šè¿‡ï¼Œåˆ™é€šè¿‡å°†ç”¨æˆ·é‡å®šå‘åˆ°æ‚¨é…ç½®çš„"),n("code",[t._v("loginUrl")]),t._v("æ¥å¼ºåˆ¶ç”¨æˆ·ç™»å½•ã€‚")]),t._v(" "),n("p",[t._v("æ­¤è¿‡æ»¤å™¨æ„é€ ä¸€ä¸ªUsernamePasswordTokenï¼Œå…¶ä¸­åŒ…å«åœ¨usernameï¼Œpasswordå’ŒRememberMeè¯·æ±‚å‚æ•°ä¸­æ‰¾åˆ°çš„å€¼ã€‚\nç„¶åï¼Œå®ƒè°ƒç”¨Subject.loginï¼ˆusernamePasswordTokenï¼‰ï¼Œæœ‰æ•ˆåœ°è‡ªåŠ¨æ‰§è¡Œç™»å½•å°è¯•ã€‚\nè¯·æ³¨æ„ï¼Œä»…å½“isLoginSubmissionï¼ˆrequestï¼Œresponseï¼‰ä¸ºtrueæ—¶ï¼Œæ‰ä¼šå°è¯•ç™»å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è¯·æ±‚æ˜¯é’ˆå¯¹loginUrlä¸”ä¸ºPOSTè¯·æ±‚æ—¶ï¼Œæ‰ä¼šå°è¯•ç™»å½•ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœç™»å½•å¤±è´¥ï¼Œåˆ™å°†åœ¨AuthenticationKeyå±æ€§é¡¹ä¸‹å°†å¾—åˆ°çš„AuthenticationExceptionå®Œå…¨é™å®šçš„ç±»åè®¾ç½®ä¸ºè¯·æ±‚å±æ€§ã€‚\nè¯¥FQCNå¯ç”¨ä½œi18né”®æˆ–æŸ¥æ‰¾æœºåˆ¶ï¼Œä»¥å‘ç”¨æˆ·è§£é‡Šå…¶ç™»å½•å°è¯•å¤±è´¥çš„åŸå› ï¼ˆä¾‹å¦‚ï¼Œæ— å¸æˆ·ï¼Œå¯†ç é”™è¯¯ç­‰ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœæ‚¨å¸Œæœ›å¤„ç†èº«ä»½éªŒè¯éªŒè¯å¹¶ä½¿ç”¨è‡ªå·±çš„ä»£ç ç™»å½•ï¼Œè¯·è€ƒè™‘æ”¹ç”¨PassThruAuthenticationFilterï¼Œå®ƒå…è®¸å¯¹loginUrlçš„è¯·æ±‚ç›´æ¥ä¼ é€’åˆ°åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚")]),t._v(" "),n("h3",{attrs:{id:"perms-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#perms-ğŸ”¥"}},[t._v("#")]),t._v(" perms ğŸ”¥")]),t._v(" "),n("p",[t._v("å¦‚æœå½“å‰ç”¨æˆ·å…·æœ‰æ˜ å°„å€¼æŒ‡å®šçš„æƒé™ï¼Œåˆ™å…è®¸è®¿é—®çš„è¿‡æ»¤å™¨ï¼›å¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šæ‰€æœ‰æƒé™ï¼Œåˆ™æ‹’ç»è®¿é—®çš„è¿‡æ»¤å™¨ã€‚æ¨èï¼")]),t._v(" "),n("h3",{attrs:{id:"roles"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#roles"}},[t._v("#")]),t._v(" roles")]),t._v(" "),n("p",[t._v("å¦‚æœå½“å‰ç”¨æˆ·å…·æœ‰æ˜ å°„å€¼æŒ‡å®šçš„è§’è‰²ï¼Œåˆ™å…è®¸è®¿é—®çš„è¿‡æ»¤å™¨ï¼›å¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šæ‰€æœ‰è§’è‰²ï¼Œåˆ™æ‹’ç»è®¿é—®çš„è¿‡æ»¤å™¨ã€‚ä½†ä¸æ¨èï¼")]),t._v(" "),n("h3",{attrs:{id:"logout-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#logout-ğŸ”¥"}},[t._v("#")]),t._v(" logout ğŸ”¥")]),t._v(" "),n("p",[t._v("ç®€å•è¿‡æ»¤å™¨ï¼Œæ¥æ”¶åˆ°è¯·æ±‚åï¼Œå°†ç«‹å³æ³¨é”€å½“å‰æ­£åœ¨æ‰§è¡Œçš„ "),n("code",[t._v("Subject")]),t._v("ï¼Œç„¶åå°†å…¶é‡å®šå‘åˆ°å·²é…ç½®çš„ "),n("code",[t._v("redirectUrl")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"rest-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rest-ğŸ”¥"}},[t._v("#")]),t._v(" rest ğŸ”¥")]),t._v(" "),n("p",[t._v("ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå®ƒå°†HTTPè¯·æ±‚çš„æ–¹æ³•ï¼ˆä¾‹å¦‚GETï¼ŒPOSTç­‰ï¼‰è½¬æ¢ä¸ºç›¸åº”çš„åŠ¨ä½œï¼ˆåŠ¨è¯ï¼‰ï¼Œå¹¶ä½¿ç”¨è¯¥åŠ¨è¯æ¥æ„é€ å°†è¢«æ£€æŸ¥ä»¥ç¡®å®šè®¿é—®æƒé™çš„æƒé™ã€‚æä¾›æ­¤è¿‡æ»¤å™¨ä¸»è¦æ˜¯ä¸ºäº†æ”¯æŒRESTç¯å¢ƒï¼Œåœ¨è¯¥ç¯å¢ƒä¸­ï¼Œè¯·æ±‚çš„ç±»å‹ï¼ˆæ–¹æ³•ï¼‰è½¬æ¢ä¸ºå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºæ‰§è¡Œçš„æ“ä½œã€‚æ­¤èŒƒä¾‹ä¸Shiroçš„ä½¿ç”¨æƒé™è¿›è¡Œè®¿é—®æ§åˆ¶çš„æ¦‚å¿µå¾ˆå¥½åœ°é…åˆä½¿ç”¨ï¼Œå¯ä»¥è½»æ¾åœ°æ‰§è¡Œæƒé™æ£€æŸ¥ã€‚")]),t._v(" "),n("p",[t._v("è¯¥è¿‡æ»¤å™¨çš„åŠŸèƒ½å¦‚ä¸‹ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("å‘ç°ä¼ å…¥çš„HTTPè¯·æ±‚çš„æ–¹æ³•ï¼ˆGETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEç­‰ï¼‰ã€‚")]),t._v(" "),n("li",[t._v("è¯¥æ–¹æ³•è¢«ç¿»è¯‘æˆæ›´â€œæ˜“äºåº”ç”¨â€çš„åŠ¨è¯ï¼Œä¾‹å¦‚â€œåˆ›å»ºâ€ï¼Œâ€œç¼–è¾‘â€ï¼Œâ€œåˆ é™¤â€ç­‰ã€‚")]),t._v(" "),n("li",[t._v("è¯¥åŠ¨è¯å°†é™„åŠ åˆ°å½“å‰åŒ¹é…è·¯å¾„çš„ä»»ä½•å·²é…ç½®æƒé™ã€‚")]),t._v(" "),n("li",[t._v("å¦‚æœå½“å‰çš„Subjectè¢«å…è®¸æ‰§è¡Œå·²è§£å†³çš„æ“ä½œï¼Œåˆ™å…è®¸è¯·æ±‚ç»§ç»­ã€‚")])]),t._v(" "),n("p",[t._v("ä¾‹å¦‚ï¼Œå¦‚æœå®šä¹‰äº†ä»¥ä¸‹è¿‡æ»¤å™¨é“¾ï¼Œâ€œrestâ€æ˜¯èµ‹äºˆè¯¥ç±»çš„è¿‡æ»¤å™¨å®ä¾‹çš„åç§°ï¼š")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("/user/** = rest[user]\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("ç„¶åï¼Œå¯¹"),n("code",[t._v("/user/1234")]),t._v("çš„ HTTP GETè¯·æ±‚å°†è½¬æ¢ä¸ºæ„é€ çš„æƒé™"),n("code",[t._v("user:read")]),t._v("ï¼ˆGET æ˜ å°„åˆ° read æ“ä½œï¼‰å¹¶æ‰§è¡Œæƒé™æ£€æŸ¥"),n("code",[t._v('Subject.isPermitted("user:read")')]),t._v("ä»¥ä¾¿å…è®¸è¯·æ±‚ç»§ç»­ã€‚")]),t._v(" "),n("p",[t._v("åŒæ ·ï¼Œåˆ°"),n("code",[t._v("/user")]),t._v("çš„HTTP POSTä¼šè½¬æ¢ä¸ºæ„é€ çš„æƒé™"),n("code",[t._v("user:create")]),t._v("ï¼ˆPOST æ˜ å°„åˆ° create æ“ä½œï¼‰å¹¶æ‰§è¡Œæƒé™æ£€æŸ¥"),n("code",[t._v('Subject.isPermitted("user:create")')]),t._v("ä»¥ä¾¿å…è®¸è¯·æ±‚ç»§ç»­ã€‚")]),t._v(" "),n("p",[t._v("ä»¥ä¸‹ä¸ºæ˜ å°„æ–¹æ³•ï¼š")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("HTTP Method")]),t._v(" "),n("th",[t._v("Mapped Action")]),t._v(" "),n("th",[t._v("Example Permission")]),t._v(" "),n("th",[t._v("Runtime Check")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("head")]),t._v(" "),n("td",[t._v("read")]),t._v(" "),n("td",[t._v("perm1")]),t._v(" "),n("td",[t._v("perm1:read")])]),t._v(" "),n("tr",[n("td",[t._v("get")]),t._v(" "),n("td",[t._v("read")]),t._v(" "),n("td",[t._v("perm2")]),t._v(" "),n("td",[t._v("perm2:read")])]),t._v(" "),n("tr",[n("td",[t._v("put")]),t._v(" "),n("td",[t._v("update")]),t._v(" "),n("td",[t._v("perm3")]),t._v(" "),n("td",[t._v("perm3:update")])]),t._v(" "),n("tr",[n("td",[t._v("post")]),t._v(" "),n("td",[t._v("create")]),t._v(" "),n("td",[t._v("perm4")]),t._v(" "),n("td",[t._v("perm4:create")])]),t._v(" "),n("tr",[n("td",[t._v("delete")]),t._v(" "),n("td",[t._v("delete")]),t._v(" "),n("td",[t._v("perm5")]),t._v(" "),n("td",[t._v("perm5:delete")])]),t._v(" "),n("tr",[n("td",[t._v("mkcol")]),t._v(" "),n("td",[t._v("create")]),t._v(" "),n("td",[t._v("perm6")]),t._v(" "),n("td",[t._v("perm6:create")])]),t._v(" "),n("tr",[n("td",[t._v("options")]),t._v(" "),n("td",[t._v("read")]),t._v(" "),n("td",[t._v("perm7")]),t._v(" "),n("td",[t._v("perm7:read")])]),t._v(" "),n("tr",[n("td",[t._v("trace")]),t._v(" "),n("td",[t._v("read")]),t._v(" "),n("td",[t._v("perm8")]),t._v(" "),n("td",[t._v("perm8:read")])])])]),t._v(" "),n("h3",{attrs:{id:"user"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#user"}},[t._v("#")]),t._v(" user")]),t._v(" "),n("p",[t._v("å¦‚æœè®¿é—®è€…æ˜¯å·²çŸ¥ç”¨æˆ·ï¼ˆå®šä¹‰ä¸ºå…·æœ‰å·²çŸ¥ principalï¼‰ï¼Œåˆ™å…è®¸è®¿é—®èµ„æºçš„è¿‡æ»¤å™¨ã€‚è¿™æ„å‘³ç€å°†å…è®¸é€šè¿‡â€œ"),n("strong",[t._v("è®°ä½æˆ‘")]),t._v("â€åŠŸèƒ½é€šè¿‡èº«ä»½éªŒè¯æˆ–è®°ä½çš„ä»»ä½•ç”¨æˆ·è®¿é—®æ­¤è¿‡æ»¤å™¨ã€‚å¦‚æœè®¿é—®è€…ä¸æ˜¯å·²çŸ¥ç”¨æˆ·ï¼Œé‚£ä¹ˆä»–ä»¬å°†è¢«é‡å®šå‘åˆ° "),n("code",[t._v("loginUrl")])]),t._v(" "),n("h3",{attrs:{id:"authcbasic-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authcbasic-ğŸ”¥"}},[t._v("#")]),t._v(" authcBasic ğŸ”¥")]),t._v(" "),n("p",[t._v("è¦æ±‚å¯¹è¯·æ±‚ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ä»¥ä½¿è¯·æ±‚ç»§ç»­ï¼Œå¦åˆ™ï¼Œè¦æ±‚ç”¨æˆ·é€šè¿‡ç‰¹å®šäºHTTP Basicåè®®çš„è´¨è¯¢ç™»å½•ã€‚æˆåŠŸç™»å½•åï¼Œå…è®¸ä»–ä»¬ç»§ç»­è®¿é—®è¯·æ±‚çš„èµ„æº/ URLã€‚")]),t._v(" "),n("p",[t._v("æ­¤å®ç°æ˜¯RFC 2617ä¸­åŸºæœ¬HTTPèº«ä»½éªŒè¯è§„èŒƒçš„â€œclean roomâ€ Javaå®ç°ã€‚")]),t._v(" "),n("p",[t._v("åŸºæœ¬èº«ä»½éªŒè¯åŠŸèƒ½å¦‚ä¸‹ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("è¦æ±‚æä¾›éœ€è¦èº«ä»½éªŒè¯çš„èµ„æºã€‚")])]),t._v(" "),n("li",[n("p",[t._v("æœåŠ¡å™¨ä»¥401å“åº”çŠ¶æ€ç­”å¤ï¼Œè®¾ç½®WWW-Authenticateæ ‡å¤´ï¼Œå¹¶é€šçŸ¥ç”¨æˆ·è¾“å…¥èµ„æºéœ€è¦è®¤è¯çš„é¡µé¢å†…å®¹ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("ä»æœåŠ¡å™¨æ”¶åˆ°æ­¤WWW-Authenticateè´¨è¯¢åï¼Œå®¢æˆ·ç«¯å°†é‡‡ç”¨ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºä»¥ä¸‹æ ¼å¼ï¼š"),n("code",[t._v("username:password")])])]),t._v(" "),n("li",[n("p",[t._v("ç„¶åï¼Œæ­¤ä»¤ç‰Œä»¥base 64ç¼–ç ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("ç„¶åï¼Œå®¢æˆ·ç«¯ä½¿ç”¨ä»¥ä¸‹ header å‘é€å¯¹åŒä¸€èµ„æºçš„å¦ä¸€ä¸ªè¯·æ±‚ï¼š")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Authorization: Basic\nBase64_encoded_username_and_password\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])])])]),t._v(" "),n("p",[t._v("ä»…å½“å‘å‡ºè¯·æ±‚çš„ä¸»é¢˜æœªé€šè¿‡èº«ä»½éªŒè¯æ—¶ï¼Œæ‰ä¼šè°ƒç”¨onAccessDeniedï¼ˆServletRequestï¼ŒServletResponseï¼‰æ–¹æ³•")]),t._v(" "),n("h3",{attrs:{id:"authcbearer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authcbearer"}},[t._v("#")]),t._v(" authcBearer")]),t._v(" "),n("p",[t._v("è¦æ±‚å¯¹è¯·æ±‚ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ä»¥ä½¿è¯·æ±‚ç»§ç»­ï¼Œå¦åˆ™ï¼Œè¦æ±‚ç”¨æˆ·é€šè¿‡ç‰¹å®šäºHTTP Beareråè®®çš„è´¨è¯¢ç™»å½•ã€‚\næˆåŠŸç™»å½•åï¼Œå…è®¸ä»–ä»¬ç»§ç»­è®¿é—®è¯·æ±‚çš„èµ„æº/ URLã€‚")]),t._v(" "),n("h3",{attrs:{id:"nosessioncreation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nosessioncreation"}},[t._v("#")]),t._v(" noSessionCreation")]),t._v(" "),n("p",[t._v("ä¸€ä¸ªPathMatchingFilterï¼Œå®ƒå°†åœ¨è¯·æ±‚æœŸé—´ç¦æ­¢åˆ›å»ºæ–°çš„ä¼šè¯ã€‚è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è¿‡æ»¤å™¨ï¼Œå¯ä»¥æ”¾ç½®åœ¨ä»»ä½•è¿‡æ»¤å™¨é“¾çš„å‰é¢ï¼Œè¿™äº›è¿‡æ»¤å™¨é“¾å¯èƒ½ä¼šå¯¼è‡´RESTï¼ŒSOAPæˆ–å…¶ä»–ä¸æ‰“ç®—å‚ä¸ä¼šè¯çš„æœåŠ¡è°ƒç”¨ã€‚")]),t._v(" "),n("p",[t._v("æ­¤ç­›é€‰å™¨å¯ç”¨ä»¥ä¸‹è¡Œä¸ºï¼š")]),t._v(" "),n("ol",[n("li",[t._v("å¦‚æœåœ¨è°ƒç”¨æ­¤è¿‡æ»¤å™¨æ—¶æŸä¸ªSubjectè¿˜æ²¡æœ‰Sessionï¼Œåˆ™æ­¤è¿‡æ»¤å™¨å°†æœ‰æ•ˆåœ°ç¦ç”¨å¯¹subject.getSessionï¼ˆï¼‰å’Œsubject.getSessionï¼ˆtrueï¼‰çš„æ‰€æœ‰è°ƒç”¨ã€‚å¦‚æœåœ¨è¯·æ±‚æœŸé—´è°ƒç”¨äº†ä»»ä½•ä¸€ä¸ªï¼Œåˆ™å°†å¼•å‘å¼‚å¸¸ã€‚")]),t._v(" "),n("li",[t._v("ä½†æ˜¯ï¼Œå¦‚æœ Subject åœ¨è°ƒç”¨æ­¤è¿‡æ»¤å™¨ä¹‹å‰å·²ç»å…·æœ‰å…³è”çš„ä¼šè¯ï¼Œè¦ä¹ˆæ˜¯å› ä¸ºå®ƒæ˜¯åœ¨åº”ç”¨ç¨‹åºçš„å¦ä¸€éƒ¨åˆ†ä¸­åˆ›å»ºçš„ï¼Œè¦ä¹ˆæ˜¯åœ¨åˆ›å»ºçš„é“¾ä¸­æ›´é«˜çš„è¿‡æ»¤å™¨ï¼Œåˆ™æ­¤è¿‡æ»¤å™¨æ— æ•ˆã€‚")])]),t._v(" "),n("p",[t._v("æœ€åï¼Œå¯¹subject.getSessionï¼ˆfalseï¼‰çš„è°ƒç”¨å°†ä¸å—å½±å“ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½å¯ä»¥åœ¨ä¸å—åˆ°å½±å“çš„æƒ…å†µä¸‹è¿›è¡Œè°ƒç”¨ã€‚")]),t._v(" "),n("h3",{attrs:{id:"port"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#port"}},[t._v("#")]),t._v(" port")]),t._v(" "),n("p",[t._v("è¦æ±‚è¯·æ±‚ä½äºç‰¹å®šç«¯å£ä¸Šçš„è¿‡æ»¤å™¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é‡å®šå‘åˆ°è¯¥ç«¯å£ä¸Šçš„ç›¸åŒURLã€‚")]),t._v(" "),n("p",[t._v("ç¤ºä¾‹é…ç½®")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[filters]\nport.port = 80\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[urls]\n/some/path/** = port\n# override for just this path:\n/another/path/** = port[8080]\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"ssl"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssl"}},[t._v("#")]),t._v(" ssl")]),t._v(" "),n("p",[t._v("è¦æ±‚é€šè¿‡SSLè¿›è¡Œè¯·æ±‚çš„è¿‡æ»¤å™¨ã€‚å¦‚æœåœ¨å·²é…ç½®çš„æœåŠ¡å™¨ç«¯å£å’Œ"),n("code",[t._v("request.isSecure()")]),t._v("ä¸Šæ”¶åˆ°è¯·æ±‚ï¼Œåˆ™å…è®¸è®¿é—®ã€‚\nå¦‚æœä»»ä¸€æ¡ä»¶ä¸ºå‡ï¼Œåˆ™è¿‡æ»¤å™¨é“¾å°†ä¸ä¼šç»§ç»­ã€‚ç«¯å£å±æ€§é»˜è®¤ä¸º443ï¼Œå¹¶ä¸”è¿˜ä¿è¯è¯·æ±‚æ–¹æ¡ˆå§‹ç»ˆä¸ºâ€œ httpsâ€ï¼ˆç«¯å£80é™¤å¤–ï¼Œç«¯å£80ä¿ç•™äº†â€œ httpâ€æ–¹æ¡ˆï¼‰ã€‚")]),t._v(" "),n("p",[t._v("ç¤ºä¾‹é…ç½®")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[urls]\n/secure/path/** = ssl\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("h2",{attrs:{id:"tag"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tag"}},[t._v("#")]),t._v(" Tag")]),t._v(" "),n("p",[t._v("å‚è€ƒ"),n("a",{attrs:{href:"https://shiro.apache.org/web.html#Web-JSP%2FGSPTagLibrary",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡æ¡£"),n("OutboundLink")],1),t._v("ï¼Œä»‹ç»çš„å¾ˆè¯¦ç»†")]),t._v(" "),n("h2",{attrs:{id:"caching"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#caching"}},[t._v("#")]),t._v(" Caching")]),t._v(" "),n("p",[t._v("å¯ç”¨ç¼“å­˜åªéœ€æä¾› "),n("code",[t._v("CacheManager")]),t._v(" bean")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CacheManager")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cacheManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MemoryConstrainedCacheManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h2",{attrs:{id:"configuration-properties"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration-properties"}},[t._v("#")]),t._v(" Configuration Properties")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("Key")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Default Value")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.enabled")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Enables Shiroâ€™s Spring module")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.web.enabled")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Enables Shiroâ€™s Spring web module")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.annotations.enabled")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Enables Spring support for Shiroâ€™s annotations")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.sessionManager.deleteInvalidSessions")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Remove invalid session from session storage")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.sessionManager.sessionIdCookieEnabled")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Enable session ID to cookie, for session tracking")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.sessionManager.sessionIdUrlRewritingEnabled")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("true")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Enable session URL rewriting support")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.userNativeSessionManager")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("false")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("If enabled Shiro will manage the HTTP sessions instead of the container")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.sessionManager.cookie.name")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("JSESSIONID")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Session cookie name")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.sessionManager.cookie.maxAge")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("-1")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Session cookie max age")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.sessionManager.cookie.domain")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("null")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Session cookie domain")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.sessionManager.cookie.path")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("null")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Session cookie path")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("shiro.sessionManager.cookie.secure")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("false")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Session cookie secure flag")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.rememberMeManager.cookie.name")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("rememberMe")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("RememberMe cookie name")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.rememberMeManager.cookie.maxAge")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("one year")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("RememberMe cookie max age")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.rememberMeManager.cookie.domain")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("null")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("RememberMe cookie domain")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.rememberMeManager.cookie.path")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("null")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("RememberMe cookie path")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.rememberMeManager.cookie.secure")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("false")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("RememberMe cookie secure flag")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.loginUrl")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("/login.jsp")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Login URL used when unauthenticated users are redirected to login page")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.successUrl")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("/")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Default landing page after a user logs in (if alternative cannot be found in the current session)")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("strong",[t._v("shiro.unauthorizedUrl")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("null")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Page to redirect user to if they are unauthorized (403 page)")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);