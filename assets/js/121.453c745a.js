(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{765:function(t,s,e){"use strict";e.r(s);var a=e(11),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_2-listener"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-listener"}},[t._v("#")]),t._v(" 2 Listener")]),t._v(" "),e("blockquote",[e("p",[t._v("web的三大组件之一")])]),t._v(" "),e("h2",{attrs:{id:"事件监听机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#事件监听机制"}},[t._v("#")]),t._v(" 事件监听机制")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("事件源（被监听对象）：小偷")])]),t._v(" "),e("li",[e("p",[t._v("事件（事件源行为）：偷东西")])]),t._v(" "),e("li",[e("p",[t._v("监听器（用于监听事件源的对象）：警察，监听器中的方法：抓捕")]),t._v(" "),e("ul",[e("li",[t._v("它是一个"),e("strong",[t._v("接口")]),t._v("，内容由我们来实现")]),t._v(" "),e("li",[t._v("它需要"),e("strong",[t._v("注册")]),t._v("，例如注册在按钮上")]),t._v(" "),e("li",[t._v("监听器中的方法，会在特殊"),e("strong",[t._v("事件发生时被调用")])])])]),t._v(" "),e("li",[e("p",[t._v("注册监听：将事件、事件源、监听器绑定在一起。 当事件源上发生某个事件后，执行监听器中的方法")])])]),t._v(" "),e("h2",{attrs:{id:"编写-listener"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编写-listener"}},[t._v("#")]),t._v(" 编写 Listener")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Java Web中完成编写监听器（以后写监听器机会很少！）")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("写一个监听器类(实现某个监听器接口)，重写方法")])]),t._v(" "),e("li",[e("p",[t._v("注册，即配置。")])]),t._v(" "),e("li",[e("p",[t._v("可以通过"),e("code",[t._v("getInitParameter()")]),t._v("获取初始化参数，加载资源文件")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("注解："),e("code",[t._v("@WebListener")])])]),t._v(" "),e("li",[e("p",[t._v("web.xml")]),t._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("listener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("listener-class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("cn.itcast.web.listener.ContextLoaderListener"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("listener-class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("listener")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--还可以指定初始化参数--\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("context-param")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("contextConfig"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param-name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param-value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/WEB-INF/classes/prop.xml"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("param-value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("context-param")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])])])])])])])]),t._v(" "),e("h2",{attrs:{id:"java-web中8个监听器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#java-web中8个监听器"}},[t._v("#")]),t._v(" Java Web中8个监听器")]),t._v(" "),e("h3",{attrs:{id:"监听-servletcontext"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#监听-servletcontext"}},[t._v("#")]),t._v(" 监听 ServletContext")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("生命周期监听："),e("span",{staticStyle:{background:"yellow"}},[e("strong",[t._v("ServletContextListener")])]),t._v("，有两个方法，一个在服务器启动后调用，一个在服务器正常关闭前调用")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("void contextInitialized(ServletContextEvent sce)")]),t._v("："),e("strong",[t._v("ServletContext对象创建后")]),t._v("会调用该方法")]),t._v(" "),e("li",[e("code",[t._v("void contextDestroyed(ServletContextEvent sce)")]),t._v("："),e("strong",[t._v("ServletContext对象被销毁之前")]),t._v("会调用该方法")])])]),t._v(" "),e("li",[e("p",[t._v("属性监听："),e("strong",[t._v("ServletContextAttributeListener")]),t._v("，它有三个方法，在添加、替换、移除属性时调用")]),t._v(" "),e("ul",[e("li",[t._v("void attributeAdded(ServletContextAttributeEvent event)：添加属性时")]),t._v(" "),e("li",[t._v("void attributeReplaced(ServletContextAttributeEvent event)：替换属性时")]),t._v(" "),e("li",[t._v("void attributeRemoved(ServletContextAttributeEvent event)：移除属性时")])])])]),t._v(" "),e("h3",{attrs:{id:"监听-httpsession"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#监听-httpsession"}},[t._v("#")]),t._v(" 监听 HttpSession")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("生命周期监听："),e("strong",[t._v("HttpSessionListener")]),t._v("，它有两个方法，一个在出生时调用，一个在死亡时调用")]),t._v(" "),e("ul",[e("li",[t._v("void sessionCreated(HttpSessionEvent se)：创建session时")]),t._v(" "),e("li",[t._v("void sessionDestroyed(HttpSessionEvent se)：销毁session时")])])]),t._v(" "),e("li",[e("p",[t._v("属性监听："),e("strong",[t._v("HttpSessioniAttributeListener")]),t._v("，它有三个方法，在添加、替换、移除属性时调用")]),t._v(" "),e("ul",[e("li",[t._v("void attributeAdded(HttpSessionBindingEvent event)：添加属性时")]),t._v(" "),e("li",[t._v("void attributeReplaced(HttpSessionBindingEvent event)：替换属性时")]),t._v(" "),e("li",[t._v("void attributeRemoved(HttpSessionBindingEvent event)：移除属性时")])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("感知监听")]),t._v("：用来"),e("strong",[t._v("添加到JavaBean上（需实现接口）")]),t._v("，"),e("strong",[t._v("不需要在web.xml中注册")])]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("HttpSessionBindingListener")]),t._v("：添加到javabean上，javabean就知道自己是否添加到session中")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("HttpSessionActivationListener")]),t._v("：监听JavaBean(实现序列化接口)是否随Session被钝化、活化")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Session的序列化：context.xml中打开被注释掉的Manager即可不允许Session序列化")])]),t._v(" "),e("li",[e("p",[t._v("Tomcat会在session长时间不被使用时"),e("strong",[t._v("钝化")]),t._v("session对象，所谓钝化session，就是把session通过序列化的方式"),e("strong",[t._v("保存到硬盘文件中")]),t._v("。当用户再使用session时，Tomcat还会把钝化的对象再活化session，所谓活化就是把硬盘文件中的session在反序列化回内存")]),t._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--配置Tomcat钝化session参数;放到tomcat\\conf\\catalina\\localhost\\项目名--\x3e")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Manager")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.catalina.session.PersistentManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("maxIdleSwap")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("Store")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.apache.catalina.session.FileStore"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("directory")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mysession"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Manager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("Context")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br")])])])])])])])]),t._v(" "),e("h3",{attrs:{id:"监听-servletrequest"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#监听-servletrequest"}},[t._v("#")]),t._v(" 监听 ServletRequest")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("生命周期监听："),e("strong",[t._v("ServletRequestListener")]),t._v("，它有两个方法，一个在出生时调用，一个在死亡时调用")]),t._v(" "),e("ul",[e("li",[t._v("void requestInitialized(ServletRequestEvent sre)：创建request时")]),t._v(" "),e("li",[t._v("void requestDestroyed(ServletRequestEvent sre)：销毁request时")])])]),t._v(" "),e("li",[e("p",[t._v("属性监听："),e("strong",[t._v("ServletRequestAttributeListener")]),t._v("，它有三个方法，在添加、替换、移除属性时调用")]),t._v(" "),e("ul",[e("li",[t._v("void attributeAdded(ServletRequestAttributeEvent srae)：添加属性时")]),t._v(" "),e("li",[t._v("void attributeReplaced(ServletRequestAttributeEvent srae)：替换属性时")]),t._v(" "),e("li",[t._v("void attributeRemoved(ServletRequestAttributeEvent srae)：移除属性时")])])])]),t._v(" "),e("h3",{attrs:{id:"事件对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#事件对象"}},[t._v("#")]),t._v(" 事件对象")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("ServletContextEvent")]),t._v("："),e("code",[t._v("ServletContext getServletContext()")]),t._v("，"),e("strong",[t._v("可以获取"),e("code",[t._v("ServletContext")])])])]),t._v(" "),e("li",[e("p",[t._v("ServletContextAttributeEvent：")]),t._v(" "),e("ul",[e("li",[t._v("ServletContext getServletContext()；")]),t._v(" "),e("li",[t._v("String getName()：获取属性名")]),t._v(" "),e("li",[t._v("Object getValue()：获取属性值")])])]),t._v(" "),e("li",[e("p",[t._v("HttpSessionEvent：HttpSession getSession()")])]),t._v(" "),e("li",[e("p",[t._v("HttpSessionBindingEvent：略")])]),t._v(" "),e("li",[e("p",[t._v("ServletRequestEvent ：")]),t._v(" "),e("ul",[e("li",[t._v("ServletContext getServletContext()；")]),t._v(" "),e("li",[t._v("ServletRequest getServletRequest()；")])])]),t._v(" "),e("li",[e("p",[t._v("ServletRequestAttributeEvent ：略")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);