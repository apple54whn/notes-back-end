(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{592:function(s,a,v){s.exports=v.p+"assets/img/image-20210325222944032.d00a78f0.png"},593:function(s,a,v){s.exports=v.p+"assets/img/image-20210325224248706.a8face4c.png"},594:function(s,a,v){s.exports=v.p+"assets/img/image-20210325230250557.0dbb8a91.png"},595:function(s,a,v){s.exports=v.p+"assets/img/image-20210325231720445.3b7f242a.png"},596:function(s,a,v){s.exports=v.p+"assets/img/image-20210325233839851.173111d5.png"},597:function(s,a,v){s.exports=v.p+"assets/img/image-20210325234659502.6c06f0ad.png"},598:function(s,a,v){s.exports=v.p+"assets/img/image-20210325235745239.0e816e7f.png"},758:function(s,a,v){"use strict";v.r(a);var e=v(11),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"ä¸»ä»å¤åˆ¶-é«˜å¯ç”¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶-é«˜å¯ç”¨"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶â€”é«˜å¯ç”¨")]),s._v(" "),e("h2",{attrs:{id:"é—®é¢˜-è§£å†³æ–¹æ¡ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜-è§£å†³æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" é—®é¢˜ & è§£å†³æ–¹æ¡ˆ")]),s._v(" "),e("h3",{attrs:{id:"å•æœº-redis-çš„é£é™©ä¸é—®é¢˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å•æœº-redis-çš„é£é™©ä¸é—®é¢˜"}},[s._v("#")]),s._v(" å•æœº Redis çš„é£é™©ä¸é—®é¢˜")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("æœºå™¨æ•…éšœ")]),s._v(" "),e("ul",[e("li",[s._v("ç°è±¡ï¼šç¡¬ç›˜æ•…éšœã€ç³»ç»Ÿå´©æºƒ")]),s._v(" "),e("li",[s._v("æœ¬è´¨ï¼šæ•°æ®ä¸¢å¤±ï¼Œå¾ˆå¯èƒ½å¯¹ä¸šåŠ¡é€ æˆç¾éš¾æ€§æ‰“å‡»")])])]),s._v(" "),e("li",[e("p",[s._v("å®¹é‡ç“¶é¢ˆ")]),s._v(" "),e("ul",[e("li",[s._v("ç°è±¡ï¼šå†…å­˜ä¸è¶³ï¼Œä» 16G å‡çº§åˆ° 64Gï¼Œä» 64G å‡çº§åˆ° 128Gï¼Œæ— é™å‡çº§å†…å­˜")]),s._v(" "),e("li",[s._v("æœ¬è´¨ï¼šç©·ï¼Œç¡¬ä»¶æ¡ä»¶è·Ÿä¸ä¸Š")])])]),s._v(" "),e("li",[e("p",[s._v("ç»“è®º")]),s._v(" "),e("p",[s._v("ä¸ºäº†é¿å…å•ç‚¹ Redis æœåŠ¡å™¨æ•…éšœï¼Œå‡†å¤‡å¤šå°æœåŠ¡å™¨ï¼Œäº’ç›¸è¿é€šã€‚å°†æ•°æ®"),e("strong",[s._v("å¤åˆ¶å¤šä¸ªå‰¯æœ¬ä¿å­˜åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š")]),s._v("ï¼Œ"),e("strong",[s._v("è¿æ¥åœ¨ä¸€èµ·")]),s._v("ï¼Œå¹¶ä¿è¯æ•°æ®æ˜¯"),e("strong",[s._v("åŒæ­¥")]),s._v("çš„ã€‚å³ä½¿æœ‰å…¶ä¸­ä¸€å°æœåŠ¡å™¨å®•æœºï¼Œå…¶ä»–æœåŠ¡å™¨ä¾ç„¶å¯ä»¥ç»§ç»­ æä¾›æœåŠ¡ï¼Œå®ç° Redis çš„é«˜å¯ç”¨ï¼ŒåŒæ—¶å®ç°æ•°æ®"),e("strong",[s._v("å†—ä½™å¤‡ä»½")]),s._v("ã€‚")])])]),s._v(" "),e("h3",{attrs:{id:"å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" å¤šå°æœåŠ¡å™¨è¿æ¥æ–¹æ¡ˆ")]),s._v(" "),e("ul",[e("li",[s._v("masterï¼šæä¾›æ•°æ®æ–¹ï¼Œä¸»æœåŠ¡å™¨ï¼Œä¸»èŠ‚ç‚¹ï¼Œä¸»åº“ï¼Œä¸»å®¢æˆ·ç«¯")]),s._v(" "),e("li",[s._v("slaveï¼šæ¥æ”¶æ•°æ®æ–¹ï¼Œä»æœåŠ¡å™¨ï¼Œä»èŠ‚ç‚¹ï¼Œä»åº“ï¼Œä»å®¢æˆ·ç«¯")]),s._v(" "),e("li",[s._v("éœ€è¦è§£å†³çš„é—®é¢˜ï¼šæ•°æ®åŒæ­¥")]),s._v(" "),e("li",[s._v("æ ¸å¿ƒå·¥ä½œï¼š"),e("strong",[s._v("master çš„æ•°æ®å¤åˆ¶åˆ° slave ä¸­")])])]),s._v(" "),e("h2",{attrs:{id:"ä¸»ä»å¤åˆ¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶")]),s._v(" "),e("h3",{attrs:{id:"ç®€ä»‹"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹"}},[s._v("#")]),s._v(" ç®€ä»‹")]),s._v(" "),e("p",[s._v("ä¸»ä»å¤åˆ¶å³"),e("strong",[s._v("å°† master ä¸­çš„æ•°æ®å³æ—¶ã€æœ‰æ•ˆçš„å¤åˆ¶åˆ° slave ä¸­")])]),s._v(" "),e("p",[s._v("ä¸€ä¸ª master å¯ä»¥æ‹¥æœ‰å¤šä¸ª slaveï¼Œä¸€ä¸ª slave åªå¯¹åº”ä¸€ä¸ª masterã€‚ä¸€å¯¹å¤šã€‚")]),s._v(" "),e("p",[s._v("master èŒè´£ï¼š")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("å†™æ•°æ®")])]),s._v(" "),e("li",[s._v("æ‰§è¡Œ"),e("strong",[s._v("å†™æ“ä½œæ—¶")]),s._v("ï¼Œå°†"),e("strong",[s._v("å‡ºç°å˜åŒ–çš„æ•°æ®è‡ªåŠ¨åŒæ­¥åˆ° slave")])]),s._v(" "),e("li",[s._v("è¯»æ•°æ®ï¼ˆå¯å¿½ç•¥ï¼‰")])]),s._v(" "),e("p",[s._v("slave èŒè´£ï¼š")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("è¯»æ•°æ®")])]),s._v(" "),e("li",[s._v("å†™æ•°æ®ï¼ˆç¦æ­¢ï¼‰")])]),s._v(" "),e("h3",{attrs:{id:"ä½œç”¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä½œç”¨"}},[s._v("#")]),s._v(" ä½œç”¨")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("è¯»å†™åˆ†ç¦»")]),s._v("ï¼šmaster å†™ã€slave è¯»ï¼Œæé«˜æœåŠ¡å™¨çš„è¯»å†™è´Ÿè½½èƒ½åŠ›")]),s._v(" "),e("li",[e("strong",[s._v("è´Ÿè½½å‡è¡¡")]),s._v("ï¼šåŸºäºä¸»ä»ç»“æ„ï¼Œé…åˆè¯»å†™åˆ†ç¦»ï¼Œç”± slave åˆ†æ‹… master è´Ÿè½½ï¼Œå¹¶æ ¹æ®éœ€æ±‚çš„å˜åŒ–ï¼Œæ”¹å˜ slave çš„æ•°é‡ï¼Œé€šè¿‡å¤šä¸ªä»èŠ‚ç‚¹åˆ†æ‹…æ•°æ®è¯»å–è´Ÿè½½ï¼Œå¤§å¤§æé«˜ Redis æœåŠ¡å™¨å¹¶å‘é‡ä¸æ•°æ®ååé‡")]),s._v(" "),e("li",[e("strong",[s._v("æ•…éšœæ¢å¤")]),s._v("ï¼šå½“ master å‡ºç°é—®é¢˜æ—¶ï¼Œç”± slave æä¾›æœåŠ¡ï¼Œå®ç°å¿«é€Ÿçš„æ•…éšœæ¢å¤")]),s._v(" "),e("li",[e("strong",[s._v("æ•°æ®å†—ä½™")]),s._v("ï¼šå®ç°"),e("strong",[s._v("æ•°æ®çƒ­å¤‡ä»½")]),s._v("ï¼Œæ˜¯æŒä¹…åŒ–ä¹‹å¤–çš„ä¸€ç§æ•°æ®å†—ä½™æ–¹å¼")]),s._v(" "),e("li",[e("strong",[s._v("é«˜å¯ç”¨åŸºçŸ³")]),s._v("ï¼šåŸºäºä¸»ä»å¤åˆ¶ï¼Œæ„å»ºå“¨å…µæ¨¡å¼ä¸é›†ç¾¤ï¼Œå®ç° Redis çš„é«˜å¯ç”¨æ–¹æ¡ˆ")])]),s._v(" "),e("h3",{attrs:{id:"æµç¨‹æ€»è¿°-ğŸ”¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æµç¨‹æ€»è¿°-ğŸ”¥"}},[s._v("#")]),s._v(" æµç¨‹æ€»è¿° ğŸ”¥")]),s._v(" "),e("p",[s._v("ä¸»ä»å¤åˆ¶è¿‡ç¨‹å¤§ä½“å¯ä»¥åˆ†ä¸º 3 ä¸ªé˜¶æ®µï¼š")]),s._v(" "),e("ul",[e("li",[s._v("å»ºç«‹è¿æ¥é˜¶æ®µï¼ˆå³å‡†å¤‡é˜¶æ®µï¼‰ï¼š"),e("strong",[s._v("slave è¿æ¥ master")])]),s._v(" "),e("li",[s._v("æ•°æ®åŒæ­¥é˜¶æ®µï¼šåŒæ­¥")]),s._v(" "),e("li",[s._v("å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼šåå¤åŒæ­¥")])]),s._v(" "),e("img",{staticStyle:{},attrs:{src:v(592),alt:"image-20210325222944032"}}),s._v(" "),e("h2",{attrs:{id:"ä¸»ä»å¤åˆ¶æµç¨‹-å»ºç«‹è¿æ¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶æµç¨‹-å»ºç«‹è¿æ¥"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶æµç¨‹â€”å»ºç«‹è¿æ¥")]),s._v(" "),e("h3",{attrs:{id:"æµç¨‹ä»‹ç»"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æµç¨‹ä»‹ç»"}},[s._v("#")]),s._v(" æµç¨‹ä»‹ç»")]),s._v(" "),e("p",[e("strong",[s._v("å»ºç«‹ slave åˆ° master çš„è¿æ¥")]),s._v("ï¼Œä½¿ master èƒ½å¤Ÿè¯†åˆ« slaveï¼Œå¹¶"),e("strong",[s._v("ä¿å­˜ slave çš„ç«¯å£å·")])]),s._v(" "),e("img",{staticStyle:{},attrs:{src:v(593),alt:"image-20210325224248706"}}),s._v(" "),e("ol",[e("li",[e("strong",[s._v("è®¾ç½® master çš„åœ°å€å’Œç«¯å£ï¼Œå¹¶ä¿å­˜ master çš„å„ç§ä¿¡æ¯")])]),s._v(" "),e("li",[e("strong",[s._v("å»ºç«‹ socket è¿æ¥")])]),s._v(" "),e("li",[s._v("å‘é€ ping å‘½ä»¤(å®šæ—¶å™¨ä»»åŠ¡)")]),s._v(" "),e("li",[s._v("èº«ä»½éªŒè¯ï¼ˆç”±äº Redis ä¸€èˆ¬ä¸å¯¹å¤–å¼€æ”¾ï¼Œæ‰€ä»¥å¯ä»¥ä¸è®¾ç½®å¤–ç½‘è®¿é—®ä»¥åŠèº«ä»½è®¤è¯ï¼‰")]),s._v(" "),e("li",[e("strong",[s._v("master ä¿å­˜ slave çš„ç«¯å£å·")])])]),s._v(" "),e("h3",{attrs:{id:"å®è·µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®è·µ"}},[s._v("#")]),s._v(" å®è·µ")]),s._v(" "),e("p",[s._v("å¯ä»¥ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼Œå…³æ‰æ—¥å¿—ï¼Œå¹¶å‰å°è¿è¡Œï¼Œæ–¹ä¾¿æŸ¥çœ‹")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('daemonize no\n#logfile "6379.log"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("slave è¿æ¥ master")]),s._v("ï¼ˆå¦‚ä¸‹æ“ä½œéƒ½æ˜¯åœ¨ slave å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è¿›è¡Œï¼‰ï¼š")]),s._v(" "),e("p",[s._v("æ–¹å¼ 1ï¼šå®¢æˆ·ç«¯å‘é€å‘½ä»¤")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("slaveof <masterip> <masterport>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ–¹å¼ 2ï¼šå¯åŠ¨æœåŠ¡å™¨å‚æ•°")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("redis-server -slaveof <masterip> <masterport>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ–¹å¼ 3ï¼š"),e("strong",[s._v("æœåŠ¡å™¨é…ç½®")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("slaveof <masterip> <masterport>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æœ€åå¯ä»¥é€šè¿‡"),e("code",[s._v("info")]),s._v("æŒ‡ä»¤æŸ¥çœ‹ä¿¡æ¯")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# slave\n\nmaster_link_down_since_seconds\nmasterhost\nmasterport\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# master\n\nslave_listening_port(å¤šä¸ª)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("ä¸»åŠ¨æ–­å¼€è¿æ¥ï¼ˆå®¢æˆ·ç«¯å‘é€å‘½ä»¤ï¼‰ï¼š")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("slaveof no one\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("æ³¨æ„ï¼šslave æ–­å¼€è¿æ¥åï¼Œ"),e("strong",[s._v("ä¸ä¼šåˆ é™¤å·²æœ‰æ•°æ®")]),s._v("ï¼Œåªæ˜¯"),e("strong",[s._v("ä¸å†æ¥å— master å‘é€çš„æ•°æ®")])]),s._v(" "),e("h3",{attrs:{id:"æˆæƒè®¿é—®"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æˆæƒè®¿é—®"}},[s._v("#")]),s._v(" æˆæƒè®¿é—®")]),s._v(" "),e("p",[s._v("æœåŠ¡ç«¯ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("master å®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç ")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("requirepass <password>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("master é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç ")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("config set requirepass <password>\nconfig get requirepass\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])]),s._v(" "),e("p",[s._v("å®¢æˆ·ç«¯ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("slave å®¢æˆ·ç«¯å‘é€å‘½ä»¤è®¾ç½®å¯†ç ")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("auth <password>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("slave å¯åŠ¨æœåŠ¡å™¨è®¾ç½®å¯†ç ")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("redis-server â€“a <password>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("slave é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç ")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("masterauth <password>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("h2",{attrs:{id:"ä¸»ä»å¤åˆ¶æµç¨‹-æ•°æ®åŒæ­¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶æµç¨‹-æ•°æ®åŒæ­¥"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶æµç¨‹â€”æ•°æ®åŒæ­¥")]),s._v(" "),e("h3",{attrs:{id:"æµç¨‹ä»‹ç»-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æµç¨‹ä»‹ç»-2"}},[s._v("#")]),s._v(" æµç¨‹ä»‹ç»")]),s._v(" "),e("p",[s._v("åœ¨ slave åˆæ¬¡è¿æ¥ master åï¼Œå¤åˆ¶ master ä¸­çš„æ‰€æœ‰æ•°æ®åˆ° slaveã€‚å¹¶å°† slave çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°æˆ master å½“å‰çš„æ•°æ®åº“çŠ¶æ€ã€‚")]),s._v(" "),e("img",{staticStyle:{},attrs:{src:v(594),alt:"image-20210325230250557"}}),s._v(" "),e("ol",[e("li",[s._v("è¯·æ±‚åŒæ­¥æ•°æ®")]),s._v(" "),e("li",[s._v("åˆ›å»º RDB åŒæ­¥æ•°æ®")]),s._v(" "),e("li",[s._v("æ¢å¤ RDB åŒæ­¥æ•°æ®")]),s._v(" "),e("li",[s._v("è¯·æ±‚éƒ¨åˆ†åŒæ­¥æ•°æ®")]),s._v(" "),e("li",[s._v("æ¢å¤éƒ¨åˆ†åŒæ­¥æ•°æ®ã€‚è‡³æ­¤ï¼Œæ•°æ®åŒæ­¥å·¥ä½œå®Œæˆ!")])]),s._v(" "),e("p",[s._v("æ­¤æ—¶çŠ¶æ€ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("slaveï¼šå…·æœ‰ master ç«¯å…¨éƒ¨æ•°æ®ï¼ŒåŒ…å« RDB è¿‡ç¨‹æ¥æ”¶çš„æ•°æ®")]),s._v(" "),e("li",[s._v("masterï¼š"),e("strong",[s._v("ä¿å­˜ slave å½“å‰æ•°æ®åŒæ­¥çš„ä½ç½®")])])]),s._v(" "),e("h3",{attrs:{id:"æ•°æ®åŒæ­¥é˜¶æ®µ-master-è¯´æ˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åŒæ­¥é˜¶æ®µ-master-è¯´æ˜"}},[s._v("#")]),s._v(" æ•°æ®åŒæ­¥é˜¶æ®µ master è¯´æ˜")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("å¦‚æœ master æ•°æ®é‡å·¨å¤§ï¼Œæ•°æ®åŒæ­¥é˜¶æ®µåº”"),e("strong",[s._v("é¿å¼€æµé‡é«˜å³°æœŸ")]),s._v("ï¼Œé¿å…é€ æˆ master é˜»å¡ï¼Œå½±å“ä¸šåŠ¡æ­£å¸¸æ‰§è¡Œã€‚å¦‚æ–°å¢ slave èŠ‚ç‚¹")])]),s._v(" "),e("li",[e("p",[s._v("å¤åˆ¶ç¼“å†²åŒºå¤§å°è®¾å®šä¸åˆç†ï¼Œä¼šå¯¼è‡´æ•°æ®æº¢å‡ºã€‚å¦‚è¿›è¡Œå…¨é‡å¤åˆ¶å‘¨æœŸå¤ªé•¿ï¼Œè¿›è¡Œéƒ¨åˆ†å¤åˆ¶æ—¶å‘ç°æ•°æ®å·²ç»å­˜åœ¨ä¸¢å¤±çš„æƒ…å†µï¼Œå¿…é¡»è¿›è¡Œç¬¬äºŒæ¬¡å…¨é‡å¤åˆ¶ï¼Œè‡´ä½¿ slave é™·å…¥æ­»å¾ªç¯çŠ¶æ€ã€‚")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("repl-backlog-size 1mb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("master å•æœºå†…å­˜å ç”¨ä¸»æœºå†…å­˜çš„æ¯”ä¾‹ä¸åº”è¿‡å¤§ï¼Œå»ºè®®ä½¿ç”¨ 50%-70%çš„å†…å­˜ï¼Œç•™ä¸‹ 30%-50%çš„å†…å­˜ç”¨äºæ‰§ è¡Œ bgsave å‘½ä»¤å’Œåˆ›å»ºå¤åˆ¶ç¼“å†²åŒº")]),s._v(" "),e("img",{staticStyle:{},attrs:{src:v(595),alt:"image-20210325231720445"}})])]),s._v(" "),e("h3",{attrs:{id:"æ•°æ®åŒæ­¥é˜¶æ®µ-slave-è¯´æ˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åŒæ­¥é˜¶æ®µ-slave-è¯´æ˜"}},[s._v("#")]),s._v(" æ•°æ®åŒæ­¥é˜¶æ®µ slave è¯´æ˜")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("ä¸ºé¿å… slave è¿›è¡Œå…¨é‡å¤åˆ¶ã€éƒ¨åˆ†å¤åˆ¶æ—¶æœåŠ¡å™¨å“åº”é˜»å¡æˆ–æ•°æ®ä¸åŒæ­¥ï¼Œå»ºè®®å…³é—­æ­¤æœŸé—´çš„å¯¹å¤–æœåŠ¡")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("slave-serve-stale-data yes|no\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("æ•°æ®åŒæ­¥é˜¶æ®µï¼Œmaster å‘é€ç»™ slave ä¿¡æ¯å¯ä»¥ç†è§£ master æ˜¯ slave çš„ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä¸»åŠ¨å‘ slave å‘é€å‘½ä»¤")])]),s._v(" "),e("li",[e("p",[s._v("å¤šä¸ª slave åŒæ—¶å¯¹ master è¯·æ±‚æ•°æ®åŒæ­¥ï¼Œmaster å‘é€çš„ RDB æ–‡ä»¶å¢å¤šï¼Œä¼šå¯¹å¸¦å®½é€ æˆå·¨å¤§å†²å‡»ï¼Œå¦‚æœ master å¸¦å®½ä¸è¶³ï¼Œå› æ­¤æ•°æ®åŒæ­¥éœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œé€‚é‡é”™å³°")])]),s._v(" "),e("li",[e("p",[s._v("slave è¿‡å¤šæ—¶ï¼Œå»ºè®®è°ƒæ•´æ‹“æ‰‘ç»“æ„ï¼Œç”±ä¸€ä¸»å¤šä»ç»“æ„å˜ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œä¸­é—´çš„èŠ‚ç‚¹æ—¢æ˜¯ masterï¼Œä¹Ÿæ˜¯ slaveã€‚æ³¨æ„ä½¿ç”¨æ ‘çŠ¶ç»“æ„æ—¶ï¼Œç”±äºå±‚çº§æ·±åº¦ï¼Œå¯¼è‡´æ·±åº¦è¶Šé«˜çš„ slave ä¸æœ€é¡¶å±‚ master é—´æ•°æ®åŒæ­¥å»¶è¿Ÿ è¾ƒå¤§ï¼Œæ•°æ®ä¸€è‡´æ€§å˜å·®ï¼Œåº”è°¨æ…é€‰æ‹©")])])]),s._v(" "),e("h2",{attrs:{id:"ä¸»ä»å¤åˆ¶æµç¨‹-å‘½ä»¤ä¼ æ’­é˜¶æ®µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶æµç¨‹-å‘½ä»¤ä¼ æ’­é˜¶æ®µ"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶æµç¨‹â€”å‘½ä»¤ä¼ æ’­é˜¶æ®µ")]),s._v(" "),e("h3",{attrs:{id:"ç®€ä»‹-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹-2"}},[s._v("#")]),s._v(" ç®€ä»‹")]),s._v(" "),e("ul",[e("li",[s._v("å½“ master æ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹åï¼Œå¯¼è‡´ä¸»ä»æœåŠ¡å™¨æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´ï¼Œæ­¤æ—¶éœ€è¦è®©ä¸»ä»æ•°æ®åŒæ­¥åˆ°ä¸€è‡´çš„çŠ¶æ€ï¼ŒåŒæ­¥çš„åŠ¨ä½œç§°ä¸ºå‘½ä»¤ä¼ æ’­")]),s._v(" "),e("li",[s._v("master å°†æ¥æ”¶åˆ°çš„æ•°æ®å˜æ›´å‘½ä»¤å‘é€ç»™ slaveï¼Œslave æ¥æ”¶å‘½ä»¤åæ‰§è¡Œå‘½ä»¤")])]),s._v(" "),e("h3",{attrs:{id:"å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶"}},[s._v("#")]),s._v(" å‘½ä»¤ä¼ æ’­é˜¶æ®µçš„éƒ¨åˆ†å¤åˆ¶")]),s._v(" "),e("p",[s._v("å‘½ä»¤ä¼ æ’­é˜¶æ®µå‡ºç°äº†æ–­ç½‘ç°è±¡ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("ç½‘ç»œé—ªæ–­é—ªè¿ å¿½ç•¥")]),s._v(" "),e("li",[e("strong",[s._v("çŸ­æ—¶é—´")]),s._v("ç½‘ç»œä¸­æ–­ "),e("strong",[s._v("éƒ¨åˆ†å¤åˆ¶")])]),s._v(" "),e("li",[e("strong",[s._v("é•¿æ—¶é—´")]),s._v("ç½‘ç»œä¸­æ–­ "),e("strong",[s._v("å…¨é‡å¤åˆ¶")])])]),s._v(" "),e("p",[s._v("éƒ¨åˆ†å¤åˆ¶çš„ä¸‰ä¸ªæ ¸å¿ƒè¦ç´ ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("æœåŠ¡å™¨çš„è¿è¡Œ idï¼ˆ"),e("strong",[s._v("run id")]),s._v("ï¼‰")]),s._v(" "),e("li",[s._v("ä¸»æœåŠ¡å™¨çš„"),e("strong",[s._v("å¤åˆ¶ç§¯å‹ç¼“å†²åŒº")])]),s._v(" "),e("li",[s._v("ä¸»ä»æœåŠ¡å™¨çš„"),e("strong",[s._v("å¤åˆ¶åç§»é‡")])])]),s._v(" "),e("h3",{attrs:{id:"æœåŠ¡å™¨è¿è¡Œ-id-runid"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡å™¨è¿è¡Œ-id-runid"}},[s._v("#")]),s._v(" æœåŠ¡å™¨è¿è¡Œ IDâ€”runid")]),s._v(" "),e("ul",[e("li",[s._v("æ¦‚å¿µï¼šæœåŠ¡å™¨è¿è¡Œ ID æ˜¯æ¯ä¸€å°æœåŠ¡å™¨æ¯æ¬¡è¿è¡Œçš„èº«ä»½è¯†åˆ«ç ï¼Œä¸€å°æœåŠ¡å™¨å¤šæ¬¡è¿è¡Œå¯ä»¥ç”Ÿæˆå¤šä¸ªè¿è¡Œ id")]),s._v(" "),e("li",[s._v("ç»„æˆï¼šè¿è¡Œ id ç”±"),e("strong",[s._v("40 ä½å­—ç¬¦")]),s._v("ç»„æˆï¼Œæ˜¯ä¸€ä¸ª"),e("strong",[s._v("éšæœºçš„åå…­è¿›åˆ¶å­—ç¬¦")]),s._v("ã€‚å¦‚ï¼šfdc9ff13b9bbaab28db42b3d50f852bb5e3fcdce")]),s._v(" "),e("li",[s._v("ä½œç”¨ï¼šè¿è¡Œ id è¢«ç”¨äºåœ¨æœåŠ¡å™¨é—´è¿›è¡Œä¼ è¾“ï¼Œ"),e("strong",[s._v("è¯†åˆ«èº«ä»½")]),s._v("ã€‚å¦‚æœæƒ³ä¸¤æ¬¡æ“ä½œå‡å¯¹åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œï¼Œå¿…é¡»æ¯æ¬¡æ“ä½œæºå¸¦å¯¹åº”çš„è¿è¡Œ idï¼Œç”¨äºå¯¹æ–¹è¯†åˆ«")]),s._v(" "),e("li",[s._v("å®ç°æ–¹å¼ï¼šè¿è¡Œ id åœ¨æ¯å°"),e("strong",[s._v("æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆ")]),s._v("çš„ï¼Œ"),e("strong",[s._v("master")]),s._v("åœ¨"),e("strong",[s._v("é¦–æ¬¡è¿æ¥ slave")]),s._v("æ—¶ï¼Œä¼šå°†è‡ªå·±çš„è¿è¡Œ ID"),e("strong",[s._v("å‘é€")]),s._v("ç»™ slaveï¼Œ"),e("strong",[s._v("slave ä¿å­˜æ­¤ ID")]),s._v("ï¼Œé€šè¿‡ info Server å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹èŠ‚ç‚¹çš„ runid")])]),s._v(" "),e("h3",{attrs:{id:"å¤åˆ¶ç¼“å†²åŒº"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¤åˆ¶ç¼“å†²åŒº"}},[s._v("#")]),s._v(" å¤åˆ¶ç¼“å†²åŒº")]),s._v(" "),e("p",[s._v("ä»‹ç»ï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("å¤åˆ¶ç¼“å†²åŒºï¼Œåˆåå¤åˆ¶ç§¯å‹ç¼“å†²åŒºï¼Œæ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡º("),e("strong",[s._v("FIFO")]),s._v(")çš„é˜Ÿåˆ—ï¼Œç”¨äºå­˜å‚¨æœåŠ¡å™¨æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼Œæ¯æ¬¡ä¼ æ’­å‘½ä»¤ï¼Œmaster éƒ½ä¼šå°†ä¼ æ’­çš„å‘½ä»¤è®°å½•ä¸‹æ¥ï¼Œå¹¶å­˜å‚¨åœ¨å¤åˆ¶ç¼“å†²åŒºã€‚"),e("strong",[s._v("å¯¹åº” slave æœ‰å¤šå°‘åˆ™è¯¥ç¼“å†²åŒºæœ‰å¤šå°‘ä¸ª")]),s._v("ï¼")]),s._v(" "),e("p",[s._v("å¤åˆ¶ç¼“å†²åŒºé»˜è®¤æ•°æ®å­˜å‚¨ç©ºé—´å¤§å°æ˜¯"),e("strong",[s._v("1M")]),s._v("ï¼Œç”±äºå­˜å‚¨ç©ºé—´å¤§å°æ˜¯å›ºå®šçš„ï¼Œå½“å…¥é˜Ÿå…ƒç´ çš„æ•°é‡å¤§äºé˜Ÿåˆ—é•¿åº¦æ—¶ï¼Œæœ€å…ˆå…¥é˜Ÿçš„å…ƒç´ ä¼š"),e("strong",[s._v("è¢«å¼¹å‡º")]),s._v("ï¼Œè€Œæ–°å…ƒç´ ä¼šè¢«æ”¾å…¥é˜Ÿåˆ—")])]),s._v(" "),e("li",[e("p",[s._v("ç”±æ¥ï¼šæ¯å°æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå¦‚æœå¼€å¯æœ‰ AOF æˆ–è¢«è¿æ¥æˆä¸º master èŠ‚ç‚¹ï¼Œå³åˆ›å»ºå¤åˆ¶ç¼“å†²åŒº")])]),s._v(" "),e("li",[e("p",[s._v("ä½œç”¨ï¼šç”¨äºä¿å­˜ master æ”¶åˆ°çš„æ‰€æœ‰æŒ‡ä»¤(ä»…å½±å“æ•°æ®å˜æ›´çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚ setï¼Œselect)")])]),s._v(" "),e("li",[e("p",[s._v("æ•°æ®æ¥æºï¼šå½“ master æ¥æ”¶åˆ°ä¸»å®¢æˆ·ç«¯çš„æŒ‡ä»¤æ—¶ï¼Œé™¤äº†å°†æŒ‡ä»¤æ‰§è¡Œï¼Œä¼šå°†è¯¥æŒ‡ä»¤å­˜å‚¨åˆ°ç¼“å†²åŒºä¸­")])])]),s._v(" "),e("p",[e("img",{attrs:{src:v(596),alt:"image-20210325233839851"}})]),s._v(" "),e("h3",{attrs:{id:"ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡-offset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡-offset"}},[s._v("#")]),s._v(" ä¸»ä»æœåŠ¡å™¨å¤åˆ¶åç§»é‡â€”offset")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("æ¦‚å¿µï¼šä¸€ä¸ªæ•°å­—ï¼Œæè¿°å¤åˆ¶ç¼“å†²åŒºä¸­çš„æŒ‡ä»¤å­—èŠ‚ä½ç½®")])]),s._v(" "),e("li",[e("p",[s._v("åˆ†ç±»ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("master å¤åˆ¶åç§»é‡ï¼šè®°å½•å‘é€ç»™æ‰€æœ‰ slave çš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆå¤šä¸ªï¼‰")]),s._v(" "),e("li",[s._v("slave å¤åˆ¶åç§»é‡ï¼šè®°å½• slave æ¥æ”¶ master å‘é€è¿‡æ¥çš„æŒ‡ä»¤å­—èŠ‚å¯¹åº”çš„ä½ç½®ï¼ˆä¸€ä¸ªï¼‰")])])]),s._v(" "),e("li",[e("p",[s._v("æ•°æ®æ¥æº")]),s._v(" "),e("ul",[e("li",[s._v("master ç«¯ï¼šå‘é€ä¸€æ¬¡è®°å½•ä¸€æ¬¡")]),s._v(" "),e("li",[s._v("slave ç«¯ï¼šæ¥æ”¶ä¸€æ¬¡è®°å½•ä¸€æ¬¡")])])]),s._v(" "),e("li",[e("p",[s._v("ä½œç”¨ï¼šåŒæ­¥ä¿¡æ¯ï¼Œæ¯”å¯¹ master ä¸ slave çš„å·®å¼‚ï¼Œå½“ slave æ–­çº¿åï¼Œæ¢å¤æ•°æ®ä½¿ç”¨")])])]),s._v(" "),e("h2",{attrs:{id:"æ•°æ®åŒæ­¥-å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹-ğŸ”¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åŒæ­¥-å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹-ğŸ”¥"}},[s._v("#")]),s._v(" æ•°æ®åŒæ­¥+å‘½ä»¤ä¼ æ’­é˜¶æ®µå·¥ä½œæµç¨‹ ğŸ”¥")]),s._v(" "),e("p",[e("img",{attrs:{src:v(597),alt:"image-20210325234659502"}})]),s._v(" "),e("h2",{attrs:{id:"å¿ƒè·³æœºåˆ¶-ğŸ”¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¿ƒè·³æœºåˆ¶-ğŸ”¥"}},[s._v("#")]),s._v(" å¿ƒè·³æœºåˆ¶ ğŸ”¥")]),s._v(" "),e("h3",{attrs:{id:"ç®€ä»‹-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹-3"}},[s._v("#")]),s._v(" ç®€ä»‹")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("è¿›å…¥å‘½ä»¤ä¼ æ’­é˜¶æ®µå€™ï¼Œmaster ä¸ slave é—´éœ€è¦è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œä½¿ç”¨å¿ƒè·³æœºåˆ¶è¿›è¡Œç»´æŠ¤ï¼Œå®ç°åŒæ–¹è¿æ¥ä¿æŒåœ¨çº¿")])]),s._v(" "),e("li",[e("p",[s._v("master å¿ƒè·³ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("æŒ‡ä»¤ï¼šPING")]),s._v(" "),e("li",[s._v("å‘¨æœŸï¼šç”±"),e("code",[s._v("repl-ping-slave-period")]),s._v("å†³å®šï¼Œé»˜è®¤ 10 ç§’")]),s._v(" "),e("li",[s._v("ä½œç”¨ï¼šåˆ¤æ–­ slave æ˜¯å¦åœ¨çº¿")]),s._v(" "),e("li",[s._v("æŸ¥è¯¢ï¼šINFO replication è·å– slave æœ€åä¸€æ¬¡"),e("strong",[s._v("è¿æ¥æ—¶é—´é—´éš”")]),s._v("ï¼Œlag é¡¹ç»´æŒåœ¨ 0 æˆ– 1 è§†ä¸ºæ­£å¸¸")])])]),s._v(" "),e("li",[e("p",[s._v("slave å¿ƒè·³ä»»åŠ¡ï¼š")]),s._v(" "),e("ul",[e("li",[s._v("æŒ‡ä»¤ï¼š"),e("code",[s._v("REPLCONF ACK {offset}")])]),s._v(" "),e("li",[s._v("å‘¨æœŸï¼š1 ç§’")]),s._v(" "),e("li",[s._v("ä½œç”¨ 1ï¼šæ±‡æŠ¥ slave è‡ªå·±çš„å¤åˆ¶åç§»é‡ï¼Œè·å–æœ€æ–°çš„æ•°æ®å˜æ›´æŒ‡ä»¤")]),s._v(" "),e("li",[s._v("ä½œç”¨ 2ï¼šåˆ¤æ–­ master æ˜¯å¦åœ¨çº¿")])])])]),s._v(" "),e("h3",{attrs:{id:"æ³¨æ„"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨æ„"}},[s._v("#")]),s._v(" æ³¨æ„")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("å½“ slave å¤šæ•°æ‰çº¿ï¼Œæˆ–å»¶è¿Ÿè¿‡é«˜æ—¶ï¼Œmaster ä¸ºä¿éšœæ•°æ®ç¨³å®šæ€§ï¼Œå°†æ‹’ç»æ‰€æœ‰ä¿¡æ¯åŒæ­¥æ“ä½œ")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("min-slaves-to-write 2\nmin-slaves-max-lag 10\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("slave æ•°é‡å°‘äº 2 ä¸ª")]),s._v("ï¼Œæˆ–è€…"),e("strong",[s._v("æ‰€æœ‰ slave çš„å»¶è¿Ÿéƒ½å¤§äºç­‰äº 10 ç§’")]),s._v("æ—¶ï¼Œå¼ºåˆ¶å…³é—­ master å†™åŠŸèƒ½ï¼Œåœæ­¢æ•°æ®åŒæ­¥ï¼ˆå†™æ²¡æ„ä¹‰ï¼‰")])]),s._v(" "),e("li",[e("p",[s._v("slave æ•°é‡ç”± slave å‘é€ REPLCONF ACK å‘½ä»¤åšç¡®è®¤")])]),s._v(" "),e("li",[e("p",[s._v("slave å»¶è¿Ÿç”± slave å‘é€ REPLCONF ACK å‘½ä»¤åšç¡®è®¤")])])]),s._v(" "),e("h2",{attrs:{id:"ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰ğŸ”¥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰ğŸ”¥"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶å·¥ä½œæµç¨‹ï¼ˆå®Œæ•´ï¼‰ğŸ”¥")]),s._v(" "),e("p",[s._v("å»ºç«‹è¿æ¥+æ•°æ®åŒæ­¥è§ä¸Šé¢çš„")]),s._v(" "),e("p",[e("img",{attrs:{src:v(598),alt:"image-20210325235745239"}})]),s._v(" "),e("p",[s._v("æ³¨æ„ï¼Œâ‘  å‘é€çš„å‘½ä»¤åœ¨æ•°æ®åŒæ­¥å’Œå‘½ä»¤ä¼ æ’­é˜¶æ®µä¸åŒ")]),s._v(" "),e("h2",{attrs:{id:"å¸¸è§é—®é¢˜"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é—®é¢˜"}},[s._v("#")]),s._v(" å¸¸è§é—®é¢˜")]),s._v(" "),e("h3",{attrs:{id:"é¢‘ç¹çš„å…¨é‡å¤åˆ¶1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é¢‘ç¹çš„å…¨é‡å¤åˆ¶1"}},[s._v("#")]),s._v(" é¢‘ç¹çš„å…¨é‡å¤åˆ¶1")]),s._v(" "),e("p",[s._v("ä¼´éšç€ç³»ç»Ÿçš„è¿è¡Œï¼Œmasterçš„æ•°æ®é‡ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä¸€æ—¦"),e("strong",[s._v("masteré‡å¯ï¼Œrunidå°†å‘ç”Ÿå˜åŒ–")]),s._v("ï¼Œä¼š"),e("strong",[s._v("å¯¼è‡´å…¨éƒ¨slaveçš„å…¨é‡å¤åˆ¶")]),s._v("æ“ä½œ")]),s._v(" "),e("p",[s._v("å†…éƒ¨ä¼˜åŒ–è°ƒæ•´æ–¹æ¡ˆï¼š")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("masterå†…éƒ¨åˆ›å»º"),e("code",[s._v("master_replid")]),s._v("å˜é‡ï¼Œä½¿ç”¨runidç›¸åŒçš„ç­–ç•¥ç”Ÿæˆï¼Œé•¿åº¦41ä½ï¼Œå¹¶å‘é€ç»™æ‰€æœ‰slave")])]),s._v(" "),e("li",[e("p",[s._v("åœ¨masterå…³é—­æ—¶æ‰§è¡Œå‘½ä»¤ shutdown saveï¼Œè¿›è¡ŒRDBæŒä¹…åŒ–ï¼Œ"),e("strong",[s._v("å°†runidä¸offsetä¿å­˜åˆ°RDBæ–‡ä»¶ä¸­")])]),s._v(" "),e("ul",[e("li",[s._v("repl-id repl-offset")]),s._v(" "),e("li",[s._v("é€šè¿‡redis-check-rdb dump.rdbå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯")])])]),s._v(" "),e("li",[e("p",[s._v("masteré‡å¯ååŠ è½½RDBæ–‡ä»¶ï¼Œæ¢å¤æ•°æ®ã€‚é‡å¯åï¼Œå°†RDBæ–‡ä»¶ä¸­ä¿å­˜çš„repl-idä¸repl-offsetåŠ è½½åˆ°å†…å­˜ä¸­")]),s._v(" "),e("ul",[e("li",[s._v("master_repl_id = repl master_repl_offset = repl-offset")]),s._v(" "),e("li",[s._v("é€šè¿‡infoå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¯¥ä¿¡æ¯")])])])]),s._v(" "),e("p",[s._v("ä½œç”¨ï¼š"),e("strong",[s._v("æœ¬æœºä¿å­˜ä¸Šæ¬¡runid")]),s._v("ï¼Œé‡å¯åæ¢å¤è¯¥å€¼ï¼Œä½¿æ‰€æœ‰slaveè®¤ä¸ºè¿˜æ˜¯ä¹‹å‰çš„master")]),s._v(" "),e("h3",{attrs:{id:"é¢‘ç¹çš„å…¨é‡å¤åˆ¶2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é¢‘ç¹çš„å…¨é‡å¤åˆ¶2"}},[s._v("#")]),s._v(" é¢‘ç¹çš„å…¨é‡å¤åˆ¶2")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("é—®é¢˜ç°è±¡\nç½‘ç»œç¯å¢ƒä¸ä½³ï¼Œå‡ºç°ç½‘ç»œä¸­æ–­ï¼Œslaveä¸æä¾›æœåŠ¡")])]),s._v(" "),e("li",[e("p",[s._v("é—®é¢˜åŸå› ")]),s._v(" "),e("p",[s._v("å¤åˆ¶ç¼“å†²åŒºè¿‡å°ï¼Œæ–­ç½‘åslaveçš„offsetè¶Šç•Œï¼Œè§¦å‘å…¨é‡å¤åˆ¶")])]),s._v(" "),e("li",[e("p",[s._v("æœ€ç»ˆç»“æœ")]),s._v(" "),e("p",[s._v("slaveåå¤è¿›è¡Œå…¨é‡å¤åˆ¶")])]),s._v(" "),e("li",[e("p",[s._v("è§£å†³æ–¹æ¡ˆ\nä¿®æ”¹å¤åˆ¶ç¼“å†²åŒºå¤§å°")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("repl-backlog-size\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("å»ºè®®è®¾ç½®å¦‚ä¸‹")]),s._v(" "),e("ul",[e("li",[s._v("æµ‹ç®—ä»masteråˆ°slaveçš„é‡è¿å¹³å‡æ—¶é•¿second")]),s._v(" "),e("li",[s._v("è·å–masterå¹³å‡æ¯ç§’äº§ç”Ÿå†™å‘½ä»¤æ•°æ®æ€»é‡write_size_per_second")]),s._v(" "),e("li",[s._v("æœ€ä¼˜å¤åˆ¶ç¼“å†²åŒºç©ºé—´ = 2 * second * write_size_per_second")])])])]),s._v(" "),e("h3",{attrs:{id:"é¢‘ç¹çš„ç½‘ç»œä¸­æ–­1"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é¢‘ç¹çš„ç½‘ç»œä¸­æ–­1"}},[s._v("#")]),s._v(" é¢‘ç¹çš„ç½‘ç»œä¸­æ–­1")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("é—®é¢˜ç°è±¡\nmasterçš„CPUå ç”¨è¿‡é«˜ æˆ– slaveé¢‘ç¹æ–­å¼€è¿æ¥")])]),s._v(" "),e("li",[e("p",[s._v("é—®é¢˜åŸå› ")]),s._v(" "),e("ul",[e("li",[s._v("slaveæ¯1ç§’å‘é€REPLCONF ACKå‘½ä»¤åˆ°master")]),s._v(" "),e("li",[s._v("å½“slaveæ¥åˆ°äº†æ…¢æŸ¥è¯¢æ—¶(keys * ï¼Œhgetallç­‰)ï¼Œä¼šå¤§é‡å ç”¨CPUæ€§èƒ½")]),s._v(" "),e("li",[s._v("masteræ¯1ç§’è°ƒç”¨å¤åˆ¶å®šæ—¶å‡½æ•°replicationCron()ï¼Œæ¯”å¯¹slaveå‘ç°é•¿æ—¶é—´æ²¡æœ‰è¿›è¡Œå“åº”")])])]),s._v(" "),e("li",[e("p",[s._v("æœ€ç»ˆç»“æœ\nmasterå„ç§èµ„æº(è¾“å‡ºç¼“å†²åŒºã€å¸¦å®½ã€è¿æ¥ç­‰)è¢«ä¸¥é‡å ç”¨")])]),s._v(" "),e("li",[e("p",[s._v("è§£å†³æ–¹æ¡ˆ\né€šè¿‡è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œç¡®è®¤æ˜¯å¦é‡Šæ”¾slave")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("repl-timeout\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("è¯¥å‚æ•°å®šä¹‰äº†è¶…æ—¶æ—¶é—´çš„é˜ˆå€¼(é»˜è®¤60ç§’)ï¼Œè¶…è¿‡è¯¥å€¼ï¼Œé‡Šæ”¾slave")])])]),s._v(" "),e("h3",{attrs:{id:"é¢‘ç¹çš„ç½‘ç»œä¸­æ–­2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#é¢‘ç¹çš„ç½‘ç»œä¸­æ–­2"}},[s._v("#")]),s._v(" é¢‘ç¹çš„ç½‘ç»œä¸­æ–­2")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("é—®é¢˜ç°è±¡")]),s._v(" "),e("p",[s._v("slaveä¸masterè¿æ¥æ–­å¼€")])]),s._v(" "),e("li",[e("p",[s._v("é—®é¢˜åŸå› ")]),s._v(" "),e("ul",[e("li",[s._v("masterå‘é€pingæŒ‡ä»¤é¢‘åº¦è¾ƒä½")]),s._v(" "),e("li",[s._v("masterè®¾å®šè¶…æ—¶æ—¶é—´è¾ƒçŸ­")]),s._v(" "),e("li",[s._v("pingæŒ‡ä»¤åœ¨ç½‘ç»œä¸­å­˜åœ¨ä¸¢åŒ…")])])]),s._v(" "),e("li",[e("p",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v(" "),e("p",[s._v("æé«˜pingæŒ‡ä»¤å‘é€çš„é¢‘åº¦")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("repl-ping-slave-period\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("è¶…æ—¶æ—¶é—´repl-timeçš„æ—¶é—´è‡³å°‘æ˜¯pingæŒ‡ä»¤é¢‘åº¦çš„5åˆ°10å€ï¼Œå¦åˆ™slaveå¾ˆå®¹æ˜“åˆ¤å®šè¶…æ—¶")])])])]),s._v(" "),e("h3",{attrs:{id:"æ•°æ®ä¸ä¸€è‡´"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®ä¸ä¸€è‡´"}},[s._v("#")]),s._v(" æ•°æ®ä¸ä¸€è‡´")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("é—®é¢˜ç°è±¡")]),s._v(" "),e("p",[s._v("å¤šä¸ªslaveè·å–ç›¸åŒæ•°æ®ä¸åŒæ­¥")])]),s._v(" "),e("li",[e("p",[s._v("é—®é¢˜åŸå› ")]),s._v(" "),e("p",[s._v("ç½‘ç»œä¿¡æ¯ä¸åŒæ­¥ï¼Œæ•°æ®å‘é€æœ‰å»¶è¿Ÿ")])]),s._v(" "),e("li",[e("p",[s._v("è§£å†³æ–¹æ¡ˆ")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("ä¼˜åŒ–ä¸»ä»é—´çš„ç½‘ç»œç¯å¢ƒï¼Œé€šå¸¸æ”¾ç½®åœ¨åŒä¸€ä¸ªæœºæˆ¿éƒ¨ç½²ï¼Œå¦‚ä½¿ç”¨é˜¿é‡Œäº‘ç­‰äº‘æœåŠ¡å™¨æ—¶è¦æ³¨æ„æ­¤ç°è±¡")])]),s._v(" "),e("li",[e("p",[s._v("ç›‘æ§ä¸»ä»èŠ‚ç‚¹å»¶è¿Ÿ(é€šè¿‡offset)åˆ¤æ–­ï¼Œå¦‚æœslaveå»¶è¿Ÿè¿‡å¤§ï¼Œæš‚æ—¶å±è”½ç¨‹åºå¯¹è¯¥slaveçš„æ•°æ®è®¿é—®")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("slave-serve-stale-data yes|no\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("å¼€å¯åä»…å“åº”infoã€slaveofç­‰å°‘æ•°å‘½ä»¤(æ…ç”¨ï¼Œé™¤éå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜)")])])])])])])}),[],!1,null,null,null);a.default=t.exports}}]);