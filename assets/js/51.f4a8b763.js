(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{633:function(s,t,a){s.exports=a.p+"assets/img/CgqCHl9xtbmAP4vcAAEKnyVM6Ig708.f8618bfc.png"},634:function(s,t,a){s.exports=a.p+"assets/img/CgqCHl9xthOAHALuAAFaT_9YXuM848.ffc9dfcd.png"},792:function(s,t,a){"use strict";a.r(t);var n=a(11),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"å¤šè¡¨æ“ä½œ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¤šè¡¨æ“ä½œ"}},[s._v("#")]),s._v(" å¤šè¡¨æ“ä½œ")]),s._v(" "),n("h2",{attrs:{id:"ä¸€å¯¹ä¸€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€å¯¹ä¸€"}},[s._v("#")]),s._v(" ä¸€å¯¹ä¸€")]),s._v(" "),n("h3",{attrs:{id:"jpa-åè®®-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jpa-åè®®-ğŸ”¥"}},[s._v("#")]),s._v(" JPA åè®® ğŸ”¥")]),s._v(" "),n("p",[n("code",[s._v("@OneToOne")]),s._v(" ä¸€èˆ¬è¡¨ç¤ºå¯¹è±¡ä¹‹é—´ä¸€å¯¹ä¸€çš„å…³è”å…³ç³»ï¼Œå®ƒå¯ä»¥æ”¾åœ¨ field ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨ get/set æ–¹æ³•ä¸Šé¢ã€‚")]),s._v(" "),n("ul",[n("li",[s._v("å¦‚æœæ˜¯é…ç½®"),n("strong",[s._v("åŒå‘å…³è”")]),s._v("ï¼Œ"),n("strong",[s._v("ç»´æŠ¤å…³è”å…³ç³»çš„æ˜¯æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹")]),s._v("ï¼Œè€Œ"),n("strong",[s._v("å¦ä¸€æ–¹å¿…é¡»é…ç½® mappedBy")])]),s._v(" "),n("li",[s._v("å¦‚æœæ˜¯å•é¡¹å…³è”ï¼Œç›´æ¥é…ç½®åœ¨"),n("strong",[s._v("æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹")]),s._v("å³å¯ã€‚")])]),s._v(" "),n("h3",{attrs:{id:"æ¡ˆä¾‹ä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹ä»‹ç»"}},[s._v("#")]),s._v(" æ¡ˆä¾‹ä»‹ç»")]),s._v(" "),n("p",[s._v("ä¸¾ä¸ªä¾‹å­ï¼šuser è¡¨æ˜¯ç”¨æˆ·çš„ä¸»ä¿¡æ¯ï¼Œuser_info æ˜¯ç”¨æˆ·çš„æ‰©å±•ä¿¡æ¯ï¼Œä¸¤è€…ä¹‹é—´æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚")]),s._v(" "),n("h3",{attrs:{id:"å•å‘å…³è”"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å•å‘å…³è”"}},[s._v("#")]),s._v(" å•å‘å…³è”")]),s._v(" "),n("p",[s._v("user_info è¡¨é‡Œé¢æœ‰ä¸€ä¸ª user_id ä½œä¸ºå…³è”å…³ç³»çš„å¤–é”®ï¼Œå¦‚æœæ˜¯å•é¡¹å…³è”ï¼Œæˆ‘ä»¬çš„å†™æ³•å¦‚ä¸‹ï¼š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUTO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("User å®ä½“é‡Œé¢ä»€ä¹ˆéƒ½æ²¡å˜åŒ–ï¼Œä¸éœ€è¦æ·»åŠ  @OneToOne æ³¨è§£ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹é…ç½®å°±å¯ä»¥ï¼Œæ‰€ä»¥ UserInfo çš„ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ToString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exclude "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUTO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" ages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" telephone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ç»´æŠ¤userçš„å¤–é”®å…³è”å…³ç³»ï¼Œé…ç½®ä¸€å¯¹ä¸€")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[s._v("æˆ‘ä»¬çœ‹åˆ°ï¼ŒUserInfo å®ä½“å¯¹è±¡é‡Œé¢æ·»åŠ äº† @OneToOne æ³¨è§£ï¼Œè¿™æ—¶æˆ‘ä»¬å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹è·‘ä¸€ä¸‹çœ‹çœ‹æœ‰ä»€ä¹ˆæ•ˆæœï¼š")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sex "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ages "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("integer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" telephone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKn8pl63y4abe7n0ls6topbqjh2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("å› ä¸ºæˆ‘ä»¬æ–°å»ºäº†ä¸¤ä¸ªå®ä½“ï¼Œè·‘ä»»ä½•ä¸€ä¸ª @SpringDataTest å°±ä¼šçœ‹åˆ°ä¸Šé¢æœ‰ä¸‰ä¸ª sql åœ¨æ‰§è¡Œï¼Œåˆ†åˆ«åˆ›å»ºäº†ä¸¤å¼ è¡¨ï¼Œè€Œåœ¨ user_info è¡¨ä¸Šé¢è¿˜åˆ›å»ºäº†ä¸€ä¸ªå¤–é”®ç´¢å¼•ã€‚")]),s._v(" "),n("h3",{attrs:{id:"åŒå‘å…³è”"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŒå‘å…³è”"}},[s._v("#")]),s._v(" åŒå‘å…³è”")]),s._v(" "),n("p",[s._v("æˆ‘ä»¬ä¿æŒ UserInfo ä¸å˜ï¼Œåœ¨ User å®ä½“å¯¹è±¡é‡Œé¢æ·»åŠ è¿™ä¸€æ®µä»£ç å³å¯ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mappedBy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("å®Œæ•´çš„ User å®ä½“å¯¹è±¡å°±ä¼šå˜æˆå¦‚ä¸‹æ¨¡æ ·ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUTO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mappedBy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å˜åŒ–ä¹‹å¤„")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("æˆ‘ä»¬è·‘ä»»ä½•ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå°±ä¼šçœ‹åˆ°è¿è¡Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œè¿˜æ˜¯ä¸Šé¢ä¸‰æ¡ sqlã€‚é‚£ä¹ˆæˆ‘ä»¬å†æŸ¥çœ‹ä¸€ä¸‹ @OneToOne æºç ï¼Œçœ‹çœ‹å…¶æ”¯æŒçš„é…ç½®éƒ½æœ‰å“ªäº›ã€‚")]),s._v(" "),n("h3",{attrs:{id:"onetoone-æºç è§£è¯»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onetoone-æºç è§£è¯»"}},[s._v("#")]),s._v(" OneToOne æºç è§£è¯»")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@interface")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OneToOne")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¡¨ç¤ºå…³ç³»ç›®æ ‡å®ä½“ï¼Œé»˜è®¤è¯¥æ³¨è§£æ ‡è¯†çš„è¿”å›å€¼çš„ç±»å‹çš„ç±»ã€‚")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("targetEntity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//cascade çº§è”æ“ä½œç­–ç•¥ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„çº§è”æ“ä½œ")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cascade")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ•°æ®è·å–æ–¹å¼EAGER(ç«‹å³åŠ è½½)/LAZY(å»¶è¿ŸåŠ è½½)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FetchType")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" EAGER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ˜¯å¦å…è®¸ä¸ºç©ºï¼Œé»˜è®¤æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±è¡¨ç¤ºå¯ä»¥ä¸ºç©ºï¼›")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("optional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å…³è”å…³ç³»è¢«è°ç»´æŠ¤çš„ä¸€æ–¹å¯¹è±¡é‡Œé¢çš„å±æ€§åå­—ã€‚ åŒå‘å…³è”çš„æ—¶å€™å¿…å¡«")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mappedBy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å½“è¢«æ ‡è¯†çš„å­—æ®µå‘ç”Ÿåˆ é™¤æˆ–è€…ç½®ç©ºæ“ä½œä¹‹åï¼Œæ˜¯å¦åŒæ­¥åˆ°å…³è”å…³ç³»çš„ä¸€æ–¹ï¼Œå³è¿›è¡Œé€šè¿‡åˆ é™¤æ“ä½œï¼Œé»˜è®¤flaseï¼Œæ³¨æ„ä¸CascadeType.REMOVE çº§è”åˆ é™¤çš„åŒºåˆ«")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("orphanRemoval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h3",{attrs:{id:"mappedby-æ³¨æ„äº‹é¡¹-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mappedby-æ³¨æ„äº‹é¡¹-ğŸ”¥"}},[s._v("#")]),s._v(" mappedBy æ³¨æ„äº‹é¡¹ ğŸ”¥")]),s._v(" "),n("p",[s._v("åªæœ‰å…³è”å…³ç³»çš„"),n("strong",[s._v("ç»´æŠ¤æ–¹")]),s._v("æ‰èƒ½"),n("strong",[s._v("æ“ä½œä¸¤ä¸ªå®ä½“ä¹‹é—´å¤–é”®")]),s._v("çš„å…³ç³»ã€‚"),n("strong",[s._v("è¢«ç»´æŠ¤æ–¹å³ä½¿è®¾ç½®äº†ç»´æŠ¤æ–¹å±æ€§è¿›è¡Œå­˜å‚¨ä¹Ÿä¸ä¼šæ›´æ–°å¤–é”®å…³è”")]),s._v("ã€‚")]),s._v(" "),n("p",[s._v("mappedBy ä¸èƒ½ä¸ @JoinColumn æˆ–è€… @JoinTable åŒæ—¶ä½¿ç”¨ï¼Œå› ä¸ºæ²¡æœ‰æ„ä¹‰ï¼Œå…³è”å…³ç³»ä¸åœ¨è¿™é‡Œé¢ç»´æŠ¤ã€‚")]),s._v(" "),n("p",[s._v("æ­¤å¤–ï¼Œ"),n("strong",[s._v("mappedBy çš„å€¼")]),s._v("æ˜¯æŒ‡"),n("strong",[s._v("å¦ä¸€æ–¹çš„å®ä½“é‡Œé¢å±æ€§çš„å­—æ®µ")]),s._v("ï¼Œè€Œä¸æ˜¯æ•°æ®åº“å­—æ®µï¼Œä¹Ÿä¸æ˜¯å®ä½“çš„å¯¹è±¡çš„åå­—ã€‚ä¹Ÿå°±æ˜¯ç»´æŠ¤å…³è”å…³ç³»çš„ä¸€æ–¹å±æ€§å­—æ®µåç§°ï¼Œ"),n("strong",[s._v("æˆ–è€…åŠ äº† @JoinColumn / @JoinTable æ³¨è§£çš„å±æ€§å­—æ®µåç§°")]),s._v("ã€‚å¦‚ä¸Šé¢çš„ User ä¾‹å­ user é‡Œé¢ mappedBy çš„å€¼ï¼Œå°±æ˜¯ UserInfo é‡Œé¢çš„ user å­—æ®µçš„åå­—ã€‚")]),s._v(" "),n("h3",{attrs:{id:"cascadetypeç”¨æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cascadetypeç”¨æ³•"}},[s._v("#")]),s._v(" CascadeTypeç”¨æ³•")]),s._v(" "),n("p",[s._v("åœ¨ CascadeType çš„ç”¨æ³•ä¸­ï¼ŒCascadeType çš„æšä¸¾å€¼åªæœ‰äº”ä¸ªï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š")]),s._v(" "),n("ol",[n("li",[s._v("CascadeType.PERSIST çº§è”æ–°å»º")]),s._v(" "),n("li",[s._v("CascadeType.REMOVE çº§è”åˆ é™¤")]),s._v(" "),n("li",[s._v("CascadeType.REFRESH çº§è”åˆ·æ–°")]),s._v(" "),n("li",[s._v("CascadeType.MERGE çº§è”æ›´æ–°")]),s._v(" "),n("li",[s._v("CascadeType.ALL å››é¡¹å…¨é€‰")])]),s._v(" "),n("p",[s._v("å…¶ä¸­ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰çº§è”æ“ä½œçš„ï¼Œå…³ç³»è¡¨ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚æ­¤å¤–ï¼ŒJPA 2.0 è¿˜æ–°å¢äº† CascadeType.DETACHï¼Œå³çº§è”å®ä½“åˆ° Detach çŠ¶æ€ã€‚")]),s._v(" "),n("p",[s._v("äº†è§£äº†æšä¸¾å€¼ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹çº§è”æ–°å»ºå’Œçº§è”åˆ é™¤ã€‚")]),s._v(" "),n("p",[s._v("é¦–å…ˆï¼Œä¿®æ”¹ UserInfo é‡Œé¢çš„å…³é”®ä»£ç å¦‚ä¸‹ï¼Œå¹¶åœ¨ @OneToOne ä¸Šé¢æ·»åŠ ")]),s._v(" "),n("p",[n("code",[s._v("cascade ={CascadeType.PERSIST,CascadeType.REMOVE}")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DataJpaTestã€MybatisTest ä¼šé»˜è®¤ä½¿ç”¨å…¶æµ‹è¯•æ•°æ®æºæ›¿ä»£ï¼Œè‹¥è¦ä½¿ç”¨è‡ªå·±é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹æ³¨è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AutoConfigureTestDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("replace "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoConfigureTestDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("One2OneTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfoRepository")]),s._v(" userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testUserRelationships")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JsonProcessingException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jackxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("email")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456@126.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" userInfo "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ages")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("telephone")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¿å­˜userInfoçš„åŒä¸Šä¹Ÿä¼šä¿å­˜Userä¿¡æ¯")]),s._v("\n        userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("saveAndFlush")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åˆ é™¤userInfoï¼ŒåŒæ—¶ä¹Ÿä¼šçº§è”çš„åˆ é™¤userè®°å½•")]),s._v("\n        userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("æœ€åï¼Œè¿è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœã€‚")]),s._v(" "),n("p",[n("img",{attrs:{src:a(633),alt:"img"}})]),s._v(" "),n("p",[s._v("ä¸Šé¢çš„æµ‹è¯•åœ¨æ‰§è¡Œäº† insert çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä¸¤æ¡ insert çš„sql å’Œä¸¤æ¡ delete çš„ sqlï¼Œè¿™å°±ä½“ç°å‡ºäº† CascadeType.PERSIST å’Œ CascadeType.REMOVE çš„ä½œç”¨ã€‚")]),s._v(" "),n("p",[s._v("ä¸Šé¢è®²äº†"),n("strong",[s._v("çº§è”åˆ é™¤")]),s._v("çš„åœºæ™¯ï¼Œä¸‹é¢æˆ‘ä»¬å†è¯´ä¸€ä¸‹"),n("strong",[s._v("å…³è”å…³ç³»çš„åˆ é™¤åœºæ™¯")]),s._v("è¯¥æ€ä¹ˆåšã€‚")]),s._v(" "),n("h3",{attrs:{id:"orphanremoval-å±æ€§ç”¨æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#orphanremoval-å±æ€§ç”¨æ³•"}},[s._v("#")]),s._v(" orphanRemoval å±æ€§ç”¨æ³•")]),s._v(" "),n("p",[n("strong",[s._v("orphanRemoval è¡¨ç¤ºå½“å…³è”å…³ç³»è¢«åˆ é™¤")]),s._v("çš„æ—¶å€™ï¼Œ"),n("strong",[s._v("æ˜¯å¦åº”ç”¨çº§è”åˆ é™¤")]),s._v("ï¼Œé»˜è®¤ falseã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæµ‹è¯•ä¸€ä¸‹ä½ å°±ä¼šæ˜ç™½ã€‚")]),s._v(" "),n("p",[s._v("é¦–å…ˆï¼Œè¿˜æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œå½“æˆ‘ä»¬åˆ é™¤ userInfo çš„æ—¶å€™ï¼ŒæŠŠ User ç½®ç©ºï¼Œä½œå¦‚ä¸‹æ”¹åŠ¨ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nuserInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("å…¶æ¬¡ï¼Œæˆ‘ä»¬å†è¿è¡Œæµ‹è¯•ï¼Œçœ‹çœ‹æ•ˆæœã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("delete from user_info where id=?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("è¿™æ—¶å€™ä½ å°±ä¼šå‘ç°ï¼Œå°‘äº†ä¸€æ¡åˆ é™¤ user çš„ sqlï¼Œè¯´æ˜æ²¡æœ‰è¿›è¡Œçº§è”åˆ é™¤ã€‚é‚£æˆ‘ä»¬å†æŠŠ UserInfo åšä¸€ä¸‹è°ƒæ•´ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cascade "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PERSIST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("orphanRemoval "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//....å…¶ä»–æ²¡å˜çš„ä»£ç çœäº†")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("ç„¶åï¼Œæˆ‘ä»¬æŠŠ CascadeType.Remove åˆ é™¤äº†ï¼Œä¸è®©å®ƒè¿›è¡Œçº§è”åˆ é™¤ï¼Œä½†æ˜¯æˆ‘ä»¬æŠŠ orphanRemoval è®¾ç½®æˆ trueï¼Œå³å½“å…³è”å…³ç³»å˜åŒ–çš„æ—¶å€™çº§è”æ›´æ–°ã€‚æˆ‘ä»¬çœ‹ä¸‹å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testUserRelationships")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JsonProcessingException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jackxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("email")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456@126.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" userInfo "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ages")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("telephone")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("saveAndFlush")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAges")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿˜æ˜¯é€šè¿‡è¿™ä¸ªè®¾ç½®useræ•°æ®ä¸ºç©º")]),s._v("\n        userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿è¡Œç»“æœã€‚")]),s._v(" "),n("p",[n("img",{attrs:{src:a(634),alt:"img"}})]),s._v(" "),n("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œç»“æœä¾ç„¶æ˜¯ä¸¤ä¸ª inser å’Œä¸¤ä¸ª deleteï¼Œä½†æ˜¯ä¸­é—´å¤šäº†ä¸€ä¸ª updateã€‚æˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼Œå› ä¸ºå»æ‰äº† CascadeType.REMOVEï¼Œè¿™ä¸ªæ—¶å€™ä¸ä¼šè¿›è¡Œçº§è”åˆ é™¤äº†ã€‚å½“æˆ‘ä»¬æŠŠ user å¯¹è±¡æ›´æ–°æˆç©ºçš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œä¸€æ¡ update è¯­å¥æŠŠå…³è”å…³ç³»å»æ‰äº†ã€‚")]),s._v(" "),n("p",[s._v("è€Œä¸ºä»€ä¹ˆåˆå‡ºç°äº†çº§è”åˆ é™¤ user å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬ä¿®æ”¹äº†é›†åˆå…³è”å…³ç³»ï¼ŒorphanRemoval è®¾ç½®ä¸º trueï¼Œæ‰€ä»¥åˆæ‰§è¡Œäº†çº§è”åˆ é™¤çš„æ“ä½œã€‚è¿™ä¸€ç‚¹ä½ å¯ä»¥ä»”ç»†ä½“ä¼šä¸€ä¸‹ orphanRemoval å’Œ CascadeType.REMOVE çš„åŒºåˆ«ã€‚")]),s._v(" "),n("p",[s._v("åˆ°è¿™é‡Œï¼Œ@OneToOne å…³è”å…³ç³»ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹æ—¥å¸¸å·¥ä½œå¸¸è§çš„åœºæ™¯ï¼Œå…ˆçœ‹åœºæ™¯ä¸€ï¼šä¸»é”®å’Œå¤–é”®éƒ½æ˜¯åŒä¸€ä¸ªå­—æ®µçš„æƒ…å†µã€‚")]),s._v(" "),n("h3",{attrs:{id:"ä¸»é”®å’Œå¤–é”®éƒ½æ˜¯åŒä¸€ä¸ªå­—æ®µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»é”®å’Œå¤–é”®éƒ½æ˜¯åŒä¸€ä¸ªå­—æ®µ"}},[s._v("#")]),s._v(" ä¸»é”®å’Œå¤–é”®éƒ½æ˜¯åŒä¸€ä¸ªå­—æ®µ")]),s._v(" "),n("p",[s._v("æˆ‘ä»¬å‡è®¾ user è¡¨æ˜¯ä¸»è¡¨ï¼Œuser_info çš„ä¸»é”®æ˜¯ user_idï¼Œå¹¶ä¸” user_id=user è¡¨é‡Œé¢çš„ idï¼Œé‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ")]),s._v(" "),n("p",[s._v("ç»§ç»­æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼ŒUser å®ä½“ä¸å˜ï¼Œæˆ‘ä»¬çœ‹çœ‹ UserInfo å˜æˆä»€ä¹ˆæ ·äº†ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Serializable")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" ages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" telephone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@MapsId")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cascade "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PERSIST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("orphanRemoval "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("è¿™é‡Œçš„åšæ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠ userId è®¾ç½®ä¸ºä¸»é”®ï¼Œåœ¨ @OneToOne ä¸Šé¢æ·»åŠ  @MapsId æ³¨è§£å³å¯ã€‚"),n("strong",[s._v("@MapsId æ³¨è§£çš„ä½œç”¨æ˜¯æŠŠå…³è”å…³ç³»å®ä½“é‡Œé¢çš„ IDï¼ˆé»˜è®¤ï¼‰å€¼ copy åˆ° @MapsId æ ‡æ³¨çš„å­—æ®µä¸Šé¢")]),s._v("ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯ user_id å­—æ®µï¼‰ã€‚")]),s._v(" "),n("p",[s._v("æ¥ç€ï¼Œä¸Šé¢çš„æµ‹è¯•ç”¨ä¾‹æˆ‘ä»¬è·‘ä¸€ä¸‹ï¼Œçœ‹ä¸€ä¸‹æ•ˆæœã€‚")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sex "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ages "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("integer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" telephone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKn8pl63y4abe7n0ls6topbqjh2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥åˆ›å»ºäº† user è¡¨å’Œ user_info è¡¨ï¼Œå…¶ä¸­ user_info çš„ä¸»é”®æ˜¯ user_idï¼Œå¹¶ä¸”é€šè¿‡å¤–é”®å…³è”åˆ°äº† user è¡¨çš„ ID å­—æ®µï¼Œé‚£ä¹ˆæˆ‘ä»¬åŒæ—¶çœ‹ä¸€ä¸‹ inser çš„ sqlï¼Œä¹Ÿå‘ç”Ÿäº†å˜åŒ–ã€‚")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" telephone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("ä¸Šé¢å°±æ˜¯æˆ‘ä»¬è®²çš„å®æˆ˜åœºæ™¯ä¸€ï¼Œä¸»é”®å’Œå¤–é”®éƒ½æ˜¯åŒä¸€ä¸ªå­—æ®µã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å†è¯´ä¸€ä¸ªåœºæ™¯ï¼Œå°±æ˜¯åœ¨æŸ¥ user_info çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³çŸ¥é“ user_id çš„å€¼å°±è¡Œäº†ï¼Œä¸éœ€è¦æŸ¥ user çš„å…¶ä»–ä¿¡æ¯ï¼Œå…·ä½“æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ")]),s._v(" "),n("h3",{attrs:{id:"onetoone-å»¶è¿ŸåŠ è½½ï¼Œæˆ‘ä»¬åªéœ€è¦-id-å€¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onetoone-å»¶è¿ŸåŠ è½½ï¼Œæˆ‘ä»¬åªéœ€è¦-id-å€¼"}},[s._v("#")]),s._v(" @OneToOne å»¶è¿ŸåŠ è½½ï¼Œæˆ‘ä»¬åªéœ€è¦ ID å€¼")]),s._v(" "),n("p",[s._v("åœ¨ @OneToOne å»¶è¿ŸåŠ è½½çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾åªæƒ³æŸ¥ä¸‹ user_idï¼Œè€Œä¸æƒ³æŸ¥çœ‹ user è¡¨å…¶ä»–çš„ä¿¡æ¯ï¼Œå› ä¸ºå½“å‰ç”¨ä¸åˆ°ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§åšæ³•ã€‚")]),s._v(" "),n("p",[s._v("ç¬¬ä¸€ç§åšæ³•ï¼šè¿˜æ˜¯ User å®ä½“ä¸å˜ï¼Œæˆ‘ä»¬æ”¹ä¸€ä¸‹ UserInfo å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ToString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("exclude "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUTO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" ages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" telephone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@MapsId")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cascade "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PERSIST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("orphanRemoval "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("fetch "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FetchType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("LAZY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("ä»ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°åšçš„æ›´æ”¹å¦‚ä¸‹ï¼š")]),s._v(" "),n("ul",[n("li",[s._v("id å­—æ®µæˆ‘ä»¬å…ˆç”¨åŸæ¥çš„")]),s._v(" "),n("li",[s._v("@OneToOne ä¸Šé¢æˆ‘ä»¬æ·»åŠ  @MapsId æ³¨è§£")]),s._v(" "),n("li",[s._v("@OneToOne é‡Œé¢çš„ fetch = FetchType.LAZY è®¾ç½®å»¶è¿ŸåŠ è½½ï¼ˆé»˜è®¤ï¼‰")])]),s._v(" "),n("p",[s._v("æ¥ç€ï¼Œæˆ‘ä»¬æ”¹é€ ä¸€ä¸‹æµ‹è¯•ç±»ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@TestInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestInstance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Lifecycle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PER_CLASS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfoRepositoryTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfoRepository")]),s._v(" userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@BeforeAll")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jackxx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("email")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456@126.com"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" userInfo "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ages")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("user")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("telephone")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"12345678"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("saveAndFlush")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * æµ‹è¯•ç”¨Userå…³è”å…³ç³»æ“ä½œ\n     *\n     * @throws JsonProcessingException\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testUserRelationships")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JsonProcessingException")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),s._v(" userInfo1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" userInfoRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userInfo1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("p",[s._v("ç„¶åï¼Œæˆ‘ä»¬è·‘ä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹çœ‹æµ‹è¯•ç»“æœã€‚")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¸¤æ¡inserç…§æ—§ï¼Œè€Œåªæœ‰ä¸€ä¸ªselect")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" userinfo0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" user_id3_6_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" userinfo0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ages "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" ages1_6_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" userinfo0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("telephone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" telephon2_6_0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" user_info userinfo0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" userinfo0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("æœ€åä½ ä¼šå‘ç°ï¼Œæ‰“å°çš„ç»“æœç¬¦åˆé¢„æœŸã€‚")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("UserInfo(id=1, ages=12, telephone=12345678)\n1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("æ¥ä¸‹æ¥ä»‹ç»ç¬¬äºŒç§åšæ³•ï¼Œè¿™ç§åšæ³•å¾ˆç®€å•ï¼Œåªè¦åœ¨ UserInfo å¯¹è±¡é‡Œé¢ç›´æ¥å»æ‰ @OneToOne å…³è”å…³ç³»ï¼Œæ–°å¢ä¸‹é¢çš„å­—æ®µå³å¯ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Column")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("è¿™å°±æ²¡æœ‰å…³è”å…³ç³»äº†")]),s._v(" "),n("p",[s._v("ç¬¬ä¸‰åšæ³•æ˜¯åˆ©ç”¨ Hibernateï¼Œå®ƒç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§å­—èŠ‚ç å¢å¼ºæŠ€æœ¯ï¼Œé€šè¿‡ç¼–è¯‘å™¨æ”¹å˜ class è§£å†³äº†å»¶è¿ŸåŠ è½½é—®é¢˜ã€‚è¿™ç§æ–¹å¼æœ‰ç‚¹å¤æ‚ï¼Œéœ€è¦åœ¨ç¼–è¯‘å™¨å¼•å…¥ hibernateEnhance çš„ç›¸å…³ jar åŒ…ï¼Œä»¥åŠç¼–è¯‘å™¨éœ€è¦æ”¹å˜ class æ–‡ä»¶å¹¶æ·»åŠ  lazy ä»£ç†æ¥è§£å†³å»¶è¿ŸåŠ è½½ã€‚æˆ‘ä¸å¤ªæ¨èè¿™ç§æ–¹å¼ï¼Œå› ä¸ºå¤ªå¤æ‚ï¼Œä½ çŸ¥é“æœ‰è¿™å›äº‹å°±è¡Œäº†ã€‚")]),s._v(" "),n("p",[s._v("ä»¥ä¸Šæˆ‘ä»¬æŒæ¡äº†è¿™ä¹ˆå¤šç”¨æ³•ï¼Œé‚£ä¹ˆæœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼ŸåŒå‘å…³è”æ›´å¥½è¿˜æ˜¯å•å‘å…³è”æ›´å¥½ï¼Ÿæ ¹æ®æœ€è¿‘å‡ å¹´çš„åº”ç”¨ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€äº›æœ€ä½³å®è·µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚")]),s._v(" "),n("h3",{attrs:{id:"onetoone-çš„æœ€ä½³å®è·µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onetoone-çš„æœ€ä½³å®è·µ"}},[s._v("#")]),s._v(" @OneToOne çš„æœ€ä½³å®è·µ")]),s._v(" "),n("p",[n("strong",[s._v("ç¬¬ä¸€ï¼Œæˆ‘è¦è¯´ä¸€ç§ Java é¢å‘å¯¹è±¡çš„è®¾è®¡åŸåˆ™ï¼šå¼€é—­åŸåˆ™ã€‚")])]),s._v(" "),n("p",[s._v("å³å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚"),n("strong",[s._v("å¦‚æœæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨åŒå‘å…³è”ï¼Œä¸¤ä¸ªå®ä½“çš„å¯¹è±¡è€¦åˆå¤ªä¸¥é‡äº†")]),s._v("ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ï¼ŒUser å¯¹è±¡å¯èƒ½æ˜¯åŸå§‹å¯¹è±¡ï¼Œ"),n("strong",[s._v("å›´ç»•ç€ User å¯èƒ½ä¼šæ‰©å±•å‡ºå„ç§å…³è”å¯¹è±¡")]),s._v("ã€‚"),n("strong",[s._v("éš¾é“ User é‡Œé¢æ¯æ¬¡éƒ½è¦ä¿®æ”¹ï¼Œå»æ·»åŠ åŒå‘å…³è”å…³ç³»å—")]),s._v("ï¼Ÿè‚¯å®šä¸æ˜¯ï¼Œå¦åˆ™æ—¶é—´é•¿äº†ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»å°±æ˜¯ä¸€å›¢ä¹±éº»ã€‚")]),s._v(" "),n("p",[s._v("æ‰€ä»¥ï¼Œæˆ‘ä»¬"),n("strong",[s._v("å°½é‡ã€ç”šè‡³ä¸è¦ç”¨åŒå‘å…³è”ï¼Œå¦‚æœéè¦ç”¨å…³è”å…³ç³»çš„è¯ï¼Œåªç”¨å•å‘å…³è”å°±å¤Ÿäº†")]),s._v("ã€‚åŒå‘å…³è”æ­£æ˜¯ JPA çš„å¼ºå¤§ä¹‹å¤„ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯é—®é¢˜æœ€å¤šï¼Œæœ€è¢«äººè¯Ÿç—…ä¹‹å¤„ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ç”¨å®ƒçš„ä¼˜ç‚¹ï¼Œè€Œä¸æ˜¯å­¦ä¼šäº†å°±ä¸€å®šè¦ä½¿ç”¨ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("ç¬¬äºŒï¼Œæˆ‘æƒ³è¯´ CascadeType å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯æˆ‘ä¹Ÿå»ºè®®ä¿æŒé»˜è®¤ã€‚")])]),s._v(" "),n("p",[s._v("å³æ²¡æœ‰çº§è”æ›´æ–°åŠ¨ä½œï¼Œæ²¡æœ‰çº§è”åˆ é™¤åŠ¨ä½œã€‚è¿˜æœ‰ orphanRemoval ä¹Ÿè¦å°½é‡ä¿æŒé»˜è®¤ falseï¼Œä¸åšçº§è”åˆ é™¤ã€‚å› ä¸ºè¿™ä¸¤ä¸ªåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè§‰å¾—è¿™è¿èƒŒäº†é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™é‡Œé¢çš„â€œèŒè´£å•ä¸€åŸåˆ™â€ï¼Œé™¤éä½ éå¸¸éå¸¸ç†Ÿæ‚‰ï¼Œå¦åˆ™ä½ åœ¨ç”¨çš„æ—¶å€™ä¼šæ—¶å¸¸æ„Ÿåˆ°æƒŠè®¶â€”â€”æ•°æ®ä»€ä¹ˆæ—¶é—´è¢«æ›´æ–°äº†ï¼Ÿæ•°æ®è¢«è°åˆ é™¤äº†ï¼Ÿé‡åˆ°è¿™ç§é—®é¢˜æŸ¥èµ·æ¥éå¸¸éº»çƒ¦ï¼Œå› ä¸ºæ˜¯æ¡†æ¶å¤„ç†ï¼Œæœ‰çš„æ—¶å€™å¹¶éé¢„æœŸçš„æ•ˆæœã€‚")]),s._v(" "),n("p",[s._v("ä¸€æ—¦ç”Ÿäº§æ•°æ®è¢«è«åæ›´æ–°æˆ–è€…åˆ é™¤ï¼Œé‚£æ˜¯ä¸€ä»¶éå¸¸ç³Ÿç³•çš„äº‹æƒ…ã€‚å› ä¸ºè¿™äº›çº§è”æ“ä½œä¼šä½¿ä½ çš„æ–¹æ³•åå­—æ²¡åŠæ³•å‘½åï¼Œè€Œä¸”å®ƒä¸æ˜¯è·Ÿç€ä¸šåŠ¡é€»è¾‘å˜åŒ–çš„ï¼Œè€Œæ˜¯è·Ÿç€å®ä½“å˜åŒ–çš„ï¼Œè¿™å°±ä¼šä½¿æ–¹æ³•å’Œå¯¹è±¡çš„èŒè´£ä¸å•ä¸€ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("ç¬¬ä¸‰ï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ ï¼Œæ‰€æœ‰ç”¨åˆ°å…³è”å…³ç³»çš„åœ°æ–¹ï¼Œèƒ½ç”¨ Lazy çš„ç»å¯¹ä¸è¦ç”¨ EAGERï¼Œå¦åˆ™ä¼šæœ‰ SQL æ€§èƒ½é—®é¢˜ï¼Œä¼šå‡ºç°ä¸æ˜¯é¢„æœŸçš„ SQLã€‚")])]),s._v(" "),n("p",[s._v("ä»¥ä¸Šä¸‰ç‚¹æ˜¯æˆ‘æ€»ç»“çš„é¿å‘æŒ‡å—ï¼Œæœ‰ç»éªŒçš„åŒå­¦è¿™æ—¶å€™ä¼šæœ‰ä¸ªç–‘é—®ï¼šå¤–é”®çº¦æŸä¸æ˜¯ä¸æ¨èä½¿ç”¨çš„å—ï¼Ÿå¦‚æœæˆ‘çš„å¤–é”®å­—æ®µåä¸æ˜¯çº¦å®šçš„æ€ä¹ˆåŠï¼Ÿåˆ«ç€æ€¥ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹ @JoinColumn æ³¨è§£å’Œ @JoinColumns æ³¨è§£ã€‚")]),s._v(" "),n("h3",{attrs:{id:"joincloumns-joincolumn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#joincloumns-joincolumn"}},[s._v("#")]),s._v(" @JoinCloumns & JoinColumn")]),s._v(" "),n("p",[s._v("è¿™ä¸¤ä¸ªæ³¨è§£æ˜¯é›†åˆå…³ç³»ï¼Œä»–ä»¬å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œ@JoinColumn è¡¨ç¤ºå•å­—æ®µï¼Œ@JoinCloumns è¡¨ç¤ºå¤šä¸ª @JoinColumnï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€çœ‹ä¸€ä¸‹ã€‚")]),s._v(" "),n("p",[s._v("æˆ‘ä»¬è¿˜æ˜¯å…ˆç›´æ¥çœ‹ä¸€ä¸‹ @JoinColumn æºç ï¼Œäº†è§£ä¸‹è¿™ä¸€æ³¨è§£éƒ½æœ‰å“ªäº›é…ç½®é¡¹ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@interface")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JoinColumn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å…³é”®çš„å­—æ®µå,é»˜è®¤æ³¨è§£ä¸Šçš„å­—æ®µåï¼Œåœ¨@OneToOneä»£è¡¨æœ¬è¡¨çš„å¤–é”®å­—æ®µåå­—ï¼›")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¸nameç›¸åå…³è”å¯¹è±¡çš„å­—æ®µï¼Œé»˜è®¤ä¸»é”®å­—æ®µ")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("referencedColumnName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¤–é”®å­—æ®µæ˜¯å¦å”¯ä¸€")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("unique")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¤–é”®å­—æ®µæ˜¯å¦å…è®¸ä¸ºç©º")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("nullable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ˜¯å¦è·Ÿéšä¸€èµ·æ–°å¢")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ˜¯å¦è·Ÿéšä¸€èµ·æ›´æ–°")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("updatable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//JPA2.1æ–°å¢ï¼Œå¤–é”®ç­–ç•¥")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ForeignKey")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("foreignKey")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ForeignKey")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PROVIDER_DEFAULT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("å…¶æ¬¡ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ @ForeignKey(PROVIDER_DEFAULT) é‡Œé¢æšä¸¾å€¼æœ‰å‡ ä¸ªã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConstraintMode")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//åˆ›å»ºå¤–é”®çº¦æŸ")]),s._v("\n   CONSTRAINT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ä¸åˆ›å»ºå¤–é”®çº¦æŸ")]),s._v("\n   NO_CONSTRAINT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//é‡‡ç”¨é»˜è®¤è¡Œä¸º")]),s._v("\n   PROVIDER_DEFAULT\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("ç„¶åï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ³¨è§£çš„è¯­æ³•ï¼Œå°±å¯ä»¥è§£ç­”æˆ‘ä»¬ä¸Šé¢çš„ä¸¤ä¸ªé—®é¢˜ã€‚ä¿®æ”¹ä¸€ä¸‹ UserInfoï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserInfo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AUTO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" ages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" telephone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cascade "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PERSIST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("orphanRemoval "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("fetch "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FetchType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("LAZY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("foreignKey "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ForeignKey")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConstraintMode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NO_CONSTRAINT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_user_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),s._v(" user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...å…¶ä»–ä¸å˜")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­æŒ‡å®šäº†å­—æ®µçš„åå­—ï¼šmy_user_idï¼Œå¹¶ä¸”æŒ‡å®š NO_CONSTRAINT ä¸ç”Ÿæˆå¤–é”®ã€‚è€Œæµ‹è¯•ç”¨ä¾‹ä¸å˜ï¼Œæˆ‘ä»¬çœ‹ä¸‹è¿è¡Œç»“æœã€‚")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" address "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sex "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ages "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("integer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" telephone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" my_user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("è¿™æ—¶æˆ‘ä»¬çœ‹åˆ° user_info è¡¨é‡Œé¢æ–°å¢äº†ä¸€ä¸ªå­—æ®µ my_user_idï¼Œinsert çš„æ—¶å€™ä¹Ÿèƒ½æ­£ç¡® inser my_user_id çš„å€¼ç­‰äº user.idã€‚")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" user_info "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" telephone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" my_user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("è€Œ @JoinColumns æ˜¯ JoinColumns çš„å¤æ•°å½¢å¼ï¼Œå°±æ˜¯é€šè¿‡ä¸¤ä¸ªå­—æ®µè¿›è¡Œçš„å¤–é”®å…³è”ï¼Œè¿™ä¸ªä¸å¸¸ç”¨ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ª demo äº†è§£ä¸€ä¸‹å°±å¥½ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CompanyOffice")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ManyToOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fetch "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FetchType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("LAZY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ADDR_ID"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" referencedColumnName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ID"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ADDR_ZIP"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" referencedColumnName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ZIP"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Address")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("ä¸Šé¢çš„å®ä¾‹ä¸­ï¼ŒCompanyOffice é€šè¿‡ ADDR_ID å’Œ ADDR_ZIP ä¸¤ä¸ªå­—æ®µå¯¹åº”ä¸€æ¡ address ä¿¡æ¯ï¼Œè§£é‡Šäº†ä¸€ä¸‹@JoinColumnsçš„ç”¨æ³•ã€‚")]),s._v(" "),n("p",[s._v("å¦‚æœä½ äº†è§£äº† @OneToOne çš„è¯¦ç»†ç”¨æ³•ï¼Œåé¢è¦è®²çš„å‡ ä¸ªæ³¨è§£å°±å¾ˆå¥½ç†è§£äº†ï¼Œå› ä¸ºä»–ä»¬æœ‰ç‚¹ç±»ä¼¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ @ManyToOne å’Œ @OneToMany çš„ç”¨æ³•ã€‚")]),s._v(" "),n("h2",{attrs:{id:"ä¸€å¯¹å¤š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€å¯¹å¤š"}},[s._v("#")]),s._v(" ä¸€å¯¹å¤š")]),s._v(" "),n("h3",{attrs:{id:"jpa-åè®®-ğŸ”¥-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jpa-åè®®-ğŸ”¥-2"}},[s._v("#")]),s._v(" JPA åè®® ğŸ”¥")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("ç»´æŠ¤å…³è”å…³ç³»çš„æ˜¯æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹ï¼Œè€Œå¦ä¸€æ–¹å¿…é¡»é…ç½® "),n("code",[s._v("mappedBy")])])])]),s._v(" "),n("h3",{attrs:{id:"æ¡ˆä¾‹ä»‹ç»-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹ä»‹ç»-2"}},[s._v("#")]),s._v(" æ¡ˆä¾‹ä»‹ç»")]),s._v(" "),n("p",[s._v("å®¢æˆ·å’Œè”ç³»äººçš„æ¡ˆä¾‹ï¼ˆæ³¨æ„ï¼Œå®¢æˆ·å’Œè”ç³»äººæ˜¯å±äºåŒä¸€å…¬å¸çš„ï¼‰")]),s._v(" "),n("ul",[n("li",[s._v("å®¢æˆ·ï¼šä¹°äº†å•†å“çš„ä¸€å®¶å…¬å¸")]),s._v(" "),n("li",[s._v("è”ç³»äººï¼šä¹°äº†å•†å“çš„è¿™å®¶å…¬å¸çš„å‘˜å·¥ï¼ˆå¯æœ‰å¤šä¸ªï¼‰")])]),s._v(" "),n("p",[s._v("ä¸€å¯¹å¤šå…³ç³»ï¼Œä¸€ä¸ªå®¢æˆ·å¯ä»¥å…·æœ‰å¤šä¸ªè”ç³»äººï¼Œä¸€ä¸ªè”ç³»äººä»å±äºä¸€å®¶å…¬å¸")]),s._v(" "),n("h3",{attrs:{id:"åˆ†ææ­¥éª¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†ææ­¥éª¤"}},[s._v("#")]),s._v(" åˆ†ææ­¥éª¤")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("æ˜ç¡®è¡¨å…³ç³»ï¼šä¸€å¯¹å¤šå…³ç³»")])]),s._v(" "),n("li",[n("p",[s._v("ç¡®å®šè¡¨å…³ç³»ï¼ˆå¤–é”®ï¼‰")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("ä¸»è¡¨")]),s._v("ï¼šå®¢æˆ·è¡¨")]),s._v(" "),n("li",[n("strong",[s._v("ä»è¡¨")]),s._v("ï¼šè”ç³»äººè¡¨ï¼Œåœ¨ä»è¡¨æ·»åŠ "),n("strong",[s._v("å¤–é”®")])])])]),s._v(" "),n("li",[n("p",[s._v("ç¼–å†™å®ä½“ç±»ï¼Œå†å®ä½“ç±»ä¸­æè¿°è¡¨å…³ç³»ï¼ˆ"),n("strong",[s._v("ç»„åˆ")]),s._v("ï¼‰")]),s._v(" "),n("ul",[n("li",[s._v("å®¢æˆ·ï¼šå†å®¢æˆ·çš„å®ä½“ç±»ä¸­åŒ…å«ä¸€ä¸ªè”ç³»äººçš„é›†åˆ")]),s._v(" "),n("li",[s._v("è”ç³»äººï¼šåœ¨è”ç³»äººçš„å®ä½“ç±»ä¸­åŒ…å«ä¸€ä¸ªå®¢æˆ·çš„å¯¹è±¡")])])]),s._v(" "),n("li",[n("p",[s._v("é…ç½®æ˜ å°„å…³ç³»")]),s._v(" "),n("ul",[n("li",[s._v("ä½¿ç”¨ "),n("strong",[s._v("JPA æ³¨è§£é…ç½®ä¸€å¯¹å¤šæ˜ å°„å…³ç³»")])])])])]),s._v(" "),n("h3",{attrs:{id:"onetomany-manytoone"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onetomany-manytoone"}},[s._v("#")]),s._v(" @OneToMany & @ManyToOne")]),s._v(" "),n("p",[s._v("@ManyToOne ä»£è¡¨å¤šå¯¹ä¸€çš„å…³è”å…³ç³»ï¼Œè€Œ @OneToMany ä»£è¡¨ä¸€å¯¹å¤šï¼Œä¸€èˆ¬ä¸¤ä¸ªæˆå¯¹ä½¿ç”¨è¡¨ç¤ºåŒå‘å…³è”å…³ç³»ã€‚è€Œ JPA åè®®ä¸­ä¹Ÿæ˜¯æ˜ç¡®è§„å®šï¼š"),n("strong",[s._v("ç»´æŠ¤å…³è”å…³ç³»çš„æ˜¯æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹ï¼ˆä»è¡¨ï¼‰ï¼Œè€Œå¦ä¸€æ–¹ï¼ˆä¸»è¡¨ï¼‰å¿…é¡»é…ç½® mappedBy")]),s._v("ã€‚ä½“ä¼šä¸åˆ°çœ‹ä¸‹é¢çš„å®æˆ˜åŠé—®é¢˜åˆ†æå³å¯æ˜äº†ã€‚")]),s._v(" "),n("p",[s._v("çœ‹ä¸‹é¢çš„æºç ã€‚")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@interface")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ManyToOne")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("targetEntity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cascade")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FetchType")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" EAGER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("optional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@interface")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OneToMany")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("targetEntity")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n \t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//cascade çº§è”æ“ä½œç­–ç•¥ï¼š(CascadeType.PERSISTã€CascadeType.REMOVEã€CascadeType.REFRESHã€CascadeType.MERGEã€CascadeType.ALL) å¦‚æœä¸å¡«ï¼Œé»˜è®¤å…³ç³»è¡¨ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cascade")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ•°æ®è·å–æ–¹å¼EAGER(ç«‹å³åŠ è½½)/LAZY(å»¶è¿ŸåŠ è½½)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FetchType")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" LAZY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å…³ç³»è¢«è°ç»´æŠ¤ï¼Œå•é¡¹çš„ã€‚æ³¨æ„ï¼šåªæœ‰å…³ç³»ç»´æŠ¤æ–¹æ‰èƒ½æ“ä½œä¸¤è€…çš„å…³ç³»ã€‚")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mappedBy")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//æ˜¯å¦çº§è”åˆ é™¤ã€‚å’ŒCascadeType.REMOVEçš„æ•ˆæœä¸€æ ·ã€‚ä¸¤ç§é…ç½®äº†ä¸€ä¸ªå°±ä¼šè‡ªåŠ¨çº§è”åˆ é™¤")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("orphanRemoval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„å­—æ®µå’Œ @OneToOne é‡Œé¢çš„åŸºæœ¬ä¸€æ ·ï¼Œç”¨æ³•æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š")]),s._v(" "),n("ol",[n("li",[s._v("@ManyToOne ä¸€å®šæ˜¯ç»´æŠ¤å¤–é”®å…³ç³»çš„ä¸€æ–¹ï¼Œæ‰€ä»¥æ²¡æœ‰ mappedBy å­—æ®µï¼›")]),s._v(" "),n("li",[s._v("@ManyToOne åˆ é™¤çš„æ—¶å€™ä¸€å®šä¸èƒ½æŠŠ One çš„ä¸€æ–¹åˆ é™¤äº†ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ orphanRemoval çš„é€‰é¡¹ï¼›")]),s._v(" "),n("li",[s._v("@ManyToOne çš„ Lazy æ•ˆæœå’Œ @OneToOne çš„ä¸€æ ·ï¼Œæ‰€ä»¥å’Œä¸Šé¢çš„ç”¨æ³•åŸºæœ¬ä¸€è‡´ï¼›")]),s._v(" "),n("li",[s._v("@OneToMany çš„ Lazy æ˜¯æœ‰æ•ˆæœçš„ã€‚")])]),s._v(" "),n("h3",{attrs:{id:"å®æˆ˜ï¼šä¿å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜ï¼šä¿å­˜"}},[s._v("#")]),s._v(" å®æˆ˜ï¼šä¿å­˜")]),s._v(" "),n("p",[s._v("å®ä½“ç±»å¦‚ä¸‹ï¼Œç›®å‰é…ç½®äº†"),n("strong",[s._v("åŒå‘å…³è”")]),s._v("ï¼ˆ@OneToManyã€@ManyToOneï¼‰ï¼Œ"),n("strong",[s._v("ä¸”ä¸»ä»è¡¨éƒ½å¯ä»¥ç»´æŠ¤å¤–é”®ï¼ˆä¸æ¨èï¼‰")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Getter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Setter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·ç¼–å·ï¼ˆä¸»é”®ï¼‰*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·åç§°ï¼ˆå…¬å¸åç§°ï¼‰ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·ä¿¡æ¯æ¥æº */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·æ‰€å±è¡Œä¸š */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" industry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·çº§åˆ« */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" level"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·è”ç³»åœ°å€ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·è”ç³»ç”µè¯ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸æ¨èçš„é…ç½®ï¼Œä¸»è¡¨æ²¡æœ‰æ”¾å¼ƒç»´æŠ¤å¤–é”®")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToMany")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"custId"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" linkManSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Getter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Setter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººç¼–å·(ä¸»é”®) */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººå§“å */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººæ€§åˆ« */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" gender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººåŠå…¬ç”µè¯ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººæ‰‹æœº */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" mobile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººé‚®ç®± */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººèŒä½ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* è”ç³»äººå¤‡æ³¨ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" remark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ManyToOne")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cust_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("p",[s._v("æµ‹è¯•")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DataJpaTestã€MybatisTest ä¼šé»˜è®¤ä½¿ç”¨å…¶æµ‹è¯•æ•°æ®æºæ›¿ä»£ï¼Œè‹¥è¦ä½¿ç”¨è‡ªå·±é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹æ³¨è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AutoConfigureTestDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("replace "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoConfigureTestDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("One2ManyTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomerRepository")]),s._v(" customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkManRepository")]),s._v(" linkManRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * ä¸»è¡¨æ”¾å¼ƒç»´æŠ¤å¤–é”®åè¯¥æ–¹æ³•æ— æ³•æ·»åŠ å¤–é”®å€¼\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testSave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è…¾è®¯"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("linkManSet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),s._v(" linkMan "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å°é©¬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒå‘å…³è”ï¼Œä¸»è¡¨ç»´æŠ¤å¤–é”®")]),s._v("\n        customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLinkManSet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("linkMan"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        linkManRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("linkMan"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¿å­˜å¤–é”®æ—¶æ²¡æœ‰ç›´æ¥ insert è€Œæ˜¯2æ¡ insert åæ‰§è¡Œäº† updateï¼")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * æ¨èä½¿ç”¨çš„æ–¹å¼\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testSave2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è…¾è®¯"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),s._v(" linkMan "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å°é©¬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("customer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒå‘å…³è”ï¼Œä»è¡¨ç»´æŠ¤å¤–é”®")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        linkManRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("linkMan"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¿å­˜å¤–é”®æ—¶åªç”¨äº†2æ¡ updateï¼")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("h3",{attrs:{id:"é—®é¢˜åˆ†æ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é—®é¢˜åˆ†æ"}},[s._v("#")]),s._v(" é—®é¢˜åˆ†æ")]),s._v(" "),n("p",[s._v("testSave è‡ªåŠ¨ç”Ÿæˆçš„sqlï¼š")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\taddress "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tindustry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tNAME "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tphone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nsource "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" id "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNODB")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\temail "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tgender "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tmobile "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tNAME "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tphone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tposition "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tremark "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ncust_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" id "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNODB")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¤–é”®çº¦æŸ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKd378jah5xd7bsqjolfsop35i "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¿å­˜")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" industry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" gender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mobile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" cust_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("? "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("å¯è§ï¼Œ"),n("strong",[s._v("ç›®å‰ç”Ÿæˆçš„å»ºè¡¨è¯­å¥ç«Ÿç„¶æœ‰3æ¡")]),s._v("ï¼Œæœ¬åº”è¯¥åªæœ‰2æ¡ï¼å¹¶ä¸”ä¿å­˜å¤–é”®æ—¶"),n("strong",[s._v("æ²¡æœ‰ç›´æ¥ insert è€Œæ˜¯2æ¡ insert åæ‰§è¡Œäº† update")]),s._v("ï¼")]),s._v(" "),n("p",[s._v("å› æ­¤è¯¥æ–¹å¼"),n("strong",[s._v("ä¸å¯å–")]),s._v("ï¼ˆå®é™…ç”Ÿäº§ä¸­å»ºè¡¨å¯ä»¥ä¸ç”¨ç®¡ï¼Œä½†æ˜¯å¯¹äºä¿å­˜æ“ä½œå°±ä¸åº”è¯¥ç”¨è¿™ä¹ˆå¤šæ¡è¯­å¥å®Œæˆï¼ï¼‰")]),s._v(" "),n("p",[s._v("testSave2 è‡ªåŠ¨ç”Ÿæˆçš„sqlï¼š")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\taddress "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tindustry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEVEL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tNAME "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tphone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nsource "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" id "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNODB")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\tid "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\temail "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tgender "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tmobile "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tNAME "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tphone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tposition "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tremark "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\ncust_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BIGINT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" id "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENGINE")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNODB")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- å¤–é”®çº¦æŸ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKd378jah5xd7bsqjolfsop35i "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¿å­˜")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" industry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" gender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mobile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("p",[s._v("å¯è§ï¼Œ"),n("strong",[s._v("ç›®å‰ç”Ÿæˆçš„å»ºè¡¨è¯­å¥ç«Ÿç„¶æœ‰3æ¡")]),s._v("ï¼Œæœ¬åº”è¯¥åªæœ‰2æ¡ï¼ä½†æ˜¯ä¿å­˜å¤–é”®æ—¶"),n("strong",[s._v("åªç”¨äº†2æ¡ update")]),s._v("ï¼æ‰€ä»¥æ¨èï¼")]),s._v(" "),n("h3",{attrs:{id:"æ”¹è¿›ï¼šä¸»è¡¨æ”¾å¼ƒå¤–é”®ç»´æŠ¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ”¹è¿›ï¼šä¸»è¡¨æ”¾å¼ƒå¤–é”®ç»´æŠ¤"}},[s._v("#")]),s._v(" æ”¹è¿›ï¼šä¸»è¡¨æ”¾å¼ƒå¤–é”®ç»´æŠ¤")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·ç¼–å·ï¼ˆä¸»é”®ï¼‰*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·åç§°ï¼ˆå…¬å¸åç§°ï¼‰ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·ä¿¡æ¯æ¥æº */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·æ‰€å±è¡Œä¸š */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" industry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·çº§åˆ« */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" level"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·è”ç³»åœ°å€ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·è”ç³»ç”µè¯ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸»è¡¨åº”è¯¥æ”¾å¼ƒå¯¹å¤–é”®çš„ç»´æŠ¤")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// @OneToMany")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// @JoinColumn(name = "custId")')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// private Set<LinkMan> linkManSet;")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToMany")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mappedBy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"customer"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" linkManSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("p",[s._v("å…¶ä½™ä¸å˜ï¼Œä½†æ˜¯æ³¨æ„æµ‹è¯•æ–¹æ³•åªæœ‰testSave2å¯ä»¥æ·»åŠ å¤–é”®å€¼äº†ï¼å› ä¸ºåªæœ‰ä»è¡¨æ‰èƒ½ç»´æŠ¤å¤–é”®äº†")]),s._v(" "),n("h3",{attrs:{id:"å®æˆ˜ï¼šçº§è”-â˜ ï¸"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜ï¼šçº§è”-â˜ ï¸"}},[s._v("#")]),s._v(" å®æˆ˜ï¼šçº§è” â˜ ï¸")]),s._v(" "),n("p",[n("strong",[s._v("åˆ é™¤ä»è¡¨")]),s._v("æ•°æ®ï¼šå¯ä»¥éšæ—¶ä»»æ„åˆ é™¤")]),s._v(" "),n("p",[n("strong",[s._v("åˆ é™¤ä¸»è¡¨")]),s._v("æ•°æ®ï¼š")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("æ²¡æœ‰ä»è¡¨æ•°æ®å¼•ç”¨ï¼šéšä¾¿åˆ ")])]),s._v(" "),n("li",[n("p",[s._v("æœ‰ä»è¡¨æ•°æ®ï¼š")]),s._v(" "),n("ul",[n("li",[s._v("åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šæŠŠå¤–é”®å­—æ®µç½®ä¸ºnullï¼Œç„¶ååˆ é™¤ä¸»è¡¨æ•°æ®ã€‚å¦‚æœåœ¨æ•°æ®åº“çš„è¡¨ç»“æ„ä¸Šï¼Œå¤–é”®å­—æ®µæœ‰éç©ºçº¦æŸï¼Œé»˜è®¤æƒ…å†µå°±ä¼šæŠ¥é”™äº†")]),s._v(" "),n("li",[s._v("å¦‚æœé…ç½®äº†æ”¾å¼ƒç»´æŠ¤å…³è”å…³ç³»çš„æƒåˆ©ï¼Œåˆ™ä¸èƒ½åˆ é™¤ï¼ˆä¸å¤–é”®å­—æ®µæ˜¯å¦å…è®¸ä¸ºnullï¼Œæ²¡æœ‰å…³ç³»ï¼‰å› ä¸ºåœ¨åˆ é™¤æ—¶ï¼Œå®ƒæ ¹æœ¬ä¸ä¼šå»æ›´æ–°ä»è¡¨çš„å¤–é”®å­—æ®µäº†")]),s._v(" "),n("li",[s._v("å¦‚æœè¿˜æƒ³åˆ é™¤ï¼Œä½¿ç”¨çº§è”åˆ é™¤å¼•ç”¨ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œçº§è”åˆ é™¤è¯·æ…ç”¨ï¼(åœ¨ä¸€å¯¹å¤šçš„æƒ…å†µä¸‹)")])])])]),s._v(" "),n("p",[n("strong",[s._v("çº§è”")]),s._v("ï¼šæ“ä½œä¸€ä¸ªå¯¹è±¡çš„åŒæ—¶æ“ä½œä»–çš„å…³è”å¯¹è±¡")]),s._v(" "),n("ul",[n("li",[s._v("çº§è”æ“ä½œï¼š 1.éœ€è¦"),n("strong",[s._v("åŒºåˆ†æ“ä½œä¸»ä½“")]),s._v(" 2.éœ€è¦åœ¨æ“ä½œä¸»ä½“çš„å®ä½“ç±»ä¸Šï¼ˆä¸»è¡¨æˆ–ç»´æŠ¤è¡¨ï¼‰ï¼Œæ·»åŠ çº§è”å±æ€§"),n("code",[s._v("cascade")]),s._v("ï¼ˆéœ€è¦æ·»åŠ åˆ°å¤šè¡¨æ˜ å°„å…³ç³»çš„æ³¨è§£ä¸Šï¼‰")]),s._v(" "),n("li",[s._v("çº§è”æ·»åŠ ï¼Œæ¡ˆä¾‹ï¼šå½“æˆ‘ä¿å­˜ä¸€ä¸ªå®¢æˆ·çš„åŒæ—¶ä¿å­˜è”ç³»äººï¼ˆåœ¨ä»£ç ä¸­åªéœ€ä¿å­˜å®¢æˆ·ï¼ï¼‰")]),s._v(" "),n("li",[s._v("çº§è”åˆ é™¤ï¼Œæ¡ˆä¾‹ï¼šå½“æˆ‘åˆ é™¤ä¸€ä¸ªå®¢æˆ·çš„åŒæ—¶åˆ é™¤æ­¤å®¢æˆ·çš„æ‰€æœ‰è”ç³»äººï¼Œæœ‰ä¸­é—´è¡¨ä¼šå…ˆåˆ é™¤ä¸­é—´è¡¨ï¼ˆåœ¨ä»£ç ä¸­åªéœ€åˆ é™¤å®¢æˆ·ï¼ï¼‰")]),s._v(" "),n("li",[s._v("çº§è”æ›´æ–°ï¼Œç•¥")])]),s._v(" "),n("p",[n("strong",[s._v("é»˜è®¤æ˜¯ä¸è¿›è¡Œçº§è”æ“ä½œ")]),s._v("ï¼Œéœ€è¦åœ¨**æ“ä½œä¸»è¡¨é…ç½®ï¼ˆä¸€èˆ¬é…ç½®åœ¨ä¸»è¡¨ï¼Œè™½ç„¶ä»è¡¨ä¹Ÿå¯ä»¥é…ç½®ï¼‰**å¦‚ä¸‹æ³¨è§£ï¼š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Getter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Setter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·ç¼–å·ï¼ˆä¸»é”®ï¼‰*/")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Id")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·åç§°ï¼ˆå…¬å¸åç§°ï¼‰ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·ä¿¡æ¯æ¥æº */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·æ‰€å±è¡Œä¸š */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" industry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·çº§åˆ« */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" level"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·è”ç³»åœ°å€ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* å®¢æˆ·è”ç³»ç”µè¯ */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯ä»¥å•ç‹¬é…ç½®çº§è”ä¿å­˜ã€åˆ é™¤ï¼Œè¿˜å¯ä»¥é…ç½®æ›´æ–°ç­‰æ“ä½œï¼Œä¹Ÿå¯ä»¥ç›´æ¥é…ç½®å…¨éƒ¨")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@OneToMany")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mappedBy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"customer"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cascade "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ALL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" linkManSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("p",[s._v("æµ‹è¯•")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DataJpaTestã€MybatisTest ä¼šé»˜è®¤ä½¿ç”¨å…¶æµ‹è¯•æ•°æ®æºæ›¿ä»£ï¼Œè‹¥è¦ä½¿ç”¨è‡ªå·±é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹æ³¨è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AutoConfigureTestDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("replace "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoConfigureTestDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("One2ManyTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomerRepository")]),s._v(" customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkManRepository")]),s._v(" linkManRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * çº§è”æ·»åŠ ï¼Œä¿å­˜ä¸€ä¸ªå®¢æˆ·çš„åŒæ—¶ä¿å­˜è”ç³»äºº\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testCascadeSave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è…¾è®¯"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("linkManSet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),s._v(" linkMan "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"å°é©¬"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("customer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŒå‘å…³è”ï¼Œä»è¡¨ç»´æŠ¤å¤–é”®ï¼ˆè¿™ä¸ªæ˜¯ç»´æŠ¤å¤–é”®çš„ï¼Œå’Œçº§è”æ²¡æœ‰å…³ç³»ï¼ï¼ï¼ï¼‰")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLinkManSet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("linkMan"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * çº§è”åˆ é™¤ï¼Œåˆ é™¤ä¸€ä¸ªå®¢æˆ·çš„åŒæ—¶åˆ é™¤æ­¤å®¢æˆ·çš„æ‰€æœ‰è”ç³»äººã€‚æ‰§è¡Œåˆ é™¤å‰è®°å¾—æŠŠ ddl-auto æ”¹ä¸º update\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testCascadeRemove")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("deleteById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("p",[s._v("çº§è”ä¿å­˜çš„sql")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("Hibernate: "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("address"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" industry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" source"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nHibernate: "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" email"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" gender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mobile"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" phone"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" position"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" remark"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("çº§è”åˆ é™¤çš„sql")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("Hibernate: "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" id1_1_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("address "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" address2_1_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("industry "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" industry3_1_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("level")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" level4_1_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" name5_1_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("phone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" phone6_1_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("source "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" source7_1_0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customer customer0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\nHibernate: "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cust_id9_2_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" id1_2_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" id1_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cust_id9_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("email "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" email2_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gender "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" gender3_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mobile "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" mobile4_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" name5_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("phone "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" phone6_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("position "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" position7_2_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("remark "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" remark8_2_1_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" link_man linkmanset0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\nHibernate: "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" link_man "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\nHibernate: "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"æœ€ä½³å®è·µ-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ€ä½³å®è·µ-ğŸ”¥"}},[s._v("#")]),s._v(" æœ€ä½³å®è·µ ğŸ”¥")]),s._v(" "),n("p",[s._v("é…ç½®å¹¶ä½¿ç”¨å¤šçš„ä¸€æ–¹ç»´æŠ¤å…³è”å…³ç³»ï¼ˆå¤–é”®ï¼‰ï¼Œä¿å­˜æ—¶ç›´æ¥å¯¹å¤–é”®èµ‹å€¼ï¼›é…ç½®å¹¶ä½¿ç”¨ä¸€çš„ä¸€æ–¹ç»´æŠ¤å…³è”å…³ç³»ï¼Œè¿˜ä¼šæ‰§è¡Œ1æ¡updateè¯­å¥ï¼ˆå¤šä½™ï¼ï¼‰ã€‚æ‰€ä»¥ JPA åè®®æœ‰è§„å®šï¼š")]),s._v(" "),n("ul",[n("li",[s._v("è‹¥é…ç½®"),n("strong",[s._v("å•å‘")]),s._v("å…³è”ï¼Œå…³è”å…³ç³»çš„ç»´æŠ¤ç›´æ¥**é…ç½®åœ¨æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹ï¼ˆä»è¡¨ï¼‰**å³å¯ã€‚æ‹‰å‹¾è¯¾ç¨‹æ¨èä½¿ç”¨å•å‘å…³è”ï¼Œä¸æ¨èåŒå‘å…³è”ï¼Œä¸»è¡¨æŸ¥è¯¢æ—¶ä½¿ç”¨ sqlæŸ¥è¯¢ã€‚")]),s._v(" "),n("li",[s._v("è‹¥é…ç½®"),n("strong",[s._v("åŒå‘")]),s._v("å…³è”ï¼Œ"),n("strong",[s._v("ç»´æŠ¤å…³è”å…³ç³»çš„æ˜¯æ‹¥æœ‰å¤–é”®çš„ä¸€æ–¹ï¼ˆä»è¡¨ï¼‰")]),s._v("ï¼Œè€Œ"),n("strong",[s._v("å¦ä¸€æ–¹ï¼ˆä¸»è¡¨ï¼‰å¿…é¡»é…ç½® mappedBy æ”¾å¼ƒå¤–é”®ç»´æŠ¤")]),s._v("ï¼›")])]),s._v(" "),n("p",[n("strong",[s._v("å°½é‡é¿å…åŒå‘å…³è”ï¼Œå³åªç”¨ä¸€ä¸ªæ³¨è§£@ManyToOne")]),s._v("ã€‚"),n("a",{attrs:{href:"http://www.wangzhenhua.rocks/zh-hans/java/jpa-one-to-many-many-to-one-best-practice",target:"_blank",rel:"noopener noreferrer"}},[s._v("JPAä¸­çš„OneToManyå’ŒManyToOneçš„æœ€ä½³å®è·µ"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("ä¸€åˆ‡çº§è”æ›´æ–°å’Œ orphanRemoval éƒ½ä¿æŒé»˜è®¤è§„åˆ™ï¼Œå¹¶ä¸” fetch é‡‡ç”¨ lazy å»¶è¿ŸåŠ è½½ï¼ˆä¹Ÿæ˜¯é»˜è®¤è§„åˆ™ï¼‰ã€‚")]),s._v(" "),n("p",[s._v("æ³¨æ„ï¼š"),n("strong",[s._v("æ”¾å¼ƒå¤–é”®ç»´æŠ¤å’Œçº§è”æ“ä½œæ²¡æœ‰åŠç‚¹å…³ç³»")])]),s._v(" "),n("h2",{attrs:{id:"å¤šå¯¹å¤š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¤šå¯¹å¤š"}},[s._v("#")]),s._v(" å¤šå¯¹å¤š")]),s._v(" "),n("h3",{attrs:{id:"æ¡ˆä¾‹ä»‹ç»-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹ä»‹ç»-3"}},[s._v("#")]),s._v(" æ¡ˆä¾‹ä»‹ç»")]),s._v(" "),n("p",[s._v("ç”¨æˆ·å’Œè§’è‰²ï¼ˆå¤šå¯¹å¤šå…³ç³»ï¼‰ï¼Œä¸ç”¨å¤šé€¼é€¼äº†ï¼Œå°±æ˜¯ RBAC æ¨¡å‹")]),s._v(" "),n("h3",{attrs:{id:"åˆ†ææ­¥éª¤-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†ææ­¥éª¤-2"}},[s._v("#")]),s._v(" åˆ†ææ­¥éª¤")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("æ˜ç¡®è¡¨å…³ç³»ï¼šä¸€å¯¹å¤šå…³ç³»")])]),s._v(" "),n("li",[n("p",[s._v("ç¡®å®šè¡¨å…³ç³»ï¼ˆä¸­é—´è¡¨ï¼‰")])]),s._v(" "),n("li",[n("p",[s._v("ç¼–å†™å®ä½“ç±»ï¼Œå†å®ä½“ç±»ä¸­æè¿°è¡¨å…³ç³»ï¼ˆ"),n("strong",[s._v("ç»„åˆ")]),s._v("ï¼‰")]),s._v(" "),n("ul",[n("li",[s._v("ç”¨æˆ·ï¼šåŒ…å«è§’è‰²çš„é›†åˆ")]),s._v(" "),n("li",[s._v("è§’è‰²ï¼šåŒ…å«ç”¨æˆ·çš„é›†åˆ")])])]),s._v(" "),n("li",[n("p",[s._v("é…ç½®æ˜ å°„å…³ç³»")]),s._v(" "),n("ul",[n("li",[s._v("ä½¿ç”¨ "),n("strong",[s._v("JPA æ³¨è§£é…ç½®ä¸€å¯¹å¤šæ˜ å°„å…³ç³»")])])])])]),s._v(" "),n("h3",{attrs:{id:"manytomany-å®æˆ˜-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#manytomany-å®æˆ˜-ğŸ”¥"}},[s._v("#")]),s._v(" @ManyToMany å®æˆ˜ ğŸ”¥")]),s._v(" "),n("p",[s._v("@ManyToMany ä»£è¡¨å¤šå¯¹å¤šçš„å…³è”å…³ç³»ï¼Œè¿™ç§å…³è”å…³ç³»"),n("strong",[s._v("ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥ç»´æŠ¤å…³è”å…³ç³»")])]),s._v(" "),n("p",[s._v("å®é™…å¼€å‘è€…å¯¹ @ManyToMany "),n("strong",[s._v("ç”¨å¾—æ¯”è¾ƒå°‘")]),s._v("ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼š"),n("strong",[s._v("ç”¨æˆå¯¹çš„ @ManyToOne å’Œ @OneToMany ä»£æ›¿")]),s._v("ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¸­é—´è¡¨å¯èƒ½è¿˜æœ‰ä¸€äº›çº¦å®šçš„å…¬å…±å­—æ®µï¼Œå¦‚ IDã€update_timeã€create_timeç­‰å…¶ä»–å­—æ®µï¼Œå½“ç„¶"),n("strong",[s._v("è¦æ˜¯æ²¡æœ‰è¿™äº›å­—æ®µï¼Œå¯ä»¥ä½¿ç”¨")]),s._v(" @ManyToMany")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Getter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Setter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ManyToMany")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinTable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sys_user_role"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            joinColumns "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            inverseJoinColumns "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Getter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Setter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" roleId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" roleName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ”¾å¼ƒä¸­é—´è¡¨ç»´æŠ¤æƒ")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ManyToMany")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mappedBy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"roles"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" users"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUserRepository")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JpaRepository")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JpaSpecificationExecutor")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRoleRepository")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JpaRepository")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JpaSpecificationExecutor")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("æµ‹è¯•")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DataJpaTestã€MybatisTest ä¼šé»˜è®¤ä½¿ç”¨å…¶æµ‹è¯•æ•°æ®æºæ›¿ä»£ï¼Œè‹¥è¦ä½¿ç”¨è‡ªå·±é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹æ³¨è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AutoConfigureTestDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("replace "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoConfigureTestDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Many2ManyTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUserRepository")]),s._v(" sysUserRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRoleRepository")]),s._v(" sysRoleRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * ä¿å­˜ä¸€ä¸ªç”¨æˆ·ã€ä¸€ä¸ªè§’è‰²\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testSave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" sysUser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("userName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conanan"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("roles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),s._v(" sysRole "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("roleName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ¶æ„å¸ˆ"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®ç”¨æˆ·åˆ°è§’è‰²çš„å…³ç³»ï¼Œå¯ä»¥å¯¹ä¸­é—´è¡¨è¿›è¡Œç»´æŠ¤")]),s._v("\n        sysUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRoles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysRole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®è§’è‰²åˆ°ç”¨æˆ·çš„å…³ç³»ï¼Œå¯ä»¥å¯¹ä¸­é—´è¡¨è¿›è¡Œç»´æŠ¤")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sysRole.getUsers().add(sysUser);")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½†æ˜¯ä¸èƒ½åŒæ—¶ç»´æŠ¤ï¼Œå› ä¸ºè”åˆä¸»é”®ä¸èƒ½é‡å¤ï¼")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŠ¥é”™ Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1-1' for key 'sys_user_role.PRIMARY'")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ”¾å¼ƒè¢«é€‰æ‹©ä¸€æ–¹ï¼ˆå¦‚è§’è‰²ï¼‰çš„ä¸­é—´è¡¨ç»´æŠ¤æƒå³å¯ï¼")]),s._v("\n\n        sysUserRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        sysRoleRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysRole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("p",[s._v("ç”Ÿæˆçš„sqlï¼š")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" age "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("integer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKhh52n8vd4ny9ff4x9fb8v65qx "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKb40xxfch70f5qnyfw8yme1n1s "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¿å­˜")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("å¯è§ï¼Œ"),n("strong",[s._v("ç›®å‰ç”Ÿæˆçš„å»ºè¡¨è¯­å¥ç«Ÿç„¶æœ‰5æ¡")]),s._v("ï¼Œæœ¬åº”è¯¥åªæœ‰3æ¡ï¼")]),s._v(" "),n("h3",{attrs:{id:"manytomany-å®æˆ˜ï¼šçº§è”-â˜ ï¸"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#manytomany-å®æˆ˜ï¼šçº§è”-â˜ ï¸"}},[s._v("#")]),s._v(" @ManyToMany å®æˆ˜ï¼šçº§è” â˜ ï¸")]),s._v(" "),n("p",[s._v("é…ç½®åŒä¸€å¯¹å¤š")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Getter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Setter")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Builder")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Entity")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Id")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GeneratedValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("strategy "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GenerationType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IDENTITY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" userId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@ManyToMany")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cascade "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CascadeType")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ALL"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinTable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sys_user_role"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            joinColumns "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            inverseJoinColumns "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@JoinColumn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"role_id"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("æµ‹è¯•")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DataJpaTestã€MybatisTest ä¼šé»˜è®¤ä½¿ç”¨å…¶æµ‹è¯•æ•°æ®æºæ›¿ä»£ï¼Œè‹¥è¦ä½¿ç”¨è‡ªå·±é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹æ³¨è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AutoConfigureTestDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("replace "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoConfigureTestDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Many2ManyTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUserRepository")]),s._v(" sysUserRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRoleRepository")]),s._v(" sysRoleRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * ä¿å­˜ä¸€ä¸ªç”¨æˆ·ã€ä¸€ä¸ªè§’è‰²\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testSave")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" sysUser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("userName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conanan"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("roles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),s._v(" sysRole "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("roleName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ¶æ„å¸ˆ"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®ç”¨æˆ·åˆ°è§’è‰²çš„å…³ç³»ï¼Œå¯ä»¥å¯¹ä¸­é—´è¡¨è¿›è¡Œç»´æŠ¤")]),s._v("\n        sysUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRoles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysRole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®è§’è‰²åˆ°ç”¨æˆ·çš„å…³ç³»ï¼Œå¯ä»¥å¯¹ä¸­é—´è¡¨è¿›è¡Œç»´æŠ¤")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sysRole.getUsers().add(sysUser);")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½†æ˜¯ä¸èƒ½åŒæ—¶ç»´æŠ¤ï¼Œå› ä¸ºè”åˆä¸»é”®ä¸èƒ½é‡å¤ï¼")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŠ¥é”™ Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1-1' for key 'sys_user_role.PRIMARY'")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ”¾å¼ƒè¢«é€‰æ‹©ä¸€æ–¹ï¼ˆå¦‚è§’è‰²ï¼‰çš„ä¸­é—´è¡¨ç»´æŠ¤æƒå³å¯ï¼")]),s._v("\n\n        sysUserRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        sysRoleRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysRole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * æµ‹è¯•çº§è”æ·»åŠ ï¼ˆä¿å­˜ä¸€ä¸ªç”¨æˆ·åŒæ—¶ä¿å­˜ç”¨æˆ·ç›¸å…³è§’è‰²åŠä¸­é—´è¡¨å…³è”ä¿¡æ¯ï¼‰\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testCascadeAdd")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),s._v(" sysUser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("userName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conanan"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("roles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Optional")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" byId "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" sysRoleRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("findById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),s._v(" sysRole "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("builder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("roleId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HashSet")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®ç”¨æˆ·åˆ°è§’è‰²çš„å…³ç³»ï¼Œå¯ä»¥å¯¹ä¸­é—´è¡¨è¿›è¡Œç»´æŠ¤ã€‚è‹¥è¿˜é…ç½®äº†çº§è”ï¼Œåˆ™è¿™é‡Œä¹Ÿç»´æŠ¤äº†çº§è”å…³ç³»")]),s._v("\n        sysUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRoles")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("byId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("orElse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SysRole")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é…ç½®è§’è‰²åˆ°ç”¨æˆ·çš„å…³ç³»ï¼Œå¯ä»¥å¯¹ä¸­é—´è¡¨è¿›è¡Œç»´æŠ¤")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sysRole.getUsers().add(sysUser);")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½†æ˜¯ä¸èƒ½åŒæ—¶ç»´æŠ¤ï¼Œå› ä¸ºè”åˆä¸»é”®ä¸èƒ½é‡å¤ï¼")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŠ¥é”™ Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '1-1' for key 'sys_user_role.PRIMARY'")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ”¾å¼ƒè¢«é€‰æ‹©ä¸€æ–¹ï¼ˆå¦‚è§’è‰²ï¼‰çš„ä¸­é—´è¡¨ç»´æŠ¤æƒå³å¯ï¼")]),s._v("\n\n        sysUserRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("save")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * æµ‹è¯•çº§è”åˆ é™¤ï¼ˆåˆ é™¤ä¸€ä¸ªç”¨æˆ·åŒæ—¶åˆ é™¤ä¸­é—´è¡¨å…³è”ä¿¡æ¯åŠç”¨æˆ·ç›¸å…³è§’è‰²ï¼‰\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Transactional")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testCascadeRemove")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        sysUserRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("deleteById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br")])]),n("p",[s._v("ä¿å­˜çš„sql")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" age "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("integer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("engine")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("InnoDB")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKhh52n8vd4ny9ff4x9fb8v65qx "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" FKb40xxfch70f5qnyfw8yme1n1s "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("foreign")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("references")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ä¿å­˜")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("role_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" role_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("å¯è§ï¼Œ"),n("strong",[s._v("ç›®å‰ç”Ÿæˆçš„å»ºè¡¨è¯­å¥ç«Ÿç„¶æœ‰5æ¡")]),s._v("ï¼Œæœ¬åº”è¯¥åªæœ‰3æ¡ï¼å…¶ä½™çš„ä¸€æ¨¡ä¸€æ ·")]),s._v(" "),n("p",[s._v("çº§è”åˆ é™¤çš„sql")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" sysuser0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" user_id1_5_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysuser0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("age "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" age2_5_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysuser0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" user_nam3_5_0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sys_user sysuser0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" sysuser0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" roles0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" user_id1_3_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" roles0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" role_id2_3_0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysrole1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" role_id1_4_1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysrole1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_name "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" role_nam2_4_1_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sys_user_role roles0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("inner")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("join")]),s._v(" sys_role sysrole1_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" roles0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sysrole1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("role_id "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" roles0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sys_user_role "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sys_role "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" role_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sys_user "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("æœ‰å¯èƒ½åˆ é™¤æŠ¥é”™ï¼å› ä¸ºåœ¨åˆ é™¤ä¸­é—´è¡¨åï¼Œåˆ é™¤è§’è‰²è¡¨æ—¶ï¼Œè¯¥è§’è‰²å¯èƒ½è¿˜è¢«å…¶ä»–ç”¨æˆ·å¼•ç”¨ï¼")]),s._v(" "),n("h3",{attrs:{id:"manytoone-å’Œ-onetomany-è¡¨ç¤º-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#manytoone-å’Œ-onetomany-è¡¨ç¤º-ğŸ”¥"}},[s._v("#")]),s._v(" @ManyToOne å’Œ @OneToMany è¡¨ç¤º ğŸ”¥")]),s._v(" "),n("p",[s._v("éœ€è¦æ–°å»ºä¸€ä¸ªä¸­é—´è¡¨ @Entity ç±»ï¼Œå¹¶åœ¨è¯¥ç±»ä¸­ç»´æŠ¤æ˜ å°„å…³ç³»ï¼Œè®°å¾—åœ¨2ä¸ªä¸»è¡¨ä¸­é…ç½® mappedByã€‚æ­¤æ—¶å¯è§ï¼Œ"),n("strong",[s._v("ç›®å‰ç”Ÿæˆçš„å»ºè¡¨è¯­å¥å°±åªæœ‰3æ¡")]),s._v("ï¼Œéå¸¸æ­£å¸¸ï¼")]),s._v(" "),n("h3",{attrs:{id:"å¤šå¯¹å¤šçš„æœ€ä½³å®è·µ-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¤šå¯¹å¤šçš„æœ€ä½³å®è·µ-ğŸ”¥"}},[s._v("#")]),s._v(" å¤šå¯¹å¤šçš„æœ€ä½³å®è·µ ğŸ”¥")]),s._v(" "),n("ul",[n("li",[s._v("@ManyToMany ä½¿ç”¨ä¸€èˆ¬è¾ƒå°‘ï¼Œé™¤éæ²¡æœ‰é¢å¤–å­—æ®µ")]),s._v(" "),n("li",[s._v("ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„ @OneToMany çš„æœ€ä½³å®è·µåŒæ ·é€‚ç”¨ï¼Œæˆ‘ä¸ºäº†è¯´æ˜æ–¹ä¾¿ï¼Œé‡‡ç”¨çš„æ˜¯åŒå‘å…³è”ï¼Œè€Œ"),n("strong",[s._v("å®é™…ç”Ÿäº§ä¸€èˆ¬æ˜¯åœ¨ä¸­é—´è¡¨å¯¹è±¡é‡Œé¢åšå•å‘å…³è”")]),s._v("ï¼Œè¿™æ ·ä¼šè®©å®ä½“ä¹‹é—´çš„å…³è”å…³ç³»ç®€å•å¾ˆå¤šã€‚")]),s._v(" "),n("li",[s._v("ä¸ @OneToMany ä¸€æ ·çš„é“ç†ï¼Œä¸è¦ç”¨çº§è”åˆ é™¤å’Œ orphanRemoval=trueã€‚é»˜è®¤é…ç½®å³å¯ï¼")]),s._v(" "),n("li",[s._v("FetchType é‡‡ç”¨é»˜è®¤æ–¹å¼ï¼šfetch = FetchType.LAZY çš„æ–¹å¼ã€‚é»˜è®¤é…ç½®å³å¯ï¼")])]),s._v(" "),n("h2",{attrs:{id:"å¯¹è±¡å¯¼èˆªæŸ¥è¯¢-ğŸ”¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹è±¡å¯¼èˆªæŸ¥è¯¢-ğŸ”¥"}},[s._v("#")]),s._v(" å¯¹è±¡å¯¼èˆªæŸ¥è¯¢ ğŸ”¥")]),s._v(" "),n("p",[s._v("å¯¹è±¡å¯¼èˆªæŸ¥è¯¢æ˜¯æ ¹æ®å·²ç»åŠ è½½çš„å¯¹è±¡ï¼Œå¯¼èˆªåˆ°ä»–çš„å…³è”å¯¹è±¡ã€‚å®ƒåˆ©ç”¨ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»æ¥æ£€ç´¢å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬é€šè¿‡IDæŸ¥è¯¢æ–¹å¼æŸ¥å‡ºä¸€ä¸ªå®¢æˆ·ï¼Œå¯ä»¥è°ƒç”¨Customerç±»ä¸­çš„getLinkMans()æ–¹æ³•æ¥è·å–è¯¥å®¢æˆ·çš„æ‰€æœ‰è”ç³»äººã€‚å¯¹è±¡å¯¼èˆªæŸ¥è¯¢çš„ä½¿ç”¨è¦æ±‚æ˜¯ï¼šä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å¿…é¡»å­˜åœ¨å…³è”å…³ç³»ã€‚")]),s._v(" "),n("p",[s._v("å¯¹è±¡å¯¼èˆªæŸ¥è¯¢")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("ä»ä¸€æ–¹æŸ¥è¯¢å¤šæ–¹ï¼šé»˜è®¤å»¶è¿ŸåŠ è½½")])]),s._v(" "),n("li",[n("strong",[s._v("ä»å¤šæ–¹æŸ¥è¯¢ä¸€æ–¹ï¼šé»˜è®¤ç«‹å³åŠ è½½")])])]),s._v(" "),n("p",[s._v("å¯ä»¥ä¿®æ”¹é…ç½®å°†å…¶æ”¹ä¸ºç«‹å³åŠ è½½ï¼ˆä¸æ¨èï¼ï¼‰ï¼Œ"),n("strong",[s._v("fetché…ç½®åœ¨å¤šè¡¨å…³ç³»ä¸­ä¸»ä½“ï¼ˆæˆ–ä¸€æ–¹æˆ–å¤šæ–¹ï¼‰çš„æ³¨è§£ä¸Š")])]),s._v(" "),n("p",[s._v("ä¸€å¯¹å¤šä¸­çš„ä¾‹å­ï¼Œæ— éœ€ä»»ä½•ä¿®æ”¹")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@DataJpaTest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// DataJpaTestã€MybatisTest ä¼šé»˜è®¤ä½¿ç”¨å…¶æµ‹è¯•æ•°æ®æºæ›¿ä»£ï¼Œè‹¥è¦ä½¿ç”¨è‡ªå·±é…ç½®çš„ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹æ³¨è§£")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AutoConfigureTestDatabase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("replace "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AutoConfigureTestDatabase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("NONE"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ObjectNavigationTest")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomerRepository")]),s._v(" customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkManRepository")]),s._v(" linkManRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * å¯¹è±¡å¯¼èˆªæŸ¥è¯¢é»˜è®¤ä¹Ÿæ˜¯ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œä½¿ç”¨å…³è”å¯¹è±¡æ—¶æ‰æŸ¥è¯¢ï¼Œä»…ä»….è°ƒç”¨ä¸ä¼šæ‰§è¡ŒæŸ¥è¯¢\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Test")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("testSelect1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Customer")]),s._v(" customer "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" customerRepository"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOne")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1L")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Set")]),n("span",{pre:!0,attrs:{class:"token generics"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkMan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" linkManSet "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" customer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getLinkManSet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("linkManSet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¤æ—¶æ‰æŸ¥è¯¢")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("p",[s._v("ä»ä¸€æ–¹æŸ¥è¯¢å¤šæ–¹ï¼šé»˜è®¤å»¶è¿ŸåŠ è½½")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" customer customer0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" customer0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" link_man linkmanset0_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" linkmanset0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("ä»å¤šæ–¹æŸ¥è¯¢ä¸€æ–¹ï¼šé»˜è®¤ç«‹å³åŠ è½½")]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- ç•¥æ‰å­—æ®µ")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n\tlink_man linkman0_\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEFT")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OUTER")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" customer customer1_ "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" linkman0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cust_id "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" customer1_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n\tlinkman0_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h2",{attrs:{id:"æœªæ•´ç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœªæ•´ç†"}},[s._v("#")]),s._v(" æœªæ•´ç†")]),s._v(" "),n("p",[n("a",{attrs:{href:"http://www.wangzhenhua.rocks/zh-hans/java/jpa-one-to-many-many-to-one-best-practice",target:"_blank",rel:"noopener noreferrer"}},[s._v("JPAä¸­çš„OneToManyå’ŒManyToOneçš„æœ€ä½³å®è·µ"),n("OutboundLink")],1),s._v("ï¼Œè¿˜æœ‰ç¯‡åšå®¢")]),s._v(" "),n("p",[s._v("å¤ªå¤æ‚äº†ï¼ŒJPA å˜ç”¨è¾¹å†™å§ã€‚ã€‚ã€‚")])])}),[],!1,null,null,null);t.default=e.exports}}]);