(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{604:function(s,e,a){s.exports=a.p+"assets/img/image-20210331002702476.f5b89a33.png"},760:function(s,e,a){"use strict";a.r(e);var t=a(11),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"é›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤"}},[s._v("#")]),s._v(" é›†ç¾¤")]),s._v(" "),t("h2",{attrs:{id:"ä¸šåŠ¡å‘å±•è¿‡ç¨‹ä¸­é‡åˆ°çš„å³°å€¼ç“¶é¢ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸šåŠ¡å‘å±•è¿‡ç¨‹ä¸­é‡åˆ°çš„å³°å€¼ç“¶é¢ˆ"}},[s._v("#")]),s._v(" ä¸šåŠ¡å‘å±•è¿‡ç¨‹ä¸­é‡åˆ°çš„å³°å€¼ç“¶é¢ˆ")]),s._v(" "),t("ul",[t("li",[s._v("Redis æä¾›çš„æœåŠ¡ "),t("strong",[s._v("OPS")]),s._v(" å¯ä»¥è¾¾åˆ°"),t("strong",[s._v("10ä¸‡/ç§’")]),s._v("ï¼Œå½“å‰ä¸šåŠ¡ OPS å·²ç»è¾¾åˆ°20ä¸‡/ç§’")]),s._v(" "),t("li",[s._v("å†…å­˜å•æœºå®¹é‡è¾¾åˆ°256Gï¼Œå½“å‰ä¸šåŠ¡éœ€æ±‚å†…å­˜å®¹é‡1Tã€‚ä½†å†…å­˜ä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤š")])]),s._v(" "),t("h2",{attrs:{id:"é›†ç¾¤-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤-2"}},[s._v("#")]),s._v(" é›†ç¾¤")]),s._v(" "),t("h3",{attrs:{id:"ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä»‹"}},[s._v("#")]),s._v(" ç®€ä»‹")]),s._v(" "),t("p",[s._v("é›†ç¾¤å°±æ˜¯ä½¿ç”¨ç½‘ç»œå°†"),t("strong",[s._v("è‹¥å¹²å°è®¡ç®—æœºè”é€š")]),s._v("èµ·æ¥ï¼Œå¹¶æä¾›ç»Ÿä¸€çš„ç®¡ç†æ–¹å¼ï¼Œä½¿å…¶"),t("strong",[s._v("å¯¹å¤–å‘ˆç°å•æœº")]),s._v("çš„æœåŠ¡æ•ˆæœã€‚")]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤æ˜¯ 3.0 ç‰ˆæœ¬å¼•å…¥çš„ï¼Œåœ¨ 5.0 åæ­å»ºæ›´æ–¹ä¾¿ï¼")]),s._v(" "),t("h3",{attrs:{id:"ä½œç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä½œç”¨"}},[s._v("#")]),s._v(" ä½œç”¨")]),s._v(" "),t("ul",[t("li",[s._v("åˆ†æ•£å•å°æœåŠ¡å™¨çš„"),t("strong",[s._v("è®¿é—®å‹åŠ›")]),s._v("ï¼Œå®ç°"),t("strong",[s._v("è´Ÿè½½å‡è¡¡")])]),s._v(" "),t("li",[s._v("åˆ†æ•£å•å°æœåŠ¡å™¨çš„"),t("strong",[s._v("å­˜å‚¨å‹åŠ›")]),s._v("ï¼Œå®ç°"),t("strong",[s._v("å¯æ‰©å±•æ€§")])]),s._v(" "),t("li",[s._v("é™ä½å•å°æœåŠ¡å™¨"),t("strong",[s._v("å®•æœºå¸¦æ¥çš„ä¸šåŠ¡ç¾éš¾")])])]),s._v(" "),t("h2",{attrs:{id:"æ¶æ„è®¾è®¡-ğŸ”¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¶æ„è®¾è®¡-ğŸ”¥"}},[s._v("#")]),s._v(" æ¶æ„è®¾è®¡ ğŸ”¥")]),s._v(" "),t("h3",{attrs:{id:"æ•°æ®å­˜å‚¨è®¾è®¡-æ•°æ®åˆ†ç‰‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®å­˜å‚¨è®¾è®¡-æ•°æ®åˆ†ç‰‡"}},[s._v("#")]),s._v(" æ•°æ®å­˜å‚¨è®¾è®¡â€”æ•°æ®åˆ†ç‰‡")]),s._v(" "),t("ul",[t("li",[s._v("Redis é›†ç¾¤å°†æ•´ä¸ª"),t("strong",[s._v("æ•°æ®åº“ç©ºé—´")]),s._v("åˆ’åˆ†ä¸º"),t("strong",[s._v("16384ä¸ªæ§½")]),s._v("æ¥å®ç°"),t("strong",[s._v("æ•°æ®åˆ†ç‰‡")]),s._v("ã€‚é›†ç¾¤ä¸­å„ä¸ª master è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†çš„æ§½ã€‚æ¯ä»½æ§½ä»£è¡¨çš„æ˜¯"),t("strong",[s._v("ä¸€ä¸ªå­˜å‚¨ç©ºé—´")]),s._v("ï¼Œ"),t("strong",[s._v("ä¸æ˜¯ä¸€ä¸ªkeyçš„ä¿å­˜ç©ºé—´")])]),s._v(" "),t("li",[s._v("é€šè¿‡ç®—æ³•è®¾è®¡ï¼Œè®¡ç®—å‡ºkeyåº”è¯¥ä¿å­˜çš„ä½ç½®")]),s._v(" "),t("li",[s._v("å°†keyæŒ‰ç…§è®¡ç®—å‡ºçš„ç»“æœæ”¾åˆ°å¯¹åº”çš„å­˜å‚¨ç©ºé—´")]),s._v(" "),t("li",[t("strong",[s._v("é›†ç¾¤æ·»åŠ èŠ‚ç‚¹æ—¶")]),s._v("ï¼Œä¼š"),t("strong",[s._v("å°†ç›¸åº”çš„æ§½ä»¥åŠæ§½ä¸­å­˜å‚¨çš„æ•°æ®è¿ç§»è‡³æ–°èŠ‚ç‚¹")]),s._v("ï¼ä¸”éƒ½æ˜¯"),t("strong",[s._v("åœ¨çº¿")]),s._v("è¿›è¡Œï¼"),t("strong",[s._v("æ— éœ€åœæœº")]),s._v("ï¼")])]),s._v(" "),t("h3",{attrs:{id:"é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡"}},[s._v("#")]),s._v(" é›†ç¾¤å†…éƒ¨é€šè®¯è®¾è®¡")]),s._v(" "),t("ul",[t("li",[s._v("å„ä¸ªæ•°æ®åº“ç›¸äº’é€šä¿¡ï¼Œä¿å­˜å„ä¸ªåº“ä¸­"),t("strong",[s._v("æ§½çš„ç¼–å·æ•°æ®")])]),s._v(" "),t("li",[t("strong",[s._v("ä¸€æ¬¡å‘½ä¸­ï¼Œç›´æ¥è¿”å›")])]),s._v(" "),t("li",[t("strong",[s._v("ä¸€æ¬¡æœªå‘½ä¸­ï¼Œå‘ŠçŸ¥å…·ä½“ä½ç½®")]),s._v("ã€‚ç„¶å"),t("strong",[s._v("å®¢æˆ·ç«¯")]),s._v("è®¿é—®**é‡å®šå‘ï¼ˆredirectï¼‰**çš„ä½ç½®ï¼")]),s._v(" "),t("li",[s._v("Redis é›†ç¾¤é‡‡ç”¨"),t("strong",[s._v("æ— ä»£ç†æ¨¡å¼")]),s._v("ï¼Œå®¢æˆ·ç«¯çš„å‘½ä»¤ç›´æ¥äº¤ç”±èŠ‚ç‚¹æ‰§è¡Œï¼å¯¹äºä¼˜åŒ–è¿‡çš„é›†ç¾¤å®¢æˆ·ç«¯æ¥è¯´ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹å‘½ä»¤ä¸éœ€è¦å®æ–½è½¬å‘æˆ–ä»…éœ€è¦ä¸€æ¬¡è½¬å‘")])]),s._v(" "),t("h3",{attrs:{id:"ä¸»ä»å¤åˆ¶ã€sentinel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸»ä»å¤åˆ¶ã€sentinel"}},[s._v("#")]),s._v(" ä¸»ä»å¤åˆ¶ã€Sentinel")]),s._v(" "),t("p",[s._v("Redis é›†ç¾¤ä¹Ÿæä¾›äº†ä¸å•æœºç‰ˆ Redis æœåŠ¡å™¨ä¸€æ ·çš„"),t("strong",[s._v("ä¸»ä»å¤åˆ¶")]),s._v("åŠŸèƒ½ï¼›")]),s._v(" "),t("p",[s._v("è¿˜æä¾›äº†ç±»ä¼¼äºå•æœºç‰ˆ "),t("strong",[s._v("Sentinel")]),s._v(" çš„åŠŸèƒ½ï¼å½“é›†ç¾¤ä¸­çš„æŸä¸ª master ä¸‹çº¿æ—¶ï¼Œä¼šæå‡è¯¥èŠ‚ç‚¹çš„ slave ä¸ºæ–° master ç»§ç»­æä¾›æœåŠ¡")]),s._v(" "),t("h2",{attrs:{id:"æ­å»ºæ–¹å¼1-é›†ç¾¤è‡ªåŠ¨æ­å»ºç¨‹åº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ­å»ºæ–¹å¼1-é›†ç¾¤è‡ªåŠ¨æ­å»ºç¨‹åº"}},[s._v("#")]),s._v(" æ­å»ºæ–¹å¼1â€”é›†ç¾¤è‡ªåŠ¨æ­å»ºç¨‹åº")]),s._v(" "),t("h3",{attrs:{id:"å¸®åŠ©"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸®åŠ©"}},[s._v("#")]),s._v(" å¸®åŠ©")]),s._v(" "),t("p",[s._v("åœ¨ utils/create-cluster/create-cluster ä½ç½®çš„ create-cluster ç¨‹åºä¸“é—¨ç”¨æ¥å¿«é€Ÿæ„å»ºèµ·ä¸€ä¸ªå®Œæ•´å¯ç”¨çš„é›†ç¾¤ä»¥ä¾›ç”¨æˆ·æµ‹è¯•ã€‚")]),s._v(" "),t("p",[t("code",[s._v("./create-cluster help")]),s._v("å¯ä»¥æŸ¥çœ‹ç”¨æ³•")]),s._v(" "),t("p",[s._v("åˆ›å»ºä¸€ä¸ªç¾¤é›†ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ç¼–è¾‘create-clusterï¼Œå¹¶æ›´æ”¹å¼€å§‹/ç»“æŸç«¯å£ï¼Œè¿™å–å†³äºè¦åˆ›å»ºçš„å®ä¾‹æ•°é‡ã€‚")]),s._v(" "),t("li",[s._v('ä½¿ç”¨"./creat-cluster start "æ¥è¿è¡Œå®ä¾‹ã€‚')]),s._v(" "),t("li",[s._v('ä½¿ç”¨"./create-cluster create "æ¥æ‰§è¡Œredis-cli --cluster createï¼Œè¿™æ ·å°†ä¼šåˆ›å»ºä¸€ä¸ªRedisé›†ç¾¤ã€‚(å¦‚æœæ‚¨é€šè¿‡æœ¬åœ°å®¹å™¨è®¿é—®æ‚¨çš„è®¾ç½®ï¼Œè¯·ç¡®ä¿CLUSTER_HOSTå€¼è¢«æ›´æ”¹ä¸ºæ‚¨çš„æœ¬åœ°IP)')]),s._v(" "),t("li",[s._v("ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½ç©é›†ç¾¤äº†ã€‚æ¯ä¸ªå®ä¾‹çš„AOFæ–‡ä»¶å’Œæ—¥å¿—ä¼šåˆ›å»ºåœ¨åœ¨å½“å‰ç›®å½•ä¸‹ã€‚")])]),s._v(" "),t("p",[s._v("åœæ­¢ä¸€ä¸ªé›†ç¾¤ï¼š")]),s._v(" "),t("ol",[t("li",[s._v('ä½¿ç”¨"./cake-cluster stop "æ¥åœæ­¢æ‰€æœ‰å®ä¾‹ã€‚åœ¨ä½ åœæ­¢å®ä¾‹åï¼Œå¦‚æœä½ æ”¹å˜ä¸»æ„ï¼Œä½ å¯ä»¥ä½¿ç”¨"./cake-cluster start "æ¥é‡æ–°å¯åŠ¨å®ƒä»¬ã€‚')]),s._v(" "),t("li",[s._v('ä½¿ç”¨"./creat-cluster clean "åˆ é™¤æ‰€æœ‰AOF/æ—¥å¿—æ–‡ä»¶ï¼Œä»¥å¹²å‡€çš„ç¯å¢ƒé‡æ–°å¯åŠ¨ã€‚')])]),s._v(" "),t("h3",{attrs:{id:"åˆ›å»ºé›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºé›†ç¾¤"}},[s._v("#")]),s._v(" åˆ›å»ºé›†ç¾¤")]),s._v(" "),t("p",[s._v("é€šè¿‡æ‰§è¡Œstartå‘½ä»¤æ¥åˆ›å»ºå‡º6ä¸ªèŠ‚ç‚¹ï¼Œè¿™6ä¸ªèŠ‚ç‚¹çš„IPåœ°å€éƒ½ä¸ºæœ¬æœºï¼Œè€Œç«¯å£å·åˆ™ä¸º30001ï½30006")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1/utils/create-cluster$ sudo ./create-cluster start\nStarting 30001\nStarting 30002\nStarting 30003\nStarting 30004\nStarting 30005\nStarting 30006\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("ä½¿ç”¨createå‘½ä»¤ï¼ŒæŠŠä¸Šè¿°6ä¸ªèŠ‚ç‚¹ç»„åˆæˆä¸€ä¸ªé›†ç¾¤ï¼Œå…¶ä¸­åŒ…å«3ä¸ªä¸»èŠ‚ç‚¹å’Œ3ä¸ªä»èŠ‚ç‚¹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1/utils/create-cluster$ sudo ./create-cluster create\n>>> Performing hash slots allocation on 6 nodes...\nMaster[0] -> Slots 0 - 5460\nMaster[1] -> Slots 5461 - 10922\nMaster[2] -> Slots 10923 - 16383\nAdding replica 127.0.0.1:30005 to 127.0.0.1:30001\nAdding replica 127.0.0.1:30006 to 127.0.0.1:30002\nAdding replica 127.0.0.1:30004 to 127.0.0.1:30003\n>>> Trying to optimize slaves allocation for anti-affinity\n[WARNING] Some slaves are in the same host as their master\nM: 01577c26ceb76eec6716563170826517f321d968 127.0.0.1:30001\n   slots:[0-5460] (5461 slots) master\nM: 97fd26fcdc24382afe81b8d0c45f514ecb67a2f8 127.0.0.1:30002\n   slots:[5461-10922] (5462 slots) master\nM: 81c5a05a97fe697e834e388ce318f3bb2b6155cd 127.0.0.1:30003\n   slots:[10923-16383] (5461 slots) master\nS: 7162dc4ebcb149b140639da0f229363276416a32 127.0.0.1:30004\n   replicates 01577c26ceb76eec6716563170826517f321d968\nS: e71361e154517888a63470b56343e16a88f91c6e 127.0.0.1:30005\n   replicates 97fd26fcdc24382afe81b8d0c45f514ecb67a2f8\nS: 3947e6ab1101ad12c8ddd18157edb7848712aa4a 127.0.0.1:30006\n   replicates 81c5a05a97fe697e834e388ce318f3bb2b6155cd\nCan I set the above configuration? (type 'yes' to accept): yes\n>>> Nodes configuration updated\n>>> Assign a different config epoch to each node\n>>> Sending CLUSTER MEET messages to join the cluster\nWaiting for the cluster to join\n\n>>> Performing Cluster Check (using node 127.0.0.1:30001)\nM: 01577c26ceb76eec6716563170826517f321d968 127.0.0.1:30001\n   slots:[0-5460] (5461 slots) master\n   1 additional replica(s)\nS: 7162dc4ebcb149b140639da0f229363276416a32 127.0.0.1:30004\n   slots: (0 slots) slave\n   replicates 01577c26ceb76eec6716563170826517f321d968\nS: 3947e6ab1101ad12c8ddd18157edb7848712aa4a 127.0.0.1:30006\n   slots: (0 slots) slave\n   replicates 81c5a05a97fe697e834e388ce318f3bb2b6155cd\nM: 81c5a05a97fe697e834e388ce318f3bb2b6155cd 127.0.0.1:30003\n   slots:[10923-16383] (5461 slots) master\n   1 additional replica(s)\nM: 97fd26fcdc24382afe81b8d0c45f514ecb67a2f8 127.0.0.1:30002\n   slots:[5461-10922] (5462 slots) master\n   1 additional replica(s)\nS: e71361e154517888a63470b56343e16a88f91c6e 127.0.0.1:30005\n   slots: (0 slots) slave\n   replicates 97fd26fcdc24382afe81b8d0c45f514ecb67a2f8\n[OK] All nodes agree about slots configuration.\n>>> Check for open slots...\n>>> Check slots coverage...\n[OK] All 16384 slots covered.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br")])]),t("p",[s._v("createå‘½ä»¤ä¼šæ ¹æ®ç°æœ‰çš„èŠ‚ç‚¹åˆ¶å®šå‡ºä¸€ä¸ªç›¸åº”çš„è§’è‰²å’Œæ§½åˆ†é…è®¡åˆ’ï¼Œç„¶åè¯¢é—®ä½ çš„æ„è§ã€‚ä»¥ä¸Šé¢æ‰“å°å‡ºçš„è®¡åˆ’ä¸ºä¾‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("èŠ‚ç‚¹30001ã€30002å’Œ30003å°†è¢«è®¾ç½®ä¸ºä¸»èŠ‚ç‚¹ï¼Œå¹¶ä¸”åˆ†åˆ«è´Ÿè´£æ§½0ï½5460ã€æ§½5461ï½10922å’Œæ§½10923ï½16383ã€‚")]),s._v(" "),t("li",[s._v("èŠ‚ç‚¹30004ã€30005å’Œ30006åˆ†åˆ«è¢«è®¾ç½®ä¸ºä»¥ä¸Š3ä¸ªä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ã€‚")])]),s._v(" "),t("p",[s._v("æ­å»ºå®Œæˆåçš„é›†ç¾¤ï¼š")]),s._v(" "),t("img",{staticStyle:{zoom:"33%"},attrs:{src:a(604),alt:"image-20210331002702476"}}),s._v(" "),t("h2",{attrs:{id:"æ­å»ºæ–¹å¼2-é…ç½®æ–‡ä»¶æ‰‹åŠ¨æ­å»º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ­å»ºæ–¹å¼2-é…ç½®æ–‡ä»¶æ‰‹åŠ¨æ­å»º"}},[s._v("#")]),s._v(" æ­å»ºæ–¹å¼2â€”é…ç½®æ–‡ä»¶æ‰‹åŠ¨æ­å»º")]),s._v(" "),t("h3",{attrs:{id:"æ–¹å¼1é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼1é—®é¢˜"}},[s._v("#")]),s._v(" æ–¹å¼1é—®é¢˜")]),s._v(" "),t("p",[s._v("ä½¿ç”¨create-clusterç¨‹åºå¿«é€Ÿæ­å»ºRedisé›†ç¾¤è™½ç„¶éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ç”±äºè¯¥ç¨‹åºæ­å»ºçš„Redisé›†ç¾¤"),t("strong",[s._v("ä¸å…·å¤‡é…ç½®æ–‡ä»¶")]),s._v("ã€"),t("strong",[s._v("ä¸»ä»èŠ‚ç‚¹æ•°é‡å›ºå®š")]),s._v("ä»¥åŠ"),t("strong",[s._v("æ§½åˆ†é…æ¨¡å¼å›ºå®š")]),s._v("ç­‰åŸå› ï¼Œè¿™äº›å¿«é€Ÿæ­å»ºçš„é›†ç¾¤é€šå¸¸"),t("strong",[s._v("åªèƒ½å¤Ÿç”¨äºæµ‹è¯•")]),s._v("ï¼Œä½†æ˜¯æ— æ³•åº”ç”¨åœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸­")]),s._v(" "),t("p",[s._v("æ­å»ºçœŸæ­£èƒ½å¤Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨çš„Redisé›†ç¾¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨é›†ç¾¤ç®¡ç†å‘½ä»¤å¯¹é›†ç¾¤è¿›è¡Œé…ç½®å’Œç®¡ç†")]),s._v(" "),t("h3",{attrs:{id:"åˆ›å»ºé›†ç¾¤-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºé›†ç¾¤-2"}},[s._v("#")]),s._v(" åˆ›å»ºé›†ç¾¤")]),s._v(" "),t("p",[s._v("ä¸ºäº†ä¿è¯é›†ç¾¤çš„å„é¡¹åŠŸèƒ½å¯ä»¥æ­£å¸¸è¿è½¬ï¼Œä¸€ä¸ªé›†ç¾¤è‡³å°‘éœ€è¦3ä¸ªä¸»èŠ‚ç‚¹å’Œ3ä¸ªä»èŠ‚ç‚¹ã€‚ä¸è¿‡ä¸ºäº†ä¸ä¹‹å‰ä½¿ç”¨create-clusterç¨‹åºæ­å»ºçš„é›†ç¾¤åŒºåˆ«å¼€æ¥ï¼Œè¿™æ¬¡æˆ‘ä»¬å°†æ­å»ºä¸€ä¸ªç”±5ä¸ªä¸»èŠ‚ç‚¹å’Œ5ä¸ªä»èŠ‚ç‚¹ç»„æˆçš„Redisé›†ç¾¤ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºå‡º10ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾ç›¸åº”èŠ‚ç‚¹çš„æ•°æ®ä»¥åŠé…ç½®æ–‡ä»¶")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1/utils/create-cluster$ sudo mkdir my-cluster\nubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1/utils/create-cluster$ cd my-cluster/\nubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1/utils/create-cluster/my-cluster$ sudo mkdir node1 node2 node3 node4 node5 node6 node7 node8 node9 node10\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„"),t("code",[s._v("redis.conf")]),s._v("é…ç½®æ–‡ä»¶")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster-enabled yes\nport 30001\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("cluster-enabledé€‰é¡¹çš„å€¼ä¸ºyesè¡¨ç¤ºå°†Rediså®ä¾‹è®¾ç½®æˆé›†ç¾¤èŠ‚ç‚¹è€Œä¸æ˜¯å•æœºæœåŠ¡å™¨")]),s._v(" "),t("li",[s._v("porté€‰é¡¹åˆ™ç”¨äºä¸ºæ¯ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸åŒçš„ç«¯å£å·ã€‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸º10ä¸ªèŠ‚ç‚¹åˆ†åˆ«è®¾ç½®äº†ä»30001ï½30010çš„ç«¯å£å·")])]),s._v(" "),t("p",[s._v("åœ¨ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½è®¾ç½®å¥½ç›¸åº”çš„é…ç½®æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼ˆç›®å½•è‡ªå·±è°ƒæ•´ï¼‰ï¼Œé™†ç»­å¯åŠ¨å„ä¸ªæ–‡ä»¶å¤¹ä¸­çš„é›†ç¾¤èŠ‚ç‚¹ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1$ src/redis-server /node1/redis.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿æ¥è¿™10ä¸ªé›†ç¾¤èŠ‚ç‚¹å¹¶ä¸ºå®ƒä»¬åˆ†é…æ§½ï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1$ src/redis-cli --cluster create \n127.0.0.1:30001\n127.0.0.1:30002\n127.0.0.1:30003\n127.0.0.1:30004\n127.0.0.1:30005\n127.0.0.1:30006\n127.0.0.1:30007\n127.0.0.1:30008\n127.0.0.1:30009\n127.0.0.1:30010\n-- cluster-replicas 1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[s._v("redis-cli --clusteræ˜¯Rediså®¢æˆ·ç«¯é™„å¸¦çš„é›†ç¾¤ç®¡ç†å·¥å…·ï¼Œå®ƒçš„createå­å‘½ä»¤"),t("strong",[s._v("æ¥å—ä»»æ„å¤šä¸ªèŠ‚ç‚¹çš„IPåœ°å€å’Œç«¯å£å·")]),s._v("ä½œä¸ºå‚æ•°ï¼Œç„¶åä½¿ç”¨è¿™äº›èŠ‚ç‚¹ç»„å»ºèµ·ä¸€ä¸ªRedisé›†ç¾¤ã€‚")]),s._v(" "),t("li",[s._v("cluster-replicasç”¨äºæŒ‡å®šé›†ç¾¤ä¸­"),t("strong",[s._v("æ¯ä¸ªä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹æ•°é‡")]),s._v("ã€‚åœ¨ä¸Šé¢çš„å‘½ä»¤è°ƒç”¨ä¸­ï¼Œè¯¥å‚æ•°çš„å€¼ä¸º1ï¼Œè¿™è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦"),t("strong",[s._v("ä¸ºæ¯ä¸ªä¸»èŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªä»èŠ‚ç‚¹")])])]),s._v(" "),t("p",[s._v("æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤åï¼Œä¼šå®šåˆ¶å‡ºèŠ‚ç‚¹è§’è‰²ã€æ§½åˆ†é…è®¡åˆ’ç­‰ï¼ˆç•¥ï¼‰")]),s._v(" "),t("h2",{attrs:{id:"è¿æ¥é›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿æ¥é›†ç¾¤"}},[s._v("#")]),s._v(" è¿æ¥é›†ç¾¤")]),s._v(" "),t("h3",{attrs:{id:"redis-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-cli"}},[s._v("#")]),s._v(" redis-cli")]),s._v(" "),t("p",[s._v("ä½¿ç”¨Redisé™„å¸¦çš„redis-cliå®¢æˆ·ç«¯ï¼Œ"),t("code",[s._v("-c")]),s._v("ç”¨äº"),t("strong",[s._v("è¿æ¥é›†ç¾¤")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ubuntu@VM-0-3-ubuntu:/usr/local/redis-6.2.1$ src/redis-cli -c -p 30001\n127.0.0.1:30001>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"å¸¸ç”¨é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨é…ç½®"}},[s._v("#")]),s._v(" å¸¸ç”¨é…ç½®")]),s._v(" "),t("p",[s._v("æ·»åŠ èŠ‚ç‚¹ğŸ”¥")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster-enabled yes|no\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("clusteré…ç½®æ–‡ä»¶åï¼Œè¯¥æ–‡ä»¶å±äºè‡ªåŠ¨ç”Ÿæˆï¼Œä»…ç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶å¹¶æŸ¥è¯¢æ–‡ä»¶å†…å®¹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster-config-file <filename>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("èŠ‚ç‚¹æœåŠ¡å“åº”è¶…æ—¶æ—¶é—´ï¼Œç”¨äºåˆ¤å®šè¯¥èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿æˆ–åˆ‡æ¢ä¸ºä»èŠ‚ç‚¹ğŸ”¥")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster-node-timeout <milliseconds>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("masterè¿æ¥çš„slaveæœ€å°æ•°é‡")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster-migration-barrier <count>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"å¸¸ç”¨å‘½ä»¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨å‘½ä»¤"}},[s._v("#")]),s._v(" å¸¸ç”¨å‘½ä»¤")]),s._v(" "),t("p",[s._v("redis-cli å¸¸ç”¨å‘½ä»¤ï¼š")]),s._v(" "),t("p",[s._v("æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯ğŸ”¥")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster nodes\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿›å…¥ä¸€ä¸ªä»èŠ‚ç‚¹ redisï¼Œåˆ‡æ¢å…¶ä¸»èŠ‚ç‚¹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster replicate <master-id>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å‘ç°ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæ–°å¢ä¸»èŠ‚ç‚¹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster meet ip:port\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("å¿½ç•¥ä¸€ä¸ªæ²¡æœ‰soltçš„èŠ‚ç‚¹")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster forget <id>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("æ‰‹åŠ¨æ•…éšœè½¬ç§»")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("cluster failover\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);