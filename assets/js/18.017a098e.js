(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{587:function(s,v,e){s.exports=e.p+"assets/img/image-20210324003018848.dff701c6.png"},588:function(s,v,e){s.exports=e.p+"assets/img/image-20210324003439382.7388bd9e.png"},589:function(s,v,e){s.exports=e.p+"assets/img/image-20210324003657003.7e9a9f6a.png"},590:function(s,v,e){s.exports=e.p+"assets/img/image-20210324005153814.300a68c8.png"},591:function(s,v,e){s.exports=e.p+"assets/img/image-20210324010220814.9d443e9a.png"},757:function(s,v,e){"use strict";e.r(v);var _=e(11),t=Object(_.a)({},(function(){var s=this,v=s.$createElement,_=s._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[_("h1",{attrs:{id:"è¿‡æœŸé”®åˆ é™¤ã€é€å‡ºç­–ç•¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#è¿‡æœŸé”®åˆ é™¤ã€é€å‡ºç­–ç•¥"}},[s._v("#")]),s._v(" è¿‡æœŸé”®åˆ é™¤ã€é€å‡ºç­–ç•¥")]),s._v(" "),_("h2",{attrs:{id:"ğŸ”¥expire-pexpire-è®¾ç½®ã€æ›´æ–°ç”Ÿå­˜æ—¶é—´"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥expire-pexpire-è®¾ç½®ã€æ›´æ–°ç”Ÿå­˜æ—¶é—´"}},[s._v("#")]),s._v(" ğŸ”¥EXPIRE / PEXPIRE è®¾ç½®ã€æ›´æ–°ç”Ÿå­˜æ—¶é—´")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[s._v("expire key seconds\npexpire key milliseconds\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("p",[s._v("EXPIREå‘½ä»¤å’ŒPEXPIREå‘½ä»¤åœ¨ç”Ÿå­˜æ—¶é—´è®¾ç½®æˆåŠŸæ—¶è¿”å›1ï¼›å¦‚æœç”¨æˆ·ç»™å®šçš„é”®å¹¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå‘½ä»¤è¿”å›0è¡¨ç¤ºè®¾ç½®å¤±è´¥ã€‚")]),s._v(" "),_("p",[s._v("å¯¹ä¸€ä¸ªå·²ç»å¸¦æœ‰ç”Ÿå­˜æ—¶é—´çš„é”®æ‰§è¡ŒEXPIREå‘½ä»¤æˆ–PEXPIREå‘½ä»¤æ—¶ï¼Œé”®åŸæœ‰çš„ç”Ÿå­˜æ—¶é—´å°†ä¼šè¢«"),_("strong",[s._v("ç§»é™¤")]),s._v("ï¼Œå¹¶"),_("strong",[s._v("è®¾ç½®æ–°çš„ç”Ÿå­˜æ—¶é—´")])]),s._v(" "),_("p",[s._v("æ³¨æ„ï¼š")]),s._v(" "),_("p",[s._v("SET å‘½ä»¤æœ‰ EXã€PX é€‰é¡¹ï¼Œæ— éœ€å†ä½¿ç”¨ SETEXã€SETPXã€EXPIREï¼ˆå³ä½¿æ˜¯æ›´æ–°ï¼Œä¹Ÿæ— éœ€ä½¿ç”¨ï¼‰")]),s._v(" "),_("p",[s._v("å¯ä»¥å‡å°‘å‘½ä»¤çš„è°ƒç”¨æ•°é‡å¹¶æå‡ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯ä¿è¯äº†æ“ä½œçš„åŸå­æ€§ï¼Œä½¿å¾—â€œä¸ºé”®è®¾ç½®å€¼â€å’Œâ€œä¸ºé”®è®¾ç½®ç”Ÿå­˜æ—¶é—´â€è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥ä¸€èµ·æ‰§è¡Œã€‚å½“ç„¶åç»­å¯ä»¥é€šè¿‡äº‹åŠ¡æ¥è§£å†³ï¼")]),s._v(" "),_("h2",{attrs:{id:"ğŸ”¥expireat-pexpireat-è®¾ç½®ã€æ›´æ–°è¿‡æœŸæ—¶é—´"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥expireat-pexpireat-è®¾ç½®ã€æ›´æ–°è¿‡æœŸæ—¶é—´"}},[s._v("#")]),s._v(" ğŸ”¥EXPIREAT / PEXPIREAT è®¾ç½®ã€æ›´æ–°è¿‡æœŸæ—¶é—´")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[s._v("expireat key timestamp\npexpireat key milliseconds-timestamp\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("p",[s._v("é€šè¿‡è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆexpire timeï¼‰ï¼Œè®©Redisåœ¨æŒ‡å®šUNIXæ—¶é—´æ¥ä¸´ä¹‹åè‡ªåŠ¨ç§»é™¤ç»™å®šçš„é”®")]),s._v(" "),_("ul",[_("li",[s._v("EXPIREATå‘½ä»¤æ¥å—ä¸€ä¸ªé”®å’Œä¸€ä¸ªç§’çº§ç²¾åº¦çš„UNIXæ—¶é—´æˆ³ä¸ºå‚æ•°ï¼Œå½“ç³»ç»Ÿçš„å½“å‰UNIXæ—¶é—´è¶…è¿‡å‘½ä»¤æŒ‡å®šçš„UNIXæ—¶é—´æ—¶ï¼Œç»™å®šçš„é”®å°±ä¼šè¢«ç§»é™¤")]),s._v(" "),_("li",[s._v("PEXPIREATå‘½ä»¤æ¥å—ä¸€ä¸ªé”®å’Œä¸€ä¸ªæ¯«ç§’çº§ç²¾åº¦çš„UNIXæ—¶é—´æˆ³ä¸ºå‚æ•°ï¼Œå½“ç³»ç»Ÿçš„å½“å‰UNIXæ—¶é—´è¶…è¿‡å‘½ä»¤æŒ‡å®šçš„UNIXæ—¶é—´æ—¶ï¼Œç»™å®šçš„é”®å°±ä¼šè¢«ç§»é™¤")])]),s._v(" "),_("h2",{attrs:{id:"è‡ªåŠ¨è¿‡æœŸç‰¹æ€§çš„ä¸è¶³ä¹‹å¤„"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªåŠ¨è¿‡æœŸç‰¹æ€§çš„ä¸è¶³ä¹‹å¤„"}},[s._v("#")]),s._v(" è‡ªåŠ¨è¿‡æœŸç‰¹æ€§çš„ä¸è¶³ä¹‹å¤„")]),s._v(" "),_("p",[s._v("EXPIREã€PEXIREã€EXPIREATã€PEXPIREATï¼Œå®ƒä»¬éƒ½åªèƒ½å¯¹æ•´ä¸ªé”®è¿›è¡Œè®¾ç½®ï¼Œè€Œæ— æ³•å¯¹é”®ä¸­çš„æŸä¸ªå…ƒç´ è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚ï¼Œç”¨æˆ·åªèƒ½å¯¹æ•´ä¸ªé›†åˆæˆ–è€…æ•´ä¸ªæ•£åˆ—è®¾ç½®ç”Ÿå­˜æ—¶é—´/è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯å´æ— æ³•ä¸ºé›†åˆä¸­çš„æŸä¸ªå…ƒç´ æˆ–è€…æ•£åˆ—ä¸­çš„æŸä¸ªå­—æ®µå•ç‹¬è®¾ç½®ç”Ÿå­˜æ—¶é—´/è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰Redisçš„è‡ªåŠ¨è¿‡æœŸåŠŸèƒ½çš„ä¸€ä¸ªç¼ºé™·")]),s._v(" "),_("h2",{attrs:{id:"ğŸ”¥ttl-pttl-è·å–é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥ttl-pttl-è·å–é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´"}},[s._v("#")]),s._v(" ğŸ”¥TTL / PTTL è·å–é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[s._v("ttl key\npttl key\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br"),_("span",{staticClass:"line-number"},[s._v("2")]),_("br")])]),_("p",[s._v("TTLå‘½ä»¤å°†ä»¥ç§’ä¸ºå•ä½è¿”å›é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ï¼›PTTLå‘½ä»¤åˆ™ä¼šä»¥æ¯«ç§’ä¸ºå•ä½è¿”å›é”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("å¦‚æœç»™å®šçš„"),_("strong",[s._v("é”®å­˜åœ¨")]),s._v("ï¼Œä½†æ˜¯å¹¶"),_("strong",[s._v("æ²¡æœ‰è®¾ç½®ç”Ÿå­˜æ—¶é—´æˆ–è€…è¿‡æœŸæ—¶é—´")]),s._v("ï¼Œå³"),_("strong",[s._v("æ°¸ä¹…å­˜åœ¨")]),s._v("ï¼Œé‚£ä¹ˆTTLå‘½ä»¤å’ŒPTTLå‘½ä»¤å°†"),_("strong",[s._v("è¿”å›-1")])])]),s._v(" "),_("li",[_("p",[s._v("å¦‚æœç»™å®šçš„é”®"),_("strong",[s._v("å·²ç»è¿‡æœŸã€è¢«åˆ é™¤ã€æœªå®šä¹‰")]),s._v("ï¼Œå³"),_("strong",[s._v("é”®å¹¶ä¸å­˜åœ¨")]),s._v("ã€ï¼Œé‚£ä¹ˆTTLå‘½ä»¤å’ŒPTTLå‘½ä»¤å°†"),_("strong",[s._v("è¿”å›-2")])]),s._v(" "),_("p",[s._v("æ³¨æ„ï¼š"),_("strong",[s._v("è¿‡æœŸçš„é”®ä¸ä¼šç«‹åˆ»è¢«åˆ é™¤")]),s._v("ï¼ä½†ç†è®ºä¸Šå°±æ˜¯ä¸å­˜åœ¨ï¼")])])]),s._v(" "),_("p",[s._v("TTLå‘½ä»¤çš„ç²¾åº¦é—®é¢˜")]),s._v(" "),_("p",[s._v("å‡ºç°è¿™ç§æƒ…å†µçš„åŸå› åœ¨äºTTLå‘½ä»¤åªèƒ½è¿”å›ç§’çº§ç²¾åº¦çš„ç”Ÿå­˜æ—¶é—´ï¼Œæ‰€ä»¥å½“ç»™å®šé”®çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´ä¸è¶³1sæ—¶ï¼ŒTTLå‘½ä»¤åªèƒ½è¿”å›0ä½œä¸ºç»“æœã€‚è¿™æ—¶ï¼Œå¦‚æœä½¿ç”¨ç²¾åº¦æ›´é«˜çš„PTTLå‘½ä»¤å»æ£€æŸ¥è¿™äº›é”®ï¼Œå°±ä¼šçœ‹åˆ°å®ƒä»¬å®é™…çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´")]),s._v(" "),_("h2",{attrs:{id:"ğŸ”¥è¿‡æœŸé”®åˆ é™¤ç­–ç•¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥è¿‡æœŸé”®åˆ é™¤ç­–ç•¥"}},[s._v("#")]),s._v(" ğŸ”¥è¿‡æœŸé”®åˆ é™¤ç­–ç•¥")]),s._v(" "),_("h3",{attrs:{id:"ğŸ”¥æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„"}},[s._v("#")]),s._v(" ğŸ”¥æ—¶æ•ˆæ€§æ•°æ®çš„å­˜å‚¨ç»“æ„")]),s._v(" "),_("p",[_("img",{attrs:{src:e(587),alt:"image-20210324003018848"}})]),s._v(" "),_("p",[_("strong",[s._v("æ•°æ®åº“é”®çš„è¿‡æœŸæ—¶é—´éƒ½ä¿å­˜åœ¨è¿‡æœŸå­—å…¸ä¸­ï¼Œå¦‚ä¸Šå›¾")])]),s._v(" "),_("p",[s._v("æ•°æ®åˆ é™¤ç­–ç•¥çš„ç›®æ ‡ï¼šåœ¨å†…å­˜å ç”¨ä¸CPUå ç”¨ä¹‹é—´å¯»æ‰¾ä¸€ç§"),_("strong",[s._v("å¹³è¡¡")]),s._v("ï¼Œä¸æ˜¯ä¸ºäº†ç«‹åˆ»åˆ é™¤æ•°æ®ï¼Œé¡¾æ­¤å¤±å½¼éƒ½ä¼šé€ æˆæ•´ä½“redisæ€§èƒ½çš„ä¸‹é™ï¼Œç”šè‡³å¼•å‘æœåŠ¡å™¨å®•æœºæˆ–å†…å­˜æ³„éœ²")]),s._v(" "),_("h3",{attrs:{id:"å®šæ—¶ï¼ˆå™¨ï¼‰åˆ é™¤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å®šæ—¶ï¼ˆå™¨ï¼‰åˆ é™¤"}},[s._v("#")]),s._v(" å®šæ—¶ï¼ˆå™¨ï¼‰åˆ é™¤")]),s._v(" "),_("ul",[_("li",[s._v("åˆ›å»ºä¸€ä¸ª"),_("strong",[s._v("å®šæ—¶å™¨")]),s._v("ï¼Œå½“keyè®¾ç½®æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸”è¿‡æœŸæ—¶é—´åˆ°è¾¾æ—¶ï¼Œç”±å®šæ—¶å™¨ä»»åŠ¡ç«‹å³æ‰§è¡Œå¯¹é”®çš„åˆ é™¤æ“ä½œ")]),s._v(" "),_("li",[s._v("ä¼˜ç‚¹ï¼šèŠ‚çº¦å†…å­˜ï¼Œåˆ°æ—¶å°±åˆ é™¤ï¼Œå¿«é€Ÿé‡Šæ”¾æ‰ä¸å¿…è¦çš„å†…å­˜å ç”¨")]),s._v(" "),_("li",[s._v("ç¼ºç‚¹ï¼šCPUå‹åŠ›å¾ˆå¤§ï¼Œæ— è®ºCPUæ­¤æ—¶è´Ÿè½½é‡å¤šé«˜ï¼Œå‡å ç”¨CPUï¼Œä¼šå½±å“redisæœåŠ¡å™¨å“åº”æ—¶é—´å’ŒæŒ‡ä»¤ååé‡")]),s._v(" "),_("li",[s._v("æ€»ç»“ï¼šç”¨"),_("strong",[s._v("å¤„ç†å™¨æ€§èƒ½æ¢å–å­˜å‚¨ç©ºé—´")]),s._v("ï¼ˆ"),_("strong",[s._v("æ‹¿æ—¶é—´æ¢ç©ºé—´")]),s._v("ï¼‰")])]),s._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:e(588),alt:"image-20210324003439382"}}),s._v(" "),_("h3",{attrs:{id:"ğŸ”¥æƒ°æ€§åˆ é™¤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥æƒ°æ€§åˆ é™¤"}},[s._v("#")]),s._v(" ğŸ”¥æƒ°æ€§åˆ é™¤")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("æ•°æ®åˆ°è¾¾è¿‡æœŸæ—¶é—´ï¼Œä¸åšå¤„ç†ã€‚ç­‰"),_("strong",[s._v("ä¸‹æ¬¡è®¿é—®è¯¥æ•°æ®æ—¶")])]),s._v(" "),_("ul",[_("li",[s._v("å¦‚æœæœªè¿‡æœŸï¼Œè¿”å›æ•°æ®")]),s._v(" "),_("li",[_("strong",[s._v("å‘ç°å·²è¿‡æœŸï¼Œåˆ é™¤ï¼Œè¿”å›ä¸å­˜åœ¨")])])])]),s._v(" "),_("li",[_("p",[s._v("ä¼˜ç‚¹ï¼šèŠ‚çº¦CPUæ€§èƒ½ï¼Œå‘ç°å¿…é¡»åˆ é™¤çš„æ—¶å€™æ‰åˆ é™¤")])]),s._v(" "),_("li",[_("p",[s._v("ç¼ºç‚¹ï¼š"),_("strong",[s._v("å†…å­˜å‹åŠ›å¾ˆå¤§")]),s._v("ï¼Œå‡ºç°é•¿æœŸå ç”¨å†…å­˜çš„æ•°æ®")])]),s._v(" "),_("li",[_("p",[s._v("æ€»ç»“ï¼š"),_("strong",[s._v("ç”¨å­˜å‚¨ç©ºé—´æ¢å–å¤„ç†å™¨æ€§èƒ½")]),s._v("ï¼ˆ"),_("strong",[s._v("æ‹¿ç©ºé—´æ¢æ—¶é—´")]),s._v("ï¼‰")])])]),s._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:e(589),alt:"image-20210324003657003"}}),s._v(" "),_("h3",{attrs:{id:"ğŸ”¥å®šæœŸåˆ é™¤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥å®šæœŸåˆ é™¤"}},[s._v("#")]),s._v(" ğŸ”¥å®šæœŸåˆ é™¤")]),s._v(" "),_("p",[s._v("ä¸Šè¿°2ç§æ–¹æ¡ˆçš„æŠ˜ä¸­æ–¹æ¡ˆï¼š")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("Rediså¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–æ—¶ï¼Œè¯»å–é…ç½®"),_("code",[s._v("server.hz")]),s._v("çš„å€¼ï¼Œé»˜è®¤ä¸º10")])]),s._v(" "),_("li",[_("p",[s._v("æ¯ç§’é’Ÿæ‰§è¡Œ"),_("code",[s._v("server.hz")]),s._v("æ¬¡"),_("code",[s._v("serverCron()")]),s._v("â€”>"),_("code",[s._v("databasesCron()")]),s._v("â€”>"),_("code",[s._v("activeExpireCycle()")])])]),s._v(" "),_("li",[_("p",[_("code",[s._v("activeExpireCycle()")]),s._v("å¯¹æ¯ä¸ª"),_("code",[s._v("expires[x]")]),s._v("é€ä¸€è¿›è¡Œæ£€æµ‹ï¼Œæ¯æ¬¡æ‰§è¡Œ"),_("code",[s._v("250ms/server.hz")])])]),s._v(" "),_("li",[_("p",[s._v("å¯¹æŸä¸ªexpires[x]æ£€æµ‹æ—¶ï¼ŒéšæœºæŒ‘é€‰Wä¸ªkeyæ£€æµ‹")]),s._v(" "),_("ul",[_("li",[s._v("å¦‚æœkeyè¶…æ—¶ï¼Œåˆ é™¤keyï¼ˆç±»ä¼¼æƒ°æ€§åˆ é™¤ï¼‰")]),s._v(" "),_("li",[s._v("å¦‚æœä¸€è½®ä¸­åˆ é™¤çš„keyçš„æ•°é‡>W")]),s._v(" "),_("li",[s._v("å¦‚æœä¸€è½®ä¸­åˆ é™¤çš„keyçš„æ•°é‡â‰¤W*25%ï¼Œæ£€æŸ¥ä¸‹ä¸€ä¸ªexpires[x]ï¼Œ0-15å¾ªç¯")]),s._v(" "),_("li",[s._v("Wå–å€¼=ACTIVE_EXPIRE_CYCLE_LOOKUPS_PER_LOOPå±æ€§å€¼")])])]),s._v(" "),_("li",[_("p",[s._v("å‚æ•°"),_("code",[s._v("current_db")]),s._v("ç”¨äºè®°å½•"),_("code",[s._v("activeExpireCycle()")]),s._v("è¿›å…¥å“ªä¸ª"),_("code",[s._v("expires[x]")]),s._v(" æ‰§è¡Œ")])]),s._v(" "),_("li",[_("p",[s._v("å¦‚æœ"),_("code",[s._v("activeExpireCycle()")]),s._v("æ‰§è¡Œæ—¶é—´åˆ°æœŸï¼Œä¸‹æ¬¡ä»"),_("code",[s._v("current_db")]),s._v("ç»§ç»­å‘ä¸‹æ‰§è¡Œ")])])]),s._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:e(590),alt:"image-20210324005153814"}}),s._v(" "),_("p",[s._v("æ€»ç»“ï¼š")]),s._v(" "),_("ul",[_("li",[s._v("æ¦‚å¿µï¼šå‘¨æœŸæ€§è½®è¯¢redisåº“ä¸­çš„æ—¶æ•ˆæ€§æ•°æ®ï¼Œé‡‡ç”¨éšæœºæŠ½å–çš„ç­–ç•¥ï¼Œåˆ©ç”¨è¿‡æœŸæ•°æ®å æ¯”çš„æ–¹å¼æ§åˆ¶åˆ é™¤é¢‘åº¦")]),s._v(" "),_("li",[s._v("ç‰¹ç‚¹1:CPUæ€§èƒ½å ç”¨è®¾ç½®æœ‰å³°å€¼ï¼Œæ£€æµ‹é¢‘åº¦å¯è‡ªå®šä¹‰è®¾ç½®")]),s._v(" "),_("li",[s._v("ç‰¹ç‚¹2:å†…å­˜å‹åŠ›ä¸æ˜¯å¾ˆå¤§ï¼Œé•¿æœŸå ç”¨å†…å­˜çš„å†·æ•°æ®ä¼šè¢«æŒç»­æ¸…ç†")]),s._v(" "),_("li",[s._v("æ€»ç»“:å‘¨æœŸæ€§æŠ½æŸ¥å­˜å‚¨ç©ºé—´(éšæœºæŠ½æŸ¥ï¼Œé‡ç‚¹æŠ½æŸ¥)")])]),s._v(" "),_("h3",{attrs:{id:"ğŸ”¥å¯¹æ¯”æ€»ç»“"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥å¯¹æ¯”æ€»ç»“"}},[s._v("#")]),s._v(" ğŸ”¥å¯¹æ¯”æ€»ç»“")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("å®šæ—¶åˆ é™¤")]),s._v(" "),_("ul",[_("li",[s._v("èŠ‚çº¦å†…å­˜ï¼Œæ— å ç”¨")]),s._v(" "),_("li",[s._v("ä¸åˆ†æ—¶æ®µå ç”¨CPUèµ„æºï¼Œé¢‘åº¦é«˜")]),s._v(" "),_("li",[s._v("æ‹¿æ—¶é—´æ¢ç©ºé—´")])])]),s._v(" "),_("li",[_("p",[s._v("æƒ°æ€§åˆ é™¤")]),s._v(" "),_("ul",[_("li",[s._v("å†…å­˜å ç”¨ä¸¥é‡")]),s._v(" "),_("li",[s._v("å»¶æ—¶æ‰§è¡Œï¼ŒCPUåˆ©ç”¨ç‡é«˜")]),s._v(" "),_("li",[s._v("æ‹¿ç©ºé—´æ¢æ—¶é—´")])])]),s._v(" "),_("li",[_("p",[s._v("å®šæœŸåˆ é™¤")]),s._v(" "),_("ul",[_("li",[s._v("å†…å­˜å®šæœŸéšæœºæ¸…ç†")]),s._v(" "),_("li",[s._v("æ¯ç§’èŠ±è´¹å›ºå®šçš„CPUèµ„æºç»´æŠ¤å†…å­˜")]),s._v(" "),_("li",[s._v("éšæœºæŠ½æŸ¥ï¼Œé‡ç‚¹æŠ½æŸ¥")])])])]),s._v(" "),_("p",[s._v("RedisæœåŠ¡å™¨å®é™…ä½¿ç”¨çš„æ˜¯"),_("strong",[s._v("æƒ°æ€§åˆ é™¤")]),s._v("å’Œ"),_("strong",[s._v("å®šæœŸåˆ é™¤")]),s._v("ä¸¤ç§ç­–ç•¥ï¼šé€šè¿‡"),_("strong",[s._v("é…åˆ")]),s._v("ä½¿ç”¨è¿™ä¸¤ç§åˆ é™¤ç­–ç•¥ï¼ŒæœåŠ¡å™¨å¯ä»¥å¾ˆå¥½åœ°åœ¨åˆç†ä½¿ç”¨CPUæ—¶é—´å’Œé¿å…æµªè´¹å†…å­˜ç©ºé—´ä¹‹é—´å–å¾—"),_("strong",[s._v("å¹³è¡¡")])]),s._v(" "),_("h2",{attrs:{id:"ğŸ”¥é€å‡ºç­–ç•¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥é€å‡ºç­–ç•¥"}},[s._v("#")]),s._v(" ğŸ”¥é€å‡ºç­–ç•¥")]),s._v(" "),_("h3",{attrs:{id:"æ–°æ•°æ®è¿›å…¥æ£€æµ‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ–°æ•°æ®è¿›å…¥æ£€æµ‹"}},[s._v("#")]),s._v(" æ–°æ•°æ®è¿›å…¥æ£€æµ‹")]),s._v(" "),_("p",[s._v("å½“æ–°æ•°æ®è¿›å…¥redisæ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³æ€ä¹ˆåŠ?")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("Redisä½¿ç”¨å†…å­˜å­˜å‚¨æ•°æ®ï¼Œåœ¨æ‰§è¡Œæ¯ä¸€ä¸ªå‘½ä»¤å‰ï¼Œä¼šè°ƒç”¨"),_("code",[s._v("freeMemoryIfNeeded()")]),_("strong",[s._v("æ£€æµ‹å†…å­˜æ˜¯å¦å……è¶³")]),s._v("ã€‚å¦‚æœå†…å­˜ä¸æ»¡è¶³æ–°åŠ å…¥æ•°æ®çš„æœ€ä½å­˜å‚¨è¦æ±‚ï¼Œredisè¦"),_("strong",[s._v("ä¸´æ—¶åˆ é™¤ä¸€äº›æ•°æ®ä¸ºå½“å‰æŒ‡ä»¤æ¸…ç†å­˜å‚¨ç©ºé—´")]),s._v("ã€‚æ¸…ç†æ•°æ®çš„ç­–ç•¥ç§°ä¸ºé€å‡ºç®—æ³•ã€‚")])]),s._v(" "),_("li",[_("p",[s._v("æ³¨æ„ï¼šé€å‡ºæ•°æ®çš„è¿‡ç¨‹"),_("strong",[s._v("ä¸æ˜¯100%èƒ½å¤Ÿæ¸…ç†å‡ºè¶³å¤Ÿçš„å¯ä½¿ç”¨çš„å†…å­˜ç©ºé—´")]),s._v("ï¼Œå¦‚æœ"),_("strong",[s._v("ä¸æˆåŠŸåˆ™åå¤æ‰§è¡Œ")]),s._v("ã€‚å½“"),_("strong",[s._v("å¯¹æ‰€æœ‰æ•°æ®å°è¯•å®Œæ¯•åï¼Œå¦‚æœè¿˜ä¸èƒ½è¾¾åˆ°å†…å­˜æ¸…ç†çš„è¦æ±‚ï¼Œå°†å‡ºç°é”™è¯¯ä¿¡æ¯")]),s._v("ã€‚")]),s._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[s._v("(error) OOM command not allowed when used memory >'maxmemory'\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])])])]),s._v(" "),_("h3",{attrs:{id:"å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®"}},[s._v("#")]),s._v(" å½±å“æ•°æ®é€å‡ºçš„ç›¸å…³é…ç½®")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("æœ€å¤§å¯ä½¿ç”¨å†…å­˜")]),s._v(" "),_("p",[s._v("å ç”¨ç‰©ç†å†…å­˜çš„æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶ã€‚ç”Ÿäº§ç¯å¢ƒä¸­æ ¹æ®éœ€æ±‚è®¾å®šï¼Œé€šå¸¸è®¾ç½®åœ¨50%ä»¥ä¸Šã€‚")]),s._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[s._v("maxmemory\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])])]),s._v(" "),_("li",[_("p",[s._v("æ¯æ¬¡é€‰å–å¾…åˆ é™¤æ•°æ®çš„ä¸ªæ•°")]),s._v(" "),_("p",[s._v("é€‰å–æ•°æ®æ—¶å¹¶ä¸ä¼šå…¨åº“æ‰«æï¼Œå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½æ¶ˆè€—ï¼Œé™ä½è¯»å†™æ€§èƒ½ã€‚å› æ­¤é‡‡ç”¨éšæœºè·å–æ•°æ®çš„æ–¹å¼ä½œä¸ºå¾…æ£€æµ‹åˆ é™¤æ•°æ®")]),s._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[s._v("maxmemory-samples\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])])]),s._v(" "),_("li",[_("p",[_("strong",[s._v("åˆ é™¤ç­–ç•¥")])]),s._v(" "),_("p",[s._v("è¾¾åˆ°æœ€å¤§å†…å­˜åçš„ï¼Œå¯¹è¢«æŒ‘é€‰å‡ºæ¥çš„æ•°æ®è¿›è¡Œåˆ é™¤çš„ç­–ç•¥ã€‚å¦‚ä¸‹"),_("strong",[s._v("8ç§ç­–ç•¥")])]),s._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[s._v("maxmemory-policy\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])])])]),s._v(" "),_("h3",{attrs:{id:"ğŸ”¥8ç§é€å‡ºç­–ç•¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”¥8ç§é€å‡ºç­–ç•¥"}},[s._v("#")]),s._v(" ğŸ”¥8ç§é€å‡ºç­–ç•¥")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("æ£€æµ‹"),_("strong",[s._v("æ˜“å¤±æ•°æ®")]),s._v("(å¯èƒ½ä¼šè¿‡æœŸçš„æ•°æ®é›†server.db[i].expires )")]),s._v(" "),_("ul",[_("li",[_("p",[s._v("volatile-lru:æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°ã€‚æ¨èï¼ğŸ”¥")])]),s._v(" "),_("li",[_("p",[s._v("volatile-lfu:æŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±°")]),s._v(" "),_("p",[_("img",{attrs:{src:e(591),alt:"image-20210324010220814"}})])]),s._v(" "),_("li",[_("p",[s._v("volatile-ttl:æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±°")])]),s._v(" "),_("li",[_("p",[s._v("volatile-random:ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°")])])])]),s._v(" "),_("li",[_("p",[s._v("æ£€æµ‹"),_("strong",[s._v("å…¨åº“æ•°æ®")]),s._v("(æ‰€æœ‰æ•°æ®é›†server.db[i].dict )")]),s._v(" "),_("ul",[_("li",[s._v("allkeys-lru:æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±°")]),s._v(" "),_("li",[s._v("allkeys-lfu:æŒ‘é€‰æœ€è¿‘ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®æ·˜æ±°")]),s._v(" "),_("li",[s._v("allkeys-random:ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°")])])]),s._v(" "),_("li",[_("p",[_("strong",[s._v("æ”¾å¼ƒæ•°æ®é©±é€")])]),s._v(" "),_("ul",[_("li",[s._v("no-enviction(é©±é€)ï¼š"),_("strong",[s._v("ç¦æ­¢é©±é€æ•°æ®")]),s._v("(redis4.0ä¸­é»˜è®¤ç­–ç•¥)ï¼Œä¼šå¼•å‘é”™è¯¯OOM(Out Of Memory)")])])])]),s._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[s._v("æç¤º")]),s._v(" "),_("p",[s._v("ä½¿ç”¨INFOå‘½ä»¤è¾“å‡ºç›‘æ§ä¿¡æ¯ï¼ŒæŸ¥è¯¢ç¼“å­˜ hit å’Œ miss çš„æ¬¡æ•°ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒä¼˜Redisé…ç½®")])]),s._v(" "),_("h2",{attrs:{id:"persist-æ—¶æ•ˆè½¬æ°¸ä¹…"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#persist-æ—¶æ•ˆè½¬æ°¸ä¹…"}},[s._v("#")]),s._v(" PERSIST æ—¶æ•ˆè½¬æ°¸ä¹…")]),s._v(" "),_("div",{staticClass:"language-bash line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-bash"}},[_("code",[s._v("persist key\n")])]),s._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[s._v("1")]),_("br")])])])}),[],!1,null,null,null);v.default=t.exports}}]);