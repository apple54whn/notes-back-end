(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{619:function(t,a,s){t.exports=s.p+"assets/img/legacy-8806586.bbbef4dc.png"},620:function(t,a,s){t.exports=s.p+"assets/img/image-20200112165900399.e72a9a4a.png"},621:function(t,a,s){t.exports=s.p+"assets/img/dependency.22eb7fe1.png"},622:function(t,a,s){t.exports=s.p+"assets/img/concrete-bindings-8806586.d8261ab1.png"},787:function(t,a,s){"use strict";s.r(a);var n=s(11),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"log"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[t._v("#")]),t._v(" Log")]),t._v(" "),n("blockquote",[n("p",[t._v("也可查看 Spring Boot 官方文档"),n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/reference/htmlsingle/#boot-features-logging",target:"_blank",rel:"noopener noreferrer"}},[t._v("日志篇"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("Spring Boot 对所有内部日志使用通用日志记录，但保留底层日志实现的开放。为 JUL、Log4J2 和 Logback 提供了默认配置。在每种情况下，日志记录器都预先配置为使用控制台输出，并提供可选的文件输出。")]),t._v(" "),n("p",[t._v("默认情况下，如果使用“Starters”， 则 Logback 将被用来日志记录。还包括适当的 Logback 路由，以确保使用 Java Util Logging, Commons Logging, Log4J 或 SLF4J 的依赖库都能正常工作。")]),t._v(" "),n("h2",{attrs:{id:"日志框架"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#日志框架"}},[t._v("#")]),t._v(" 日志框架")]),t._v(" "),n("p",[t._v("借鉴 JDBC 设计模式，写一个统一的日志抽象接口层即"),n("strong",[t._v("日志门面")]),t._v("，给项目中导入具体的日志实现就行了。我们之前的日志框架都是实现的抽象层；市面上的日志框架如下：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("门面")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("JCL（Jakarta Commons Logging）")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("SLF4j（Simple Logging Facade for Java）")])])])]),t._v(" "),n("p",[t._v("写了一个统一的接口层；日志门面（日志的一个抽象层）；logging-abstract.jar；")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("日志实现")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("Log4j")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("JUL（java.util.logging）")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[n("strong",[t._v("Logback")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("Log4j2")])])])]),t._v(" "),n("p",[n("strong",[t._v("SpringBoot 默认选用 SLF4j 和 logback")])]),t._v(" "),n("h2",{attrs:{id:"日志格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#日志格式"}},[t._v("#")]),t._v(" 日志格式")]),t._v(" "),n("p",[t._v("Spring Boot 的默认日志输出类似于下面的示例")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("2020-01-12 00:42:19.350 ERROR 6565 --- [           main] c.e.studylog.StudyLogApplicationTests    : error\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("输出下列项目：")]),t._v(" "),n("ul",[n("li",[t._v("日期和时间：毫秒精度，容易排序")]),t._v(" "),n("li",[t._v("日志级别："),n("code",[t._v("ERROR")]),t._v(" "),n("code",[t._v("WARN")]),t._v(" "),n("code",[t._v("INFO")]),t._v(" "),n("code",[t._v("DEBUG")]),t._v(" "),n("code",[t._v("TRACE")]),t._v("。Logback 没有 "),n("code",[t._v("FATAL")]),t._v(" 级别，它被映射到 "),n("code",[t._v("ERROR")]),t._v("级别")]),t._v(" "),n("li",[t._v("进程 ID")]),t._v(" "),n("li",[t._v("分隔符 "),n("code",[t._v("---")]),t._v(" 以区分实际日志消息的开始")]),t._v(" "),n("li",[t._v("线程名：用方括号括起来（对于控制台输出可能会被截断）")]),t._v(" "),n("li",[t._v("记录器名称：一般是全限定类名（通常缩写）。")]),t._v(" "),n("li",[t._v("日志信息")])]),t._v(" "),n("h2",{attrs:{id:"控制台输出-🔥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#控制台输出-🔥"}},[t._v("#")]),t._v(" 控制台输出 🔥")]),t._v(" "),n("p",[t._v("默认的日志配置在消息写入时将消息回显到控制台。默认情况下，会记录 "),n("code",[t._v("ERROR")]),t._v(" "),n("code",[t._v("WARN")]),t._v(" "),n("code",[t._v("INFO")]),t._v("。")]),t._v(" "),n("p",[t._v("可以通过使用"),n("code",[t._v("--debug")]),t._v("标志启动应用程序来启用调试模式。还可以在 application.yaml 中指定 "),n("code",[t._v("debug=true")]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("java -jar myapp.jar --debug\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("启用"),n("code",[t._v("debug")]),t._v("模式后，将配置一些核心记录器（嵌入式容器，Hibernate 和 Spring Boot）以输出更多信息。 启用"),n("code",[t._v("debug")]),t._v("模式不会将您的应用程序配置为记录所有具有"),n("code",[t._v("DEBUG")]),t._v("级别的消息。或者，您可以通过使用"),n("code",[t._v("--trace")]),t._v("标志（或 application.yaml 中的"),n("code",[t._v("trace = true")]),t._v("）启动应用程序来启用“跟踪”模式。 这样做可以为某些核心记录器（嵌入式容器，Hibernate 模式生成以及整个 Spring 产品组合）启用跟踪记录。")]),t._v(" "),n("h3",{attrs:{id:"彩色编码输出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#彩色编码输出"}},[t._v("#")]),t._v(" 彩色编码输出")]),t._v(" "),n("p",[t._v("如果你的终端支持 ANSI，颜色输出用于帮助可读性。你可以设置"),n("code",[t._v("spring.output.ansi.enabled")]),t._v(" 启用到受支持的值来覆盖自动检测。颜色编码是通过使用"),n("code",[t._v("%clr")]),t._v("转换字来配置的。在其最简单的形式中，转换器根据日志级别对输出进行着色，如下面的示例所示")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("%clr(%5p)\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("下表描述了日志级别到颜色的映射：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("Level")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Color")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("FATAL")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Red")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("ERROR")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Red")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("WARN")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Yellow")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("INFO")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Green")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("DEBUG")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Green")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("TRACE")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Green")])])])]),t._v(" "),n("p",[t._v("另外，您可以通过将其提供为转换的选项来指定应使用的颜色或样式。 例如，要使文本变黄，请使用以下设置：")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){yellow}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("支持以下颜色和样式：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("blue")])]),t._v(" "),n("li",[n("code",[t._v("cyan")])]),t._v(" "),n("li",[n("code",[t._v("faint")])]),t._v(" "),n("li",[n("code",[t._v("green")])]),t._v(" "),n("li",[n("code",[t._v("magenta")])]),t._v(" "),n("li",[n("code",[t._v("red")])]),t._v(" "),n("li",[n("code",[t._v("yellow")])])]),t._v(" "),n("h2",{attrs:{id:"文件输出-🔥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件输出-🔥"}},[t._v("#")]),t._v(" 文件输出 🔥")]),t._v(" "),n("p",[n("strong",[t._v("默认")]),t._v("情况下，Spring Boot "),n("strong",[t._v("仅记录到控制台，不写日志文件")]),t._v("。 如果除了控制台输出外还想写日志文件，则需要在 application.yaml 中设置"),n("code",[t._v("logging.file.name")]),t._v(" 或"),n("code",[t._v("logging.file.path")]),t._v("属性。")]),t._v(" "),n("p",[t._v("下表显示了如何结合使用 "),n("code",[t._v("logging.*")]),t._v(" 属性：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[n("code",[t._v("logging.file.name")]),t._v("🔥")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[n("code",[t._v("logging.file.path")])]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Example")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("em",[t._v("(none)")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("em",[t._v("(none)")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}}),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("仅在控制台输出")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("Specific file")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("em",[t._v("(none)")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("my.log")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("写入指定的日志文件。名称可以是"),n("strong",[t._v("绝对位置")]),t._v("，也可以是"),n("strong",[t._v("相对于当前目录的位置")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[n("em",[t._v("(none)")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("Specific directory")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("/var/log")])]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[t._v("将"),n("code",[t._v("spring.log")]),t._v("写入指定目录。名称可以是"),n("strong",[t._v("绝对位置")]),t._v("，也可以是"),n("strong",[t._v("相对于当前目录的位置")])])])])]),t._v(" "),n("p",[t._v("日志文件达到 10 MB 时会压缩，并且与控制台输出一样，默认情况下会记录"),n("code",[t._v("ERROR")]),t._v("级别，"),n("code",[t._v("WARN")]),t._v("级别和"),n("code",[t._v("INFO")]),t._v("级别的消息。")]),t._v(" "),n("p",[t._v("可以使用"),n("code",[t._v("logging.file.max-size")]),t._v("属性"),n("strong",[t._v("更改大小限制")]),t._v("。 除非已设置"),n("code",[t._v("logging.file.max-history")]),t._v("属性，否则以前压缩的文件将无限期存档。")]),t._v(" "),n("p",[t._v("可以使用"),n("code",[t._v("logging.file.total-size-cap")]),t._v("限制"),n("strong",[t._v("日志归档文件的总大小")]),t._v("。 当日志归档的总大小超过该阈值时，"),n("strong",[t._v("将删除备份")]),t._v("。 要在应用"),n("strong",[t._v("程序启动时强制清除日志归档文件")]),t._v("，请使用"),n("code",[t._v("logging.file.clean-history-on-start")]),t._v("属性。")]),t._v(" "),n("p",[t._v("日志属性独立于实际的日志基础架构。因此特定的配置（如"),n("code",[t._v("logback.configurationFile")]),t._v(" ）不是由 spring Boot 管理的。")]),t._v(" "),n("h3",{attrs:{id:"自定义日志配置-🔥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义日志配置-🔥"}},[t._v("#")]),t._v(" 自定义日志配置 🔥")]),t._v(" "),n("blockquote",[n("p",[t._v("其实使用的比较少，因为其功能比较少。一般直接导入具体实现框架的配置")])]),t._v(" "),n("p",[t._v("可以"),n("strong",[t._v("通过在类路径中包括适当的库来激活各种日志记录系统")]),t._v("，并可以通过在类路径的根目录中或在以下 Spring Environment 属性指定的位置中提供适当的配置文件来进一步自定义日志文件：logging.config。为了方便自定义，将一些其他属性从 Spring Environment 转移到 System 属性，见"),n("a",{attrs:{href:"https://docs.spring.io/spring-boot/docs/2.2.2.RELEASE/reference/htmlsingle/#boot-features-custom-log-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("给"),n("strong",[t._v("类路径")]),t._v("下放上"),n("strong",[t._v("每个日志框架自己的配置文件")]),t._v("即可；SpringBoot 就不使用他默认配置的了。根据您的日志记录系统，将加载以下文件：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("Logging System")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Customization")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("Logback")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("logback-spring.xml")]),t._v(", "),n("code",[t._v("logback-spring.groovy")]),t._v(", "),n("code",[t._v("logback.xml")]),t._v(", or "),n("code",[t._v("logback.groovy")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("Log4j2")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("log4j2-spring.xml")]),t._v(" or "),n("code",[t._v("log4j2.xml")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("JDK (Java Util Logging)")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("logging.properties")])])])])]),t._v(" "),n("p",[t._v("如果可能，我们建议您在日志配置中使用"),n("code",[t._v("-spring")]),t._v("变体（例如，"),n("code",[t._v("logback-spring.xml")]),t._v("而不是"),n("code",[t._v("logback.xml")]),t._v("）。 如果使用标准配置位置，Spring 将无法完全控制日志初始化。")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("logback-spring.xml")]),t._v("："),n("strong",[t._v("推荐！"),n("strong",[t._v("日志框架就不直接加载日志的配置项，"),n("strong",[t._v("由 SpringBoot 解析日志配置")]),t._v("，可以使用 SpringBoot 的")]),t._v("高级 Profile 功能")])]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("springProfile")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("staging"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- configuration to be enabled when the "staging" profile is active --\x3e')]),t._v("\n  \t可以指定某段配置只在某个环境下生效\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("springProfile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("如下：")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("appender")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stdout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ch.qos.logback.core.ConsoleAppender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("layout")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ch.qos.logback.classic.PatternLayout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("springProfile")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("%d{yyyy-MM-dd HH:mm:ss.SSS} ----\x3e [%thread] ---\x3e %-5level %logger{50} - %msg%n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("springProfile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("springProfile")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("!dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("springProfile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("layout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("appender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("如果使用 logback.xml 作为日志配置文件，还要使用 profile 功能，会有以下错误"),n("code",[t._v("no applicable action for [springProfile]")])])])]),t._v(" "),n("p",[t._v("具体各实现的配置文件自己找")]),t._v(" "),n("h2",{attrs:{id:"日志等级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#日志等级"}},[t._v("#")]),t._v(" 日志等级")]),t._v(" "),n("p",[t._v("所有被支持的日志系统都可以通过使用"),n("code",[t._v("logging.level.<logger-name>=<level>")]),t._v("（其中 "),n("code",[t._v("level")]),t._v(" 是 "),n("code",[t._v("TRACE")]),t._v(", "),n("code",[t._v("DEBUG")]),t._v(", "),n("code",[t._v("INFO")]),t._v(", "),n("code",[t._v("WARN")]),t._v(", "),n("code",[t._v("ERROR")]),t._v(", "),n("code",[t._v("FATAL")]),t._v(", 或 "),n("code",[t._v("OFF")]),t._v("）在 Spring "),n("code",[t._v("Environment")]),t._v("中（例如，在 application.yaml 中）设置日志记录器级别。可以使用"),n("code",[t._v("logging.level.root")]),t._v("配置"),n("code",[t._v("root")]),t._v("记录器。")]),t._v(" "),n("p",[t._v("以下示例显示了 application.yaml 中的日志记录设置：")]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("root")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" warn\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("org.springframework.web")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" debug\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("org.hibernate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" error\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("也可以使用环境变量设置日志记录级别。 例如，"),n("code",[t._v("LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB = DEBUG")]),t._v("会将"),n("code",[t._v("org.springframework.web")]),t._v("设置为"),n("code",[t._v("DEBUG")]),t._v("。")]),t._v(" "),n("h2",{attrs:{id:"日志组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#日志组"}},[t._v("#")]),t._v(" 日志组")]),t._v(" "),n("p",[t._v("能够将相关记录器分组在一起通常是很有用的，以便可以同时配置它们。 例如，您可能通常会更改所有与 Tomcat 相关的记录器的记录级别，但是您不容易记住顶层软件包。")]),t._v(" "),n("p",[t._v("为了解决这个问题，Spring Boot 允许您在 Spring Environment 中定义日志记录组。 例如，以下是通过将“tomcat”组添加到 application.yaml 来定义它的方法：")]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("group")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tomcat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" org.apache.catalina"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" org.apache.coyote"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" org.apache.tomcat\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("一旦定义后，您可以使用一行更改该组中所有记录器的级别：")]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tomcat")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TRACE\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("Spring Boot 包含以下预定义的日志记录组，它们可以直接使用：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("Name")]),t._v(" "),n("th",{staticStyle:{"text-align":"left"}},[t._v("Loggers")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("web")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("org.springframework.core.codec")]),n("br"),n("code",[t._v("org.springframework.http")]),n("br"),n("code",[t._v("org.springframework.web")]),n("br"),n("code",[t._v("org.springframework.boot.actuate.endpoint.web")]),n("br"),n("code",[t._v("org.springframework.boot.web.servlet.ServletContextInitializerBeans")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("sql")]),t._v(" "),n("td",{staticStyle:{"text-align":"left"}},[n("code",[t._v("org.springframework.jdbc.core")]),n("br"),n("code",[t._v("org.hibernate.SQL")]),n("br"),n("code",[t._v("org.jooq.tools.LoggerListener")])])])])]),t._v(" "),n("h2",{attrs:{id:"统一日志框架"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#统一日志框架"}},[t._v("#")]),t._v(" 统一日志框架")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("a 系统（slf4j+logback）: Spring（commons-logging）、Hibernate（jboss-logging）、MyBatis、xxxx")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("统一日志记录")]),t._v("，即"),n("strong",[t._v("如何让系统中所有的日志都统一到 slf4j？")])]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("将系统中其他日志框架先排除出去；")])]),t._v(" "),n("li",[n("strong",[t._v("用桥接器来替换原有的日志框架；")])]),t._v(" "),n("li",[n("strong",[t._v("我们导入 slf4j 其他的实现")])])])])]),t._v(" "),n("p",[n("img",{attrs:{src:s(619),alt:""}})]),t._v(" "),n("h2",{attrs:{id:"slf4j-logback🔥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#slf4j-logback🔥"}},[t._v("#")]),t._v(" SLF4j + logback🔥")]),t._v(" "),n("h3",{attrs:{id:"java-项目使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-项目使用"}},[t._v("#")]),t._v(" Java 项目使用")]),t._v(" "),n("ul",[n("li",[t._v("给系统里面导入 SLF4j 的 jar 和 logback 的实现 jar")]),t._v(" "),n("li",[t._v("每一个日志的实现框架都有自己的配置文件。使用 slf4j"),n("strong",[t._v("配置文件还是做成日志实现框架自己本身的配置文件；")])])]),t._v(" "),n("h3",{attrs:{id:"spring-boot-使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spring-boot-使用"}},[t._v("#")]),t._v(" Spring Boot 使用")]),t._v(" "),n("p",[t._v("默认"),n("code",[t._v("spring-boot-starter")]),t._v("以及依赖此的 starter 都会自动导入"),n("code",[t._v("spring-boot-starter-logging")])]),t._v(" "),n("p",[n("strong",[t._v("SpringBoot 能自动适配所有的日志，而且底层使用 slf4j+logback 的方式记录日志。其底层依赖关系如下")]),t._v("（Spring Boot 2.0 后）：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(620),alt:"image-20200112165900399"}})]),t._v(" "),n("p",[n("img",{attrs:{src:s(621),alt:"image-20200112165900399"}})]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//记录器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" logger "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("contextLoads")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//日志的级别；由低到高")]),t._v("\n      trace"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("debug"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("info"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("warn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("error\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可以调整输出的日志级别；日志就只会在这个级别以以后的高级别生效")]),t._v("\n    logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("trace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"系统详细信息, 主要开发人员用, 一般来说线上系统可以认为是临时输出, 而且随时可以通过开关将其关闭"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"主要给开发人员看,开发环境中使用"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//SpringBoot默认给我们使用的是info级别的，没有指定级别的就用SpringBoot默认规定的级别；root级别")]),t._v("\n    logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"重要的业务逻辑处理完成. 在理想情况下, INFO的日志信息要能让高级用户和系统管理员理解, 并从日志信息中能知道系统当前的运行状态"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"系统能继续运行, 但是必须引起关注"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"系统发生了严重的错误, 必须马上进行处理, 否则系统将无法继续运行"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("p",[t._v("SpringBoot 修改日志的默认配置")]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#指定某个包的日志记录级别")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("level")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("top.conanan")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" trace\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可以指定完整的路径，也可以相对路径")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ../log/springboot.log\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在当前磁盘的根路径下创建spring文件夹和里面的log文件夹；使用 spring.log 作为默认文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /spring/log\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在控制台输出的日志的格式")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" %d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("yyyy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("MM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%thread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" %"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("5level %logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" %msg%n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 指定文件中日志输出的格式")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logging")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("pattern")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" %d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("yyyy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("MM"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" === "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("%thread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" === %"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("5level === %logger"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" ==== %msg%n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])]),n("p",[t._v("具体 logback 文件自己找")]),t._v(" "),n("h2",{attrs:{id:"slf4j-log4j2🔥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#slf4j-log4j2🔥"}},[t._v("#")]),t._v(" SLF4j + Log4j2🔥")]),t._v(" "),n("p",[t._v("可以按照 slf4j 的日志适配图，进行相关的切换")]),t._v(" "),n("p",[n("img",{attrs:{src:s(622),alt:""}})]),t._v(" "),n("p",[t._v("切换为 log4j2🔥")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exclusions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 排除 logback --\x3e")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exclusion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-logging"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exclusion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exclusions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-log4j2"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("p",[t._v("其他获取 Logger 方式还是一样")])])}),[],!1,null,null,null);a.default=e.exports}}]);