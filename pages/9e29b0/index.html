<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JPAåŸºç¡€ | conanan&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="webå‰ç«¯æŠ€æœ¯åšå®¢,ç®€æ´è‡³ä¸Š,ä¸“æ³¨webå‰ç«¯å­¦ä¹ ä¸æ€»ç»“ã€‚JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,githubç­‰æŠ€æœ¯æ–‡ç« ã€‚">
    <meta name="keywords" content="å‰ç«¯åšå®¢,ä¸ªäººæŠ€æœ¯åšå®¢,å‰ç«¯,å‰ç«¯å¼€å‘,å‰ç«¯æ¡†æ¶,webå‰ç«¯,å‰ç«¯é¢è¯•é¢˜,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,é¢è¯•,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.03260d1f.css" as="style"><link rel="preload" href="/assets/js/app.ac5e3ef4.js" as="script"><link rel="preload" href="/assets/js/2.d960b235.js" as="script"><link rel="preload" href="/assets/js/68.c29f5efe.js" as="script"><link rel="prefetch" href="/assets/js/10.949143aa.js"><link rel="prefetch" href="/assets/js/100.122fb3a2.js"><link rel="prefetch" href="/assets/js/101.88060c8d.js"><link rel="prefetch" href="/assets/js/102.06832b28.js"><link rel="prefetch" href="/assets/js/103.a0c17aef.js"><link rel="prefetch" href="/assets/js/104.b38ef641.js"><link rel="prefetch" href="/assets/js/105.603033e4.js"><link rel="prefetch" href="/assets/js/106.6b288074.js"><link rel="prefetch" href="/assets/js/107.1ffec4c0.js"><link rel="prefetch" href="/assets/js/108.c7b79afa.js"><link rel="prefetch" href="/assets/js/109.dda9fbee.js"><link rel="prefetch" href="/assets/js/11.326a1f58.js"><link rel="prefetch" href="/assets/js/110.920cbe6e.js"><link rel="prefetch" href="/assets/js/111.45bfe7f2.js"><link rel="prefetch" href="/assets/js/112.1f11c570.js"><link rel="prefetch" href="/assets/js/113.fab1cc04.js"><link rel="prefetch" href="/assets/js/114.21ea4ed6.js"><link rel="prefetch" href="/assets/js/115.96f65264.js"><link rel="prefetch" href="/assets/js/116.b324c49b.js"><link rel="prefetch" href="/assets/js/117.dc4d308c.js"><link rel="prefetch" href="/assets/js/118.8f152d6d.js"><link rel="prefetch" href="/assets/js/119.ede5fffc.js"><link rel="prefetch" href="/assets/js/12.23122444.js"><link rel="prefetch" href="/assets/js/120.044161d7.js"><link rel="prefetch" href="/assets/js/121.453c745a.js"><link rel="prefetch" href="/assets/js/122.e3b088eb.js"><link rel="prefetch" href="/assets/js/123.d5a90d16.js"><link rel="prefetch" href="/assets/js/124.7731d89c.js"><link rel="prefetch" href="/assets/js/125.e64126c4.js"><link rel="prefetch" href="/assets/js/126.e46361b1.js"><link rel="prefetch" href="/assets/js/127.067ae046.js"><link rel="prefetch" href="/assets/js/128.59df2a2f.js"><link rel="prefetch" href="/assets/js/129.a2b82230.js"><link rel="prefetch" href="/assets/js/13.6780e0cd.js"><link rel="prefetch" href="/assets/js/130.c20833b9.js"><link rel="prefetch" href="/assets/js/131.da020742.js"><link rel="prefetch" href="/assets/js/132.e20ac455.js"><link rel="prefetch" href="/assets/js/133.f114b097.js"><link rel="prefetch" href="/assets/js/134.49de9e80.js"><link rel="prefetch" href="/assets/js/135.1a24633f.js"><link rel="prefetch" href="/assets/js/136.d5853212.js"><link rel="prefetch" href="/assets/js/137.3a1020dd.js"><link rel="prefetch" href="/assets/js/138.f194f86d.js"><link rel="prefetch" href="/assets/js/139.bf8c1ca0.js"><link rel="prefetch" href="/assets/js/14.08edf279.js"><link rel="prefetch" href="/assets/js/140.c800f5e0.js"><link rel="prefetch" href="/assets/js/141.47afa8e4.js"><link rel="prefetch" href="/assets/js/142.fda2db61.js"><link rel="prefetch" href="/assets/js/143.0224a2e5.js"><link rel="prefetch" href="/assets/js/144.4126fe8d.js"><link rel="prefetch" href="/assets/js/145.9fe0839a.js"><link rel="prefetch" href="/assets/js/146.89a9e1b2.js"><link rel="prefetch" href="/assets/js/147.56419b8e.js"><link rel="prefetch" href="/assets/js/148.03d2b50f.js"><link rel="prefetch" href="/assets/js/149.c1331b6d.js"><link rel="prefetch" href="/assets/js/15.f198e5b9.js"><link rel="prefetch" href="/assets/js/16.00e51c93.js"><link rel="prefetch" href="/assets/js/17.291d3ebc.js"><link rel="prefetch" href="/assets/js/18.017a098e.js"><link rel="prefetch" href="/assets/js/19.61ae84a4.js"><link rel="prefetch" href="/assets/js/20.2fed9841.js"><link rel="prefetch" href="/assets/js/21.0540e3f5.js"><link rel="prefetch" href="/assets/js/22.65f1eb05.js"><link rel="prefetch" href="/assets/js/23.fd9e2f2e.js"><link rel="prefetch" href="/assets/js/24.199ad75b.js"><link rel="prefetch" href="/assets/js/25.005a23bb.js"><link rel="prefetch" href="/assets/js/26.46587fdd.js"><link rel="prefetch" href="/assets/js/27.eaf61373.js"><link rel="prefetch" href="/assets/js/28.12bcc1aa.js"><link rel="prefetch" href="/assets/js/29.2ee78c15.js"><link rel="prefetch" href="/assets/js/3.aae4de15.js"><link rel="prefetch" href="/assets/js/30.5a13fad2.js"><link rel="prefetch" href="/assets/js/31.d559ae93.js"><link rel="prefetch" href="/assets/js/32.d5a38545.js"><link rel="prefetch" href="/assets/js/33.484dfc49.js"><link rel="prefetch" href="/assets/js/34.1a006a06.js"><link rel="prefetch" href="/assets/js/35.12b84d1e.js"><link rel="prefetch" href="/assets/js/36.b2cd4408.js"><link rel="prefetch" href="/assets/js/37.a5859cb8.js"><link rel="prefetch" href="/assets/js/38.96209f1d.js"><link rel="prefetch" href="/assets/js/39.71d70a82.js"><link rel="prefetch" href="/assets/js/4.0e4cf147.js"><link rel="prefetch" href="/assets/js/40.a59b859c.js"><link rel="prefetch" href="/assets/js/41.ebb72a6a.js"><link rel="prefetch" href="/assets/js/42.71f99aa2.js"><link rel="prefetch" href="/assets/js/43.092ff2c9.js"><link rel="prefetch" href="/assets/js/44.d70e216f.js"><link rel="prefetch" href="/assets/js/45.afb733d1.js"><link rel="prefetch" href="/assets/js/46.86c421f9.js"><link rel="prefetch" href="/assets/js/47.6d337ef6.js"><link rel="prefetch" href="/assets/js/48.157e1f1c.js"><link rel="prefetch" href="/assets/js/49.1aed4add.js"><link rel="prefetch" href="/assets/js/5.831f36ca.js"><link rel="prefetch" href="/assets/js/50.b495cbac.js"><link rel="prefetch" href="/assets/js/51.f4a8b763.js"><link rel="prefetch" href="/assets/js/52.beec293d.js"><link rel="prefetch" href="/assets/js/53.2ac4d785.js"><link rel="prefetch" href="/assets/js/54.342112cf.js"><link rel="prefetch" href="/assets/js/55.61e2bfb6.js"><link rel="prefetch" href="/assets/js/56.fa782548.js"><link rel="prefetch" href="/assets/js/57.41bc249e.js"><link rel="prefetch" href="/assets/js/58.c1d5fafb.js"><link rel="prefetch" href="/assets/js/59.4297a34f.js"><link rel="prefetch" href="/assets/js/6.54e4e793.js"><link rel="prefetch" href="/assets/js/60.634948c3.js"><link rel="prefetch" href="/assets/js/61.de4327e7.js"><link rel="prefetch" href="/assets/js/62.c6902476.js"><link rel="prefetch" href="/assets/js/63.737a0e11.js"><link rel="prefetch" href="/assets/js/64.cbe1b041.js"><link rel="prefetch" href="/assets/js/65.2df8f108.js"><link rel="prefetch" href="/assets/js/66.ee7de747.js"><link rel="prefetch" href="/assets/js/67.88edee59.js"><link rel="prefetch" href="/assets/js/69.2fedc1f9.js"><link rel="prefetch" href="/assets/js/7.1c00f39e.js"><link rel="prefetch" href="/assets/js/70.0fe4782b.js"><link rel="prefetch" href="/assets/js/71.6c22c273.js"><link rel="prefetch" href="/assets/js/72.1fc7ddbd.js"><link rel="prefetch" href="/assets/js/73.25cb42eb.js"><link rel="prefetch" href="/assets/js/74.e922e1cc.js"><link rel="prefetch" href="/assets/js/75.f48393b6.js"><link rel="prefetch" href="/assets/js/76.72e96818.js"><link rel="prefetch" href="/assets/js/77.3df4edcb.js"><link rel="prefetch" href="/assets/js/78.73c6a652.js"><link rel="prefetch" href="/assets/js/79.22ba589c.js"><link rel="prefetch" href="/assets/js/8.b5f907d4.js"><link rel="prefetch" href="/assets/js/80.2d070db4.js"><link rel="prefetch" href="/assets/js/81.c0bc2539.js"><link rel="prefetch" href="/assets/js/82.4c6a47fa.js"><link rel="prefetch" href="/assets/js/83.a43f597f.js"><link rel="prefetch" href="/assets/js/84.8ce525d0.js"><link rel="prefetch" href="/assets/js/85.6b21aae0.js"><link rel="prefetch" href="/assets/js/86.f6ebabd9.js"><link rel="prefetch" href="/assets/js/87.9acaeb0d.js"><link rel="prefetch" href="/assets/js/88.99cdf592.js"><link rel="prefetch" href="/assets/js/89.58f63450.js"><link rel="prefetch" href="/assets/js/9.053d267f.js"><link rel="prefetch" href="/assets/js/90.1d59f40c.js"><link rel="prefetch" href="/assets/js/91.e8b2a5cd.js"><link rel="prefetch" href="/assets/js/92.b92bba74.js"><link rel="prefetch" href="/assets/js/93.688cad95.js"><link rel="prefetch" href="/assets/js/94.2c11a588.js"><link rel="prefetch" href="/assets/js/95.aa37d1df.js"><link rel="prefetch" href="/assets/js/96.fffa0e6e.js"><link rel="prefetch" href="/assets/js/97.04e9be9f.js"><link rel="prefetch" href="/assets/js/98.2672abca.js"><link rel="prefetch" href="/assets/js/99.c8de1c63.js">
    <link rel="stylesheet" href="/assets/css/0.styles.03260d1f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/EB-logo.png" alt="conanan's blog" class="logo"> <span class="site-name can-hide">conanan's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/pages/4b56bd/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4b56bd/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/724936/" class="nav-link">Java Web</a></li><li class="dropdown-item"><h4>å·¥å…·</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b18d09/" class="nav-link">Maven</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><a href="/pages/74cdda/" class="link-title">DataBase</a> <span class="title" style="display:none;">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/74cdda/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/4e9f47/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool" class="dropdown-title"><a href="/pages/89d1e7/" class="link-title">Tool</a> <span class="title" style="display:none;">Tool</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/89d1e7/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Vim</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d5fb/" class="nav-link">Docker</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Evan Xu</h3> <span>å‰ç«¯ç•Œçš„å°å­¦ç”Ÿ</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/pages/4b56bd/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4b56bd/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/724936/" class="nav-link">Java Web</a></li><li class="dropdown-item"><h4>å·¥å…·</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b18d09/" class="nav-link">Maven</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><a href="/pages/74cdda/" class="link-title">DataBase</a> <span class="title" style="display:none;">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/74cdda/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/4e9f47/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool" class="dropdown-title"><a href="/pages/89d1e7/" class="link-title">Tool</a> <span class="title" style="display:none;">Tool</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/89d1e7/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Vim</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d5fb/" class="nav-link">Docker</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Jakarta EE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tomcat</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SpringDataJPA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9e29b0/" aria-current="page" class="active sidebar-link">JPAåŸºç¡€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jdbc-æ“ä½œæ•°æ®åº“åŠæ€è€ƒ-ğŸ”¥" class="sidebar-link">JDBC æ“ä½œæ•°æ®åº“åŠæ€è€ƒ ğŸ”¥</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#orm-jpa-ä¸-hibernate" class="sidebar-link">ORM &amp; JPA ä¸ Hibernate</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9e29b0/#orm-æ€æƒ³" class="sidebar-link">ORM æ€æƒ³</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpa-åŠå…¶ä¼˜åŠ¿" class="sidebar-link">JPA åŠå…¶ä¼˜åŠ¿</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#hibernate-ç®€ä»‹" class="sidebar-link">Hibernate ç®€ä»‹</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpaã€hibernateã€jdbc-å…³ç³»-ğŸ”¥" class="sidebar-link">JPAã€Hibernateã€JDBC å…³ç³» ğŸ”¥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpa-ç¯å¢ƒå‡†å¤‡" class="sidebar-link">JPA ç¯å¢ƒå‡†å¤‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9e29b0/#ç›®æ ‡" class="sidebar-link">ç›®æ ‡</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ" class="sidebar-link">å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#åˆ›å»º-maven-å·¥ç¨‹" class="sidebar-link">åˆ›å»º Maven å·¥ç¨‹</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpa-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="sidebar-link">JPA çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#é…ç½®å®ä½“ç±»ä¸è¡¨çš„æ˜ å°„å…³ç³»" class="sidebar-link">é…ç½®å®ä½“ç±»ä¸è¡¨çš„æ˜ å°„å…³ç³»</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#å·¥å…·ç±»-ğŸ”¥" class="sidebar-link">å·¥å…·ç±» ğŸ”¥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpa-å¢åˆ æ”¹æŸ¥-ğŸ”¥" class="sidebar-link">JPA å¢åˆ æ”¹æŸ¥ ğŸ”¥</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpql-å¢åˆ æ”¹æŸ¥-ğŸ”¥" class="sidebar-link">JPQL å¢åˆ æ”¹æŸ¥ ğŸ”¥</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#æ³¨æ„" class="sidebar-link">æ³¨æ„</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9e29b0/#find-ä¸-getreference-åŒºåˆ«" class="sidebar-link">find ä¸ getReference åŒºåˆ«</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpa-é‡è¦-api-ä»‹ç»" class="sidebar-link">JPA é‡è¦ API ä»‹ç»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9e29b0/#persistence" class="sidebar-link">Persistence</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#entitymanagerfactory-ğŸ”¥" class="sidebar-link">EntityManagerFactory ğŸ”¥</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#entitymanager-ğŸ”¥" class="sidebar-link">EntityManager ğŸ”¥</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#entitytransaction" class="sidebar-link">EntityTransaction</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#jpa-å¸¸ç”¨æ³¨è§£" class="sidebar-link">JPA å¸¸ç”¨æ³¨è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/9e29b0/#entity" class="sidebar-link">@Entity</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#table" class="sidebar-link">@Table</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#id" class="sidebar-link">@Id</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#generatedvalue" class="sidebar-link">@GeneratedValue</a></li><li class="sidebar-sub-header"><a href="/pages/9e29b0/#column" class="sidebar-link">@Column</a></li></ul></li></ul></li><li><a href="/pages/5427c0/" class="sidebar-link">æ€»è§ˆå…¥é—¨</a></li><li><a href="/pages/a40e65/" class="sidebar-link">åŸºç¡€æ“ä½œ</a></li><li><a href="/pages/26ad8c/" class="sidebar-link">å¤šè¡¨æ“ä½œ</a></li><li><a href="/pages/544a0d/" class="sidebar-link">å®¡è®¡åŠŸèƒ½</a></li><li><a href="/pages/044c3c/" class="sidebar-link">JPAç¤ºä¾‹ï¼ˆæ—§ï¼‰</a></li></ul></section></li><li><a href="/pages/927e76/" class="sidebar-link">Test</a></li><li><a href="/pages/2ffe27/" class="sidebar-link">Shiro</a></li><li><a href="/pages/16f81e/" class="sidebar-link">Thymeleaf</a></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- æ­£æ–¹å½¢ -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/categories/?category=Java%20Web" title="åˆ†ç±»" data-v-1cd794fe>Java Web</a></li> <li data-v-1cd794fe><a href="/categories/?category=SpringDataJPA" title="åˆ†ç±»" data-v-1cd794fe>SpringDataJPA</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/apple54whn" target="_blank" title="ä½œè€…" class="beLink" data-v-1cd794fe>conanan</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-06-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          JPAåŸºç¡€
        </h1> <div class="page-slot page-slot-top"><!-- å›ºå®š100% * 90pxå¯æ˜¾ç¤ºï¼Œmax-height:90pxæœªè§æ˜¾ç¤º-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="jpa-åŸºç¡€"><a href="#jpa-åŸºç¡€" class="header-anchor">#</a> JPA åŸºç¡€</h1> <h2 id="jdbc-æ“ä½œæ•°æ®åº“åŠæ€è€ƒ-ğŸ”¥"><a href="#jdbc-æ“ä½œæ•°æ®åº“åŠæ€è€ƒ-ğŸ”¥" class="header-anchor">#</a> JDBC æ“ä½œæ•°æ®åº“åŠæ€è€ƒ ğŸ”¥</h2> <p>æœ‰ä¸€ä¸ªç”¨æˆ·è¡¨</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> t_user <span class="token punctuation">(</span>
	id <span class="token keyword">bigint</span> auto_increament<span class="token punctuation">,</span>
    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç”¨æˆ·è¡¨å¯¹åº”çš„ model</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> userId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>JDBC ä¿å­˜ç”¨æˆ·æ“ä½œï¼ˆåªå…³æ³¨æ­¥éª¤ï¼Œapi å¯èƒ½ä¸å¯¹ï¼Œä¸”æ²¡æœ‰å…³æ³¨äº‹åŠ¡ï¼‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user (username, address) values (?,?)&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 1 è·å–è¿æ¥</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2 åˆ›å»º statement å¯¹è±¡</span>
<span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">preparedStatment</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3 å¯¹å ä½ç¬¦èµ‹å€¼</span>
ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4 ä¿å­˜</span>
ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šè¿°æ“ä½œæ€»çš„æ¥è¯´å¾ˆéº»çƒ¦ï¼Œå½“ç„¶å¯ä»¥<strong>å°è£…ä¸€ä¸ªå·¥å…·ç±»</strong>ï¼Œ<strong>åªå†™ sqlã€å ä½ç¬¦èµ‹å€¼ã€æ‰§è¡Œæ“ä½œ</strong>ã€‚ä½†æ˜¯<strong>å ä½ç¬¦èµ‹å€¼æ²¡æœ‰ç”¨åˆ°é¢å‘å¯¹è±¡çš„æ€æƒ³</strong>ï¼Œé‚£ä¹ˆæ€ä¹ˆä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥æ“ä½œå‘¢ï¼Ÿ</p> <p>ä¾‹å¦‚è°ƒç”¨ repository.save(user) å³å¯ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œä»è¯¥è¯­å¥ä¸­å¯ä»¥å¾—å‡ºï¼Œsave åŠ¨è¯å¯æ‹¼æ¥å‡º sqlï¼šinsert into __ values __ï¼Œé‚£ä¹ˆè¡¨åå’Œå ä½ç¬¦èµ‹å€¼åˆ™ç›´æ¥ä½¿ç”¨ user å¯¹è±¡å¯ä»¥è·å–åˆ°ï¼Œç„¶åæ‰§è¡Œæ“ä½œå³å¯ã€‚</p> <p>æ‰€ä»¥ï¼Œåªéœ€<strong>å»ºç«‹ user å¯¹è±¡å’Œ t_user è¡¨çš„æ˜ å°„å…³ç³»ï¼Œuser çš„å±æ€§å’Œ t_user è¡¨å­—æ®µçš„æ˜ å°„å…³ç³»</strong>å³å¯ä½¿ç”¨é¢å‘å¯¹è±¡æ¥æ“ä½œæ•°æ®åº“äº†</p> <h2 id="orm-jpa-ä¸-hibernate"><a href="#orm-jpa-ä¸-hibernate" class="header-anchor">#</a> ORM &amp; JPA ä¸ Hibernate</h2> <h3 id="orm-æ€æƒ³"><a href="#orm-æ€æƒ³" class="header-anchor">#</a> ORM æ€æƒ³</h3> <p><strong>ORMï¼ˆObject-Relational Mappingï¼‰</strong> è¡¨ç¤º<strong>å¯¹è±¡å…³ç³»æ˜ å°„</strong>ã€‚ç®€å•çš„è¯´ï¼šORMå°±æ˜¯<strong>å»ºç«‹å®ä½“ç±»å’Œæ•°æ®åº“è¡¨ä¹‹é—´çš„å…³ç³»</strong>ï¼ˆåŒ…æ‹¬<strong>è¡¨å’Œå­—æ®µ</strong>ï¼‰ï¼Œä»è€Œè¾¾åˆ°<strong>æ“ä½œå®ä½“ç±»å°±ç›¸å½“äºæ“ä½œæ•°æ®åº“è¡¨</strong>çš„ç›®çš„ã€‚è§£å†³äº†å¯èƒ½ä¼šå†™ç‰¹åˆ«å¤šæ•°æ®è®¿é—®å±‚çš„ä»£ç ã€ä»æ•°æ®åº“ä¿å­˜æ•°æ®ã€ä¿®æ”¹æ•°æ®ã€åˆ é™¤æ•°æ®ç­‰é‡å¤ä»£ç é—®é¢˜ã€‚</p> <p>å¸¸è§çš„ ORM æ¡†æ¶ï¼š<s>Mybatisï¼ˆibatisï¼‰</s>ã€Hibernate</p> <h3 id="jpa-åŠå…¶ä¼˜åŠ¿"><a href="#jpa-åŠå…¶ä¼˜åŠ¿" class="header-anchor">#</a> JPA åŠå…¶ä¼˜åŠ¿</h3> <p><strong>JPAï¼ˆJava Persistence APIï¼‰</strong>ï¼Œ å³<strong>Java æŒä¹…åŒ–API</strong>ï¼Œæ˜¯SUNå…¬å¸æ¨å‡ºçš„ä¸€å¥—<strong>åŸºäºORMçš„è§„èŒƒ</strong>ï¼ˆ<strong>æ“ä½œORMæ¡†æ¶ï¼ŒJDBCæ˜¯æ“ä½œä¸åŒæ•°æ®åº“</strong>ï¼‰ï¼Œå†…éƒ¨æ˜¯ç”±ä¸€ç³»åˆ—çš„<strong>æ¥å£å’ŒæŠ½è±¡ç±»</strong>æ„æˆã€‚æ³¨æ„<strong>ä¸æ˜¯æ¡†æ¶</strong>ï¼</p> <p>JPA çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p> <ul><li><p><strong>æ ‡å‡†åŒ–</strong></p> <p>JPA æ˜¯ JCP ç»„ç»‡å‘å¸ƒçš„ Java EE æ ‡å‡†ä¹‹ä¸€ï¼Œå› æ­¤ä»»ä½•å£°ç§°ç¬¦åˆ JPA æ ‡å‡†çš„æ¡†æ¶éƒ½éµå¾ªåŒæ ·çš„æ¶æ„ï¼Œæä¾›ç›¸åŒçš„è®¿é—®APIï¼Œè¿™ä¿è¯äº†åŸºäºJPAå¼€å‘çš„ä¼ä¸šåº”ç”¨èƒ½å¤Ÿç»è¿‡å°‘é‡çš„ä¿®æ”¹å°±èƒ½å¤Ÿåœ¨ä¸åŒçš„JPAæ¡†æ¶ä¸‹è¿è¡Œã€‚</p></li> <li><p><strong>å®¹å™¨çº§ç‰¹æ€§çš„æ”¯æŒ</strong></p> <p>JPAæ¡†æ¶ä¸­æ”¯æŒå¤§æ•°æ®é›†ã€äº‹åŠ¡ã€å¹¶å‘ç­‰å®¹å™¨çº§äº‹åŠ¡ï¼Œä½¿å¾— JPA è¶…è¶Šäº†ç®€å•æŒä¹…åŒ–æ¡†æ¶çš„å±€é™ï¼Œåœ¨ä¼ä¸šåº”ç”¨å‘æŒ¥æ›´å¤§ä½œç”¨ã€‚</p></li> <li><p><strong>ç®€å•æ–¹ä¾¿</strong></p> <p>JPAçš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€å°±æ˜¯æä¾›æ›´åŠ ç®€å•çš„ç¼–ç¨‹æ¨¡å‹ï¼šåœ¨JPAæ¡†æ¶ä¸‹åˆ›å»ºå®ä½“å’Œåˆ›å»ºJava ç±»ä¸€æ ·ç®€å•ï¼Œæ²¡æœ‰ä»»ä½•çš„çº¦æŸå’Œé™åˆ¶ï¼Œåªéœ€è¦ä½¿ç”¨ javax.persistence.Entityè¿›è¡Œæ³¨é‡Šï¼ŒJPAçš„æ¡†æ¶å’Œæ¥å£ä¹Ÿéƒ½éå¸¸ç®€å•ï¼Œæ²¡æœ‰å¤ªå¤šç‰¹åˆ«çš„è§„åˆ™å’Œè®¾è®¡æ¨¡å¼çš„è¦æ±‚ï¼Œå¼€å‘è€…å¯ä»¥å¾ˆå®¹æ˜“çš„æŒæ¡ã€‚JPAåŸºäºéä¾µå…¥å¼åŸåˆ™è®¾è®¡ï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“çš„å’Œå…¶å®ƒæ¡†æ¶æˆ–è€…å®¹å™¨é›†æˆ</p></li> <li><p><strong>æŸ¥è¯¢èƒ½åŠ›</strong></p> <p>JPAçš„æŸ¥è¯¢è¯­è¨€æ˜¯<strong>é¢å‘å¯¹è±¡</strong>è€Œéé¢å‘æ•°æ®åº“çš„ï¼Œå®ƒä»¥é¢å‘å¯¹è±¡çš„è‡ªç„¶è¯­æ³•æ„é€ æŸ¥è¯¢è¯­å¥ï¼Œå¯ä»¥çœ‹æˆæ˜¯Hibernate HQLçš„ç­‰ä»·ç‰©ã€‚JPAå®šä¹‰äº†ç‹¬ç‰¹çš„JPQLï¼ˆJava Persistence Query Languageï¼‰ï¼ŒJPQLæ˜¯EJB QLçš„ä¸€ç§æ‰©å±•ï¼Œå®ƒæ˜¯é’ˆå¯¹å®ä½“çš„ä¸€ç§æŸ¥è¯¢è¯­è¨€ï¼Œæ“ä½œå¯¹è±¡æ˜¯å®ä½“ï¼Œè€Œä¸æ˜¯å…³ç³»æ•°æ®åº“çš„è¡¨ï¼Œè€Œä¸”èƒ½å¤Ÿæ”¯æŒæ‰¹é‡æ›´æ–°å’Œä¿®æ”¹ã€JOINã€GROUP BYã€HAVING ç­‰é€šå¸¸åªæœ‰ SQL æ‰èƒ½å¤Ÿæä¾›çš„é«˜çº§æŸ¥è¯¢ç‰¹æ€§ï¼Œç”šè‡³è¿˜èƒ½å¤Ÿæ”¯æŒå­æŸ¥è¯¢ã€‚</p></li> <li><p><strong>é«˜çº§ç‰¹æ€§</strong></p> <p>JPA ä¸­èƒ½å¤Ÿæ”¯æŒé¢å‘å¯¹è±¡çš„é«˜çº§ç‰¹æ€§ï¼Œå¦‚ç±»ä¹‹é—´çš„ç»§æ‰¿ã€å¤šæ€å’Œç±»ä¹‹é—´çš„å¤æ‚å…³ç³»ï¼Œè¿™æ ·çš„æ”¯æŒèƒ½å¤Ÿè®©å¼€å‘è€…æœ€å¤§é™åº¦çš„ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ¨¡å‹è®¾è®¡ä¼ä¸šåº”ç”¨ï¼Œè€Œä¸éœ€è¦è‡ªè¡Œå¤„ç†è¿™äº›ç‰¹æ€§åœ¨å…³ç³»æ•°æ®åº“çš„æŒä¹…åŒ–ã€‚</p></li></ul> <h3 id="hibernate-ç®€ä»‹"><a href="#hibernate-ç®€ä»‹" class="header-anchor">#</a> Hibernate ç®€ä»‹</h3> <p>Hibernateæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå®ƒå¯¹JDBCè¿›è¡Œäº†éå¸¸<strong>è½»é‡çº§</strong>çš„å¯¹è±¡å°è£…ï¼Œå®ç°ç±»äº† JPA è§„èŒƒï¼Œå®ƒå°†POJOä¸æ•°æ®åº“è¡¨å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæ˜¯ä¸€ä¸ª<strong>å…¨è‡ªåŠ¨çš„ORMæ¡†æ¶</strong>ã€‚Hibernateå¯ä»¥è‡ªåŠ¨ç”ŸæˆSQLè¯­å¥ï¼Œè‡ªåŠ¨æ‰§è¡Œï¼Œä½¿å¾—Javaç¨‹åºå‘˜å¯ä»¥éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨å¯¹è±¡ç¼–ç¨‹æ€ç»´æ¥æ“çºµæ•°æ®åº“ã€‚</p> <h3 id="jpaã€hibernateã€jdbc-å…³ç³»-ğŸ”¥"><a href="#jpaã€hibernateã€jdbc-å…³ç³»-ğŸ”¥" class="header-anchor">#</a> JPAã€Hibernateã€JDBC å…³ç³» ğŸ”¥</h3> <p>JPAå’ŒHibernateçš„å…³ç³»å°±åƒJDBCå’ŒJDBCé©±åŠ¨çš„å…³ç³»ï¼ŒJPAæ˜¯è§„èŒƒï¼ŒHibernateé™¤äº†ä½œä¸ºORMæ¡†æ¶ä¹‹å¤–ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ç§JPAå®ç°ã€‚JPAæ€ä¹ˆå–ä»£Hibernateå‘¢ï¼ŸJDBCè§„èŒƒå¯ä»¥é©±åŠ¨åº•å±‚æ•°æ®åº“å—ï¼Ÿç­”æ¡ˆéƒ½æ˜¯å¦å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½¿ç”¨JPAè§„èŒƒè¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œåº•å±‚éœ€è¦Hibernateä½œä¸ºå…¶å®ç°ç±»å®Œæˆæ•°æ®æŒä¹…åŒ–å·¥ä½œã€‚</p> <p><img src="/assets/img/image-20201217220824953.47b008b3.png" alt="image-20201217220824953"></p> <h2 id="jpa-ç¯å¢ƒå‡†å¤‡"><a href="#jpa-ç¯å¢ƒå‡†å¤‡" class="header-anchor">#</a> JPA ç¯å¢ƒå‡†å¤‡</h2> <h3 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="header-anchor">#</a> ç›®æ ‡</h3> <p>å®ç°åŠŸèƒ½æ˜¯æ­å»º JPA ç¯å¢ƒï¼Œå¹¶å®ç°ä¸€æ¡æ•°æ®çš„å¢åˆ æ”¹æŸ¥</p> <h3 id="å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ"><a href="#å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ" class="header-anchor">#</a> å‡†å¤‡æ•°æ®åº“ç¯å¢ƒ</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å‡†å¤‡æ•°æ®åº“ï¼Œåˆ›å»ºä¸€å¼ æ–‡ç« è¡¨å¤‡ç”¨</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>article<span class="token punctuation">`</span> <span class="token punctuation">(</span>
    <span class="token punctuation">`</span>aid<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token punctuation">(</span> <span class="token number">11</span> <span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">auto_increment</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¸»é”®'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">255</span> <span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä½œè€…'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">255</span> <span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'æ ‡é¢˜'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>createTime<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'åˆ›å»ºæ—¶é—´'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>aid<span class="token punctuation">`</span> <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="åˆ›å»º-maven-å·¥ç¨‹"><a href="#åˆ›å»º-maven-å·¥ç¨‹" class="header-anchor">#</a> åˆ›å»º Maven å·¥ç¨‹</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--åŒ…æ‹¬ hibernate-core--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-entitymanager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.4.25.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!--&lt;dependency&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;groupId&gt;log4j&lt;/groupId&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;artifactId&gt;log4j&lt;/artifactId&gt;--&gt;</span>
<span class="token comment">&lt;!--    &lt;version&gt;1.2.17&lt;/version&gt;--&gt;</span>
<span class="token comment">&lt;!--&lt;/dependency&gt;--&gt;</span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.6.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>å…¶ä½™çš„ JDK 8 ä¹‹ç±»çš„å‚è€ƒ Maven ç¬”è®°ï¼</p> <h3 id="jpa-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#jpa-çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="header-anchor">#</a> JPA çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3> <p>åœ¨ Maven å·¥ç¨‹çš„<code>resources</code>è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>META-INF</code>çš„æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>persistence.xml</code>çš„é…ç½®æ–‡ä»¶ã€‚æ³¨æ„ï¼š<code>META-INF</code>æ–‡ä»¶å¤¹åç§°ä¸èƒ½ä¿®æ”¹ï¼Œ<code>persistence.xml</code>æ–‡ä»¶åç§°ä¸èƒ½æ”¹ã€‚</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>persistence</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/xml/ns/persistence<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://java.sun.com/xml/ns/persistence
             http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd<span class="token punctuation">&quot;</span></span>
             <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--æŒä¹…åŒ–å•å…ƒï¼Œå¯é…ç½®å¤šä¸ª
       name æŒä¹…åŒ–å•å…ƒçš„åç§° å”¯ä¸€
       transaction-type  äº‹åŠ¡ç±»å‹
            RESOURCE_LOCAL  æœ¬åœ°äº‹åŠ¡
            JTA   åˆ†å¸ƒå¼äº‹åŠ¡
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>persistence-unit</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jpa01<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RESOURCE_LOCAL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--é…ç½® JPA è§„èŒƒçš„æœåŠ¡æä¾›å•†,å½“é¡¹ç›®ä¸­ä¾èµ–çš„åªæœ‰ä¸€ä¸ªJPAçš„å®ç°æ—¶ï¼ˆå¦‚ Hibernateï¼‰,æ­¤é€‰é¡¹å¯çœç•¥--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>provider</span><span class="token punctuation">&gt;</span></span>org.hibernate.jpa.HibernatePersistenceProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>provider</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--æŒ‡å®šå®ä½“ç±»,æ­¤é€‰é¡¹å¯çœç•¥--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>top.conanan.domain.Article<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--è·Ÿæ•°æ®åº“ç›¸å…³çš„ä¿¡æ¯ é©±åŠ¨ url ç”¨æˆ·å å¯†ç ã€‚å¯ä» AvailableSettings ç±»ä¸­æ‰¾åˆ°nameçš„å€¼--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javax.persistence.jdbc.driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javax.persistence.jdbc.url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql:///demo?serverTimezone=GMT%2B8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javax.persistence.jdbc.user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javax.persistence.jdbc.password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w111111<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

            <span class="token comment">&lt;!--jpaçš„æ ¸å¿ƒé…ç½®ä¸­å…¼å®¹hibernateçš„é…ç½®ï¼ˆåªèƒ½ Hibernate ä½¿ç”¨ï¼‰--&gt;</span>
            <span class="token comment">&lt;!--æ˜¯å¦æ˜¾ç¤ºSQL--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.show_sql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--æ˜¯å¦æ ¼å¼åŒ–æ˜¾ç¤ºçš„SQL--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.format_sql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token comment">&lt;!--
                è‡ªåŠ¨å»ºè¡¨
                    update  å¦‚æœæ•°æ®åº“å­˜åœ¨æ•°æ®è¡¨,å°±ä½¿ç”¨;ä¸å­˜åœ¨,å°±åˆ›å»º
                    create  ä¸ç®¡æ•°æ®åº“æœ‰æ²¡æœ‰æ•°æ®è¡¨,æ¯æ¬¡SQLè¯·æ±‚éƒ½ä¼šé‡æ–°å»ºè¡¨
            --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hibernate.hbm2ddl.auto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>persistence-unit</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>persistence</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="é…ç½®å®ä½“ç±»ä¸è¡¨çš„æ˜ å°„å…³ç³»"><a href="#é…ç½®å®ä½“ç±»ä¸è¡¨çš„æ˜ å°„å…³ç³»" class="header-anchor">#</a> é…ç½®å®ä½“ç±»ä¸è¡¨çš„æ˜ å°„å…³ç³»</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Getter</span>
<span class="token annotation punctuation">@Setter</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@Entity</span> <span class="token comment">// å‘Šè¯‰ JPA è¿™æ˜¯ä¸€ä¸ªå®ä½“ç±»ï¼Œéœ€è¦æŠŠå®ƒè·Ÿæ•°æ®åº“ä¸­çš„è¡¨åšæ˜ å°„</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;article&quot;</span><span class="token punctuation">)</span><span class="token comment">//@Tableå»ºç«‹äº†å®ä½“ç±»å’Œæ•°æ®è¡¨çš„å…³ç³»ï¼ŒnameæŒ‡å‘è¡¨åã€‚å½“ç±»åå’Œæ•°æ®è¡¨çš„åä¸€è‡´æ—¶ï¼Œæ­¤æ³¨è§£å¯çœç•¥</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Article</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span><span class="token comment">//æ ‡è¯†è¿™æ˜¯ä¸»é”®å­—æ®µ</span>
    <span class="token comment">//æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ï¼ŒGenerationType.IDENTITYå°±æ˜¯å¯¹åº”åˆ°mysqlä¸­çš„æ•°æ®è‡ªå¢ç­–ç•¥</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>IDENTITY<span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> aid<span class="token punctuation">;</span>

    <span class="token comment">//ä½¿ç”¨@Columnæ˜ å°„ç±»çš„å±æ€§å’Œæ•°æ®è¡¨çš„å­—æ®µå…³ç³»  nameæŒ‡å®šè¡¨ä¸­çš„å­—æ®µå</span>
    <span class="token comment">//å½“ç±»çš„å±æ€§åå’Œæ•°æ®è¡¨çš„å­—æ®µåä¸€è‡´æ—¶ï¼Œæ­¤æ³¨è§£å¯çœç•¥</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;author&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> author<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> createTime<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="å·¥å…·ç±»-ğŸ”¥"><a href="#å·¥å…·ç±»-ğŸ”¥" class="header-anchor">#</a> å·¥å…·ç±» ğŸ”¥</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">JpaUtil</span> <span class="token punctuation">{</span>
    <span class="token comment">// JPAçš„å®ä½“ç®¡ç†å™¨å·¥å‚ï¼šç›¸å½“äºHibernateçš„SessionFactoryã€‚å·¥å‚ç±»çš„åˆ›å»ºååˆ†æ¶ˆè€—èµ„æºï¼Œä¸€èˆ¬åœ¨é¡¹ç›®ä¸­é…ç½®ä¸ºå•ä¾‹</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">EntityManagerFactory</span> em<span class="token punctuation">;</span>
    <span class="token comment">// ä½¿ç”¨é™æ€ä»£ç å—èµ‹å€¼</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ³¨æ„ï¼šè¯¥æ–¹æ³•å‚æ•°å¿…é¡»å’Œpersistence.xmlä¸­persistence-unitæ ‡ç­¾nameå±æ€§å–å€¼ä¸€è‡´</span>
        em <span class="token operator">=</span> <span class="token class-name">Persistence</span><span class="token punctuation">.</span><span class="token function">createEntityManagerFactory</span><span class="token punctuation">(</span><span class="token string">&quot;jpa01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * ä½¿ç”¨ç®¡ç†å™¨å·¥å‚ç”Ÿäº§ä¸€ä¸ªç®¡ç†å™¨å¯¹è±¡
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">EntityManager</span> <span class="token function">getEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> em<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="jpa-å¢åˆ æ”¹æŸ¥-ğŸ”¥"><a href="#jpa-å¢åˆ æ”¹æŸ¥-ğŸ”¥" class="header-anchor">#</a> JPA å¢åˆ æ”¹æŸ¥ ğŸ”¥</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Jpaçš„æ“ä½œæ­¥éª¤
 * 1.åŠ è½½é…ç½®æ–‡ä»¶åˆ›å»ºå·¥å‚ï¼ˆå®ä½“ç®¡ç†å™¨å·¥å‚ï¼‰å¯¹è±¡ EntityManagerFactory
 * 2.é€šè¿‡å®ä½“ç®¡ç†å™¨å·¥å‚è·å–å®ä½“ç®¡ç†å™¨ EntityManager
 * 3.è·å–äº‹åŠ¡å¯¹è±¡ï¼Œå¼€å¯äº‹åŠ¡ EntityTransaction
 * 4.å®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œï¼ˆæŸ¥è¯¢ä¸éœ€è¦äº‹åŠ¡ï¼‰
 * 5.æäº¤äº‹åŠ¡ï¼ˆå›æ»šäº‹åŠ¡ï¼‰
 * 6.é‡Šæ”¾ EntityManager èµ„æº
 */</span>
<span class="token keyword">class</span> <span class="token class-name">TestJpa</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">EntityManager</span> entityManager<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">EntityTransaction</span> transaction<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@BeforeEach</span>
    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//é€šè¿‡å·¥å…·ç±»è·å–EntityManagerå¯¹è±¡</span>
        entityManager <span class="token operator">=</span> <span class="token class-name">JpaUtil</span><span class="token punctuation">.</span><span class="token function">getEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–äº‹åŠ¡å¯¹è±¡ï¼Œæ ¹æ®éœ€è¦è°ƒç”¨ transaction.begin() å¼€å¯äº‹åŠ¡</span>
        transaction <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterEach</span>
    <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//é‡Šæ”¾èµ„æºï¼Œå·¥å‚å¯¹è±¡ä¸ç”¨é‡Šæ”¾ï¼Œå…¶ä»–æ–¹æ³•è¿˜éœ€è¦ä½¿ç”¨</span>
        entityManager<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testPersist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// åˆ›å»ºå¯¹è±¡</span>
        <span class="token class-name">Article</span> article <span class="token operator">=</span> <span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">author</span><span class="token punctuation">(</span><span class="token string">&quot;ç”·å“¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;æµ‹è¯•æ–‡ç« &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createTime</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¼€å¯äº‹åŠ¡</span>
            transaction<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// ä¿å­˜</span>
            entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æäº¤äº‹åŠ¡</span>
            transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            transaction<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * findä¸ºç«‹å³åŠ è½½
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testFind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦å°è£…çš„å¯¹è±¡çš„å­—èŠ‚ç ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸»é”®</span>
        <span class="token class-name">Article</span> article <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * getReferenceä¸ºå»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰ï¼Œä½¿ç”¨çš„æ—¶å€™æ‰æŸ¥è¯¢æ•°æ®åº“ã€‚ä¸€èˆ¬ä½¿ç”¨è¿™ä¸ªï¼ˆåºåˆ—åŒ–æ—¶å¯èƒ½æŠ¥é”™ï¼Ÿï¼‰
     * IDEAéœ€è¦å»æ‰Debugä¸­å‡ ä¸ªé€‰é¡¹æ‰å¯ä»¥çœ‹åˆ°
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testReference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Article</span> article <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">getReference</span><span class="token punctuation">(</span><span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testMerge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Article</span> article <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        article<span class="token punctuation">.</span><span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token string">&quot;ç”·ç¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¼€å¯äº‹åŠ¡</span>
            transaction<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ›´æ–°ï¼ˆæ³¨æ„ï¼Œå®ä½“ç±»ä¸­å½“å‰ä¸ºnullçš„å­—æ®µä¹Ÿä¼šè¢«æ›´æ–°ä¸ºnullï¼Œå¯ä»¥é…ç½®æ›´æ”¹è¯¥ç­–ç•¥ï¼‰</span>
            entityManager<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æäº¤äº‹åŠ¡</span>
            transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            transaction<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testRemove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Article</span> article <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">3L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¼€å¯äº‹åŠ¡</span>
            transaction<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// åˆ é™¤</span>
            entityManager<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æäº¤äº‹åŠ¡</span>
            transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            transaction<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br></div></div><h2 id="jpql-å¢åˆ æ”¹æŸ¥-ğŸ”¥"><a href="#jpql-å¢åˆ æ”¹æŸ¥-ğŸ”¥" class="header-anchor">#</a> JPQL å¢åˆ æ”¹æŸ¥ ğŸ”¥</h2> <p>æ­¤å¤„ç¤ºä¾‹åªæ¼”ç¤ºæŸ¥è¯¢</p> <p>JPQLï¼ˆJava Persistence Query Languageï¼‰ã€‚åŸºäºé¦–æ¬¡åœ¨EJB2.0ä¸­å¼•å…¥çš„EJBæŸ¥è¯¢è¯­è¨€(EJB QL)ï¼ŒJavaæŒä¹…åŒ–æŸ¥è¯¢è¯­è¨€(JPQL)æ˜¯ä¸€ç§å¯ç§»æ¤çš„æŸ¥è¯¢è¯­è¨€ï¼Œæ—¨åœ¨ä»¥é¢å‘å¯¹è±¡è¡¨è¾¾å¼è¯­è¨€çš„è¡¨è¾¾å¼ï¼Œå°†SQLè¯­æ³•å’Œç®€å•æŸ¥è¯¢è¯­ä¹‰ç»‘å®šåœ¨ä¸€èµ·ï¼Œä½¿ç”¨è¿™ç§è¯­è¨€ç¼–å†™çš„æŸ¥è¯¢æ˜¯å¯ç§»æ¤çš„ï¼Œå¯ä»¥è¢«ç¼–è¯‘æˆæ‰€æœ‰ä¸»æµæ•°æ®åº“æœåŠ¡å™¨ä¸Šçš„SQLã€‚é¿å…äº†ç¨‹åºä¸æ•°æ®åº“ SQL è¯­å¥è€¦åˆä¸¥é‡ï¼Œæ¯”è¾ƒé€‚åˆè·¨æ•°æ®æºçš„åœºæ™¯ï¼ˆä¸€ä¼šå„¿ MySQLï¼Œä¸€ä¼šå„¿ Oracle ç­‰ï¼‰</p> <p>å…¶ç‰¹å¾ä¸åŸç”ŸSQLè¯­å¥ç±»ä¼¼ï¼Œå¹¶ä¸”å®Œå…¨<strong>é¢å‘å¯¹è±¡</strong>ï¼Œé€šè¿‡<strong>ç±»å</strong>å’Œ<strong>å±æ€§</strong>è®¿é—®ï¼Œè€Œ<strong>ä¸æ˜¯è¡¨åå’Œè¡¨ä¸­å­—æ®µ</strong>ã€‚ä¸æ”¯æŒ<code>SELECT *</code>ï¼Œä½†æ˜¯æ”¯æŒ<code>COUNT(*)</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * Jpaçš„æ“ä½œæ­¥éª¤
 * 1.åŠ è½½é…ç½®æ–‡ä»¶åˆ›å»ºå·¥å‚ï¼ˆå®ä½“ç®¡ç†å™¨å·¥å‚ï¼‰å¯¹è±¡ EntityManagerFactory
 * 2.é€šè¿‡å®ä½“ç®¡ç†å™¨å·¥å‚è·å–å®ä½“ç®¡ç†å™¨ EntityManager
 * 3.è·å–äº‹åŠ¡å¯¹è±¡ï¼Œå¼€å¯äº‹åŠ¡ EntityTransaction
 * 4.å®Œæˆå¢åˆ æ”¹æŸ¥æ“ä½œï¼ˆæŸ¥è¯¢ä¸éœ€è¦äº‹åŠ¡ï¼‰
 * 5.æäº¤äº‹åŠ¡ï¼ˆå›æ»šäº‹åŠ¡ï¼‰
 * 6.é‡Šæ”¾ EntityManager èµ„æº
 */</span>
<span class="token keyword">class</span> <span class="token class-name">TestJpql</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">EntityManager</span> entityManager<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">EntityTransaction</span> transaction<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@BeforeEach</span>
    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//é€šè¿‡å·¥å…·ç±»è·å–EntityManagerå¯¹è±¡</span>
        entityManager <span class="token operator">=</span> <span class="token class-name">JpaUtil</span><span class="token punctuation">.</span><span class="token function">getEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–äº‹åŠ¡å¯¹è±¡ï¼Œæ ¹æ®éœ€è¦è°ƒç”¨ transaction.begin() å¼€å¯äº‹åŠ¡</span>
        transaction <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterEach</span>
    <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//é‡Šæ”¾èµ„æºï¼Œå·¥å‚å¯¹è±¡ä¸ç”¨é‡Šæ”¾ï¼Œå…¶ä»–æ–¹æ³•è¿˜éœ€è¦ä½¿ç”¨</span>
        entityManager<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * æŸ¥æ‰¾æ‰€æœ‰
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> jpql <span class="token operator">=</span> <span class="token string">&quot;from Article&quot;</span><span class="token punctuation">;</span><span class="token comment">//ä¹Ÿå¯ä»¥çœç•¥æ‰å…¨é™å®šç±»åï¼Œåªå†™ç±»å</span>
        <span class="token comment">//åˆ›å»ºQueryæŸ¥è¯¢å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ‰æ˜¯æ‰§è¡Œjpqlçš„å¯¹è±¡</span>
        <span class="token class-name">TypedQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>jpql<span class="token punctuation">,</span> <span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> articles <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">getResultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        articles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’åºæŸ¥è¯¢ï¼ˆæ ¹æ®IDå€’åºæŸ¥è¯¢æ‰€æœ‰æ–‡ç« ï¼‰
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> jpql <span class="token operator">=</span> <span class="token string">&quot;from Article order by aid desc&quot;</span><span class="token punctuation">;</span><span class="token comment">//ä¹Ÿå¯ä»¥çœç•¥æ‰å…¨é™å®šç±»åï¼Œåªå†™ç±»åã€‚è¿™é‡Œçš„aidä¹Ÿå¯ä»¥å†™idï¼Œå› ä¸ºæ˜¯@Idæ³¨è§£äº†</span>
        <span class="token comment">//åˆ›å»ºQueryæŸ¥è¯¢å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ‰æ˜¯æ‰§è¡Œjpqlçš„å¯¹è±¡</span>
        <span class="token class-name">TypedQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>jpql<span class="token punctuation">,</span> <span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> articles <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">getResultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        articles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * ç»Ÿè®¡æŸ¥è¯¢
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> jpql <span class="token operator">=</span> <span class="token string">&quot;select count(id) from Article &quot;</span><span class="token punctuation">;</span><span class="token comment">//ä¹Ÿå¯ä»¥çœç•¥æ‰å…¨é™å®šç±»åï¼Œåªå†™ç±»å</span>
        <span class="token comment">//åˆ›å»ºQueryæŸ¥è¯¢å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ‰æ˜¯æ‰§è¡Œjpqlçš„å¯¹è±¡</span>
        <span class="token class-name">TypedQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>jpql<span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Long</span> count <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">getSingleResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * åˆ†é¡µæŸ¥è¯¢
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> jpql <span class="token operator">=</span> <span class="token string">&quot;from Article &quot;</span><span class="token punctuation">;</span><span class="token comment">//ä¹Ÿå¯ä»¥çœç•¥æ‰å…¨é™å®šç±»åï¼Œåªå†™ç±»å</span>
        <span class="token comment">//åˆ›å»ºQueryæŸ¥è¯¢å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ‰æ˜¯æ‰§è¡Œjpqlçš„å¯¹è±¡</span>
        <span class="token class-name">TypedQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>jpql<span class="token punctuation">,</span> <span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        query<span class="token punctuation">.</span><span class="token function">setFirstResult</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//èµ·å§‹ç´¢å¼•</span>
        query<span class="token punctuation">.</span><span class="token function">setMaxResults</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ¯é¡µæŸ¥è¯¢æ¡æ•°</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> articles <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">getResultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//æ­¤å¤„ä¸ºæŸ¥è¯¢å‰5æ¡</span>
        articles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ¡ä»¶æŸ¥è¯¢
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> jpql <span class="token operator">=</span> <span class="token string">&quot;from Article where author like ?2&quot;</span><span class="token punctuation">;</span><span class="token comment">//ä¹Ÿå¯ä»¥çœç•¥æ‰å…¨é™å®šç±»åï¼Œåªå†™ç±»å</span>
        <span class="token comment">//åˆ›å»ºQueryæŸ¥è¯¢å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ‰æ˜¯æ‰§è¡Œjpqlçš„å¯¹è±¡</span>
        <span class="token class-name">TypedQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> query <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>jpql<span class="token punctuation">,</span> <span class="token class-name">Article</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;å¥³%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç¬¬1ä¸ªå‚æ•°ï¼šå ä½ç¬¦ç´¢å¼•ä½ç½®ï¼Œæ ¹æ®?nå†™å³å¯ï¼›ç¬¬2ä¸ªå‚æ•°ï¼šå€¼</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Article</span><span class="token punctuation">&gt;</span></span> articles <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">getResultList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        articles<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br></div></div><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="header-anchor">#</a> æ³¨æ„</h2> <h3 id="find-ä¸-getreference-åŒºåˆ«"><a href="#find-ä¸-getreference-åŒºåˆ«" class="header-anchor">#</a> find ä¸ getReference åŒºåˆ«</h3> <ul><li>findï¼š<strong>ç«‹å³åŠ è½½</strong>ã€‚debugæ‰§è¡Œå‘ç°è°ƒç”¨æ–¹æ³•åå°±ä¼šå‘é€sqlæŸ¥è¯¢æ•°æ®åº“ï¼Œä¸”æŸ¥è¯¢å¾—åˆ°çš„å¯¹è±¡å°±æ˜¯è¯¥<strong>å¯¹è±¡æœ¬èº«</strong></li> <li>getReferenceï¼š<strong>å»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰</strong>ã€‚debugæ‰§è¡Œå‘ç°è°ƒç”¨æ–¹æ³•å<strong>ä¸ä¼šç«‹å³æŸ¥è¯¢æ•°æ®åº“</strong>ï¼Œåªä¼šåœ¨<strong>ä½¿ç”¨è¯¥å¯¹è±¡æ—¶æ‰å‘é€sqlæŸ¥è¯¢æ•°æ®åº“</strong>ï¼Œå¹¶ä¸”æŸ¥è¯¢<strong>å¾—åˆ°çš„å¯¹è±¡æ˜¯åŠ¨æ€ä»£ç†ç”Ÿæˆçš„</strong>å¯¹è±¡ï¼</li></ul> <p>æ³¨æ„ï¼ŒIDEAæ¯”è¾ƒæ™ºèƒ½ï¼Œè°ƒç”¨æ–¹æ³•ådebugä¼šæ˜¾ç¤ºå€¼ï¼Œæ‰€ä»¥ä¼šç«‹å³å‘é€sqlã€‚å¯ä»¥ä¿®æ”¹è®¾ç½®ä¸­çš„ Debugger - Data Views - Java ä¸­çš„é…ç½®ï¼Œå»æ‰æ‰€æœ‰é€‰é¡¹åŸºæœ¬å°±å¯ä»¥äº†</p> <h2 id="jpa-é‡è¦-api-ä»‹ç»"><a href="#jpa-é‡è¦-api-ä»‹ç»" class="header-anchor">#</a> JPA é‡è¦ API ä»‹ç»</h2> <h3 id="persistence"><a href="#persistence" class="header-anchor">#</a> Persistence</h3> <p><code>Persistence</code>å¯¹è±¡ä¸»è¦ä½œç”¨æ˜¯ç”¨äº<strong>è·å–</strong><code>EntityManagerFactory</code>å¯¹è±¡çš„ ã€‚é€šè¿‡è°ƒç”¨è¯¥ç±»çš„<code>createEntityManagerFactory()</code>é™æ€æ–¹æ³•ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­<strong>æŒä¹…åŒ–å•å…ƒåç§°</strong>åˆ›å»º<code>EntityManagerFactory</code>ã€‚</p> <h3 id="entitymanagerfactory-ğŸ”¥"><a href="#entitymanagerfactory-ğŸ”¥" class="header-anchor">#</a> EntityManagerFactory ğŸ”¥</h3> <p><code>EntityManagerFactory</code> æ¥å£ä¸»è¦ç”¨<code>createEntityManager()</code>æ¥åˆ›å»º <code>EntityManager</code> å®ä¾‹ï¼Œç”±äºå®ƒæ˜¯ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨</strong>çš„å¯¹è±¡ï¼ˆå³å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªè¯¥å¯¹è±¡ä¸ä¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰</p> <p>å…¶å†…éƒ¨ç»´æŠ¤äº†å¾ˆå¤šå†…å®¹ï¼š</p> <ul><li>æ•°æ®åº“ä¿¡æ¯</li> <li>ç¼“å­˜ä¿¡æ¯</li> <li>æ‰€æœ‰çš„å®ä½“ç®¡ç†å™¨å¯¹è±¡</li></ul> <p>å› æ­¤åˆ›å»º<code>EntityManagerFactory</code> æå…¶<strong>æµªè´¹èµ„æº</strong>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ JPA ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶åˆ›å»ºè¿›è¡Œä¼˜åŒ–ï¼ˆå®ƒæ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„ï¼‰ï¼Œåªéœ€è¦åšåˆ°<strong>ä¸€ä¸ªå·¥ç¨‹åªå­˜åœ¨ä¸€ä¸ª<code>EntityManagerFactory</code> ï¼Œå³åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºå¥½</strong></p> <h3 id="entitymanager-ğŸ”¥"><a href="#entitymanager-ğŸ”¥" class="header-anchor">#</a> EntityManager ğŸ”¥</h3> <p>åœ¨ JPA è§„èŒƒä¸­, <code>EntityManager</code>æ˜¯<strong>å®ŒæˆæŒä¹…åŒ–æ“ä½œçš„æ ¸å¿ƒå¯¹è±¡</strong>ã€‚å®ä½“ç±»ä½œä¸ºæ™®é€š Java å¯¹è±¡ï¼Œåªæœ‰åœ¨è°ƒç”¨<code>EntityManager</code>å°†å…¶æŒä¹…åŒ–åæ‰ä¼šå˜æˆæŒä¹…åŒ–å¯¹è±¡ã€‚<strong>EntityManager å¯¹è±¡åœ¨ä¸€ç»„å®ä½“ç±»ä¸åº•å±‚æ•°æ®æºä¹‹é—´è¿›è¡Œ O/R æ˜ å°„çš„ç®¡ç†</strong>ã€‚å®ƒå¯ä»¥ç”¨æ¥ç®¡ç†å’Œæ›´æ–° Entity Bean, æ ¹æ¤ä¸»é”®æŸ¥æ‰¾ Entity Bean, è¿˜å¯ä»¥é€šè¿‡ JPQL è¯­å¥æŸ¥è¯¢å®ä½“ç­‰ã€‚</p> <p>å…¶å†…éƒ¨ç»´æŠ¤äº†</p> <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>EntityManager</code>çš„æ–¹æ³•å®Œæˆ<strong>è·å–äº‹åŠ¡</strong>ï¼Œä»¥åŠ<strong>æŒä¹…åŒ–æ•°æ®åº“</strong>çš„æ“ä½œ</p> <ul><li><code>getTransaction</code> : è·å–äº‹åŠ¡å¯¹è±¡</li> <li><code>persist</code> ï¼š ä¿å­˜æ“ä½œ</li> <li><code>find/getReference</code> ï¼š æ ¹æ® id æŸ¥è¯¢</li> <li><code>merge</code> ï¼š æ›´æ–°æ“ä½œ</li> <li><code>remove</code> ï¼š åˆ é™¤æ“ä½œ</li></ul> <h3 id="entitytransaction"><a href="#entitytransaction" class="header-anchor">#</a> EntityTransaction</h3> <p>åœ¨ JPA è§„èŒƒä¸­ EntityTransaction æ˜¯<strong>å®Œæˆäº‹åŠ¡æ“ä½œçš„æ ¸å¿ƒå¯¹è±¡</strong>ï¼Œå¯¹äº EntityTransaction åœ¨æˆ‘ä»¬çš„ Java ä»£ç ä¸­æ‰¿æ¥çš„åŠŸèƒ½æ¯”è¾ƒç®€å•</p> <ul><li><code>begin</code>ï¼šå¼€å¯äº‹åŠ¡</li> <li><code>commit</code>ï¼šæäº¤äº‹åŠ¡</li> <li><code>rollback</code>ï¼šå›æ»šäº‹åŠ¡</li></ul> <h2 id="jpa-å¸¸ç”¨æ³¨è§£"><a href="#jpa-å¸¸ç”¨æ³¨è§£" class="header-anchor">#</a> JPA å¸¸ç”¨æ³¨è§£</h2> <h3 id="entity"><a href="#entity" class="header-anchor">#</a> @Entity</h3> <p>ä½œç”¨ï¼šæŒ‡å®šå½“å‰ç±»æ˜¯<strong>å®ä½“ç±»</strong>ã€‚</p> <h3 id="table"><a href="#table" class="header-anchor">#</a> @Table</h3> <p>ä½œç”¨ï¼šæŒ‡å®š<strong>å®ä½“ç±»å’Œè¡¨ä¹‹é—´çš„å¯¹åº”å…³ç³»</strong>ã€‚</p> <p>å±æ€§ï¼š</p> <ul><li><code>name</code>ï¼šæŒ‡å®šæ•°æ®åº“<strong>è¡¨çš„åç§°</strong>ï¼Œä¸æŒ‡å®šåˆ™ä¸ºç±»åé¦–å­—æ¯å°å†™</li></ul> <h3 id="id"><a href="#id" class="header-anchor">#</a> @Id</h3> <p>ä½œç”¨ï¼šæŒ‡å®šå½“å‰å­—æ®µæ˜¯<strong>ä¸»é”®</strong>ã€‚</p> <h3 id="generatedvalue"><a href="#generatedvalue" class="header-anchor">#</a> @GeneratedValue</h3> <p>ä½œç”¨ï¼šæŒ‡å®š<strong>ä¸»é”®çš„ç”Ÿæˆç­–ç•¥</strong>ã€‚</p> <p>å±æ€§ï¼š</p> <ul><li><code>strategy</code>ï¼šæŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚JPAæä¾›çš„å››ç§æ ‡å‡†ç”¨æ³•ä¸º<code>TABLE</code>,<code>SEQUENCE</code>,<code>IDENTITY</code>,<code>AUTO</code>ã€‚</li></ul> <p><code>strategy</code> å€¼ä»‹ç»ï¼š</p> <ul><li><p><code>IDENTITY</code>ï¼šä¸»é”®ç”±æ•°æ®åº“<strong>è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼ˆä¸»è¦æ˜¯è‡ªåŠ¨å¢é•¿å‹ï¼Œå¿…é¡»æ•°æ®åº“åº•å±‚æ”¯æŒï¼Œå¦‚MySQLï¼‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Id</span>  
<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>IDENTITY<span class="token punctuation">)</span> 
<span class="token keyword">private</span> <span class="token class-name">Long</span> custId<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><strong><code>SEQUENCE</code></strong>ï¼šæ ¹æ®åº•å±‚æ•°æ®åº“çš„<strong>åºåˆ—</strong>æ¥ç”Ÿæˆä¸»é”®ï¼Œæ¡ä»¶æ˜¯æ•°æ®åº“æ”¯æŒåºåˆ—ï¼Œå¦‚Oracleã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Id</span>  
<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>SEQUENCE<span class="token punctuation">,</span>generator<span class="token operator">=</span><span class="token string">&quot;payablemoney_seq&quot;</span><span class="token punctuation">)</span>  
<span class="token annotation punctuation">@SequenceGenerator</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;payablemoney_seq&quot;</span><span class="token punctuation">,</span> sequenceName<span class="token operator">=</span><span class="token string">&quot;seq_payment&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">private</span> <span class="token class-name">Long</span> custId<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//@SequenceGeneratoræºç ä¸­çš„å®šä¹‰</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>TYPE<span class="token punctuation">,</span> METHOD<span class="token punctuation">,</span> FIELD<span class="token punctuation">}</span><span class="token punctuation">)</span>   
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>  
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SequenceGenerator</span> <span class="token punctuation">{</span>  
    <span class="token comment">//è¡¨ç¤ºè¯¥è¡¨ä¸»é”®ç”Ÿæˆç­–ç•¥çš„åç§°ï¼Œå®ƒè¢«å¼•ç”¨åœ¨@GeneratedValueä¸­è®¾ç½®çš„â€œgeneratorâ€å€¼ä¸­</span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">//å±æ€§è¡¨ç¤ºç”Ÿæˆç­–ç•¥ç”¨åˆ°çš„æ•°æ®åº“åºåˆ—åç§°ã€‚</span>
    <span class="token class-name">String</span> <span class="token function">sequenceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token comment">//è¡¨ç¤ºä¸»é”®åˆè¯†å€¼ï¼Œé»˜è®¤ä¸º0</span>
    <span class="token keyword">int</span> <span class="token function">initialValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token comment">//è¡¨ç¤ºæ¯æ¬¡ä¸»é”®å€¼å¢åŠ çš„å¤§å°ï¼Œä¾‹å¦‚è®¾ç½®1ï¼Œåˆ™è¡¨ç¤ºæ¯æ¬¡æ’å…¥æ–°è®°å½•åè‡ªåŠ¨åŠ 1ï¼Œé»˜è®¤ä¸º50</span>
    <span class="token keyword">int</span> <span class="token function">allocationSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">50</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p><code>TABLE</code>ï¼šä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è¡¨æ ¼æ¥ä¿å­˜ä¸»é”®ï¼ˆå¥½éº»çƒ¦ã€‚ã€‚ã€‚ï¼‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Id</span>  
<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>TABLE<span class="token punctuation">,</span> generator<span class="token operator">=</span><span class="token string">&quot;payablemoney_gen&quot;</span><span class="token punctuation">)</span>  
<span class="token annotation punctuation">@TableGenerator</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pk_gen&quot;</span><span class="token punctuation">,</span>  
                table<span class="token operator">=</span><span class="token string">&quot;tb_generator&quot;</span><span class="token punctuation">,</span>  
                pkColumnName<span class="token operator">=</span><span class="token string">&quot;gen_name&quot;</span><span class="token punctuation">,</span>  
                valueColumnName<span class="token operator">=</span><span class="token string">&quot;gen_value&quot;</span><span class="token punctuation">,</span>  
                pkColumnValue<span class="token operator">=</span><span class="token string">&quot;PAYABLEMOENY_PK&quot;</span><span class="token punctuation">,</span>  
                allocationSize<span class="token operator">=</span><span class="token number">1</span>  
               <span class="token punctuation">)</span> 
<span class="token keyword">private</span> <span class="token class-name">Long</span> custId<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//@TableGeneratorçš„å®šä¹‰ï¼š</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span>TYPE<span class="token punctuation">,</span> METHOD<span class="token punctuation">,</span> FIELD<span class="token punctuation">}</span><span class="token punctuation">)</span>   
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>  
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">TableGenerator</span> <span class="token punctuation">{</span>  
    <span class="token comment">//è¡¨ç¤ºè¯¥è¡¨ä¸»é”®ç”Ÿæˆç­–ç•¥çš„åç§°ï¼Œå®ƒè¢«å¼•ç”¨åœ¨@GeneratedValueä¸­è®¾ç½®çš„â€œgeneratorâ€å€¼ä¸­</span>
    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">//è¡¨ç¤ºè¡¨ç”Ÿæˆç­–ç•¥æ‰€æŒä¹…åŒ–çš„è¡¨åï¼Œä¾‹å¦‚ï¼Œè¿™é‡Œè¡¨ä½¿ç”¨çš„æ˜¯æ•°æ®åº“ä¸­çš„â€œtb_generatorâ€ã€‚</span>
    <span class="token class-name">String</span> <span class="token function">table</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token comment">//catalogå’Œschemaå…·ä½“æŒ‡å®šè¡¨æ‰€åœ¨çš„ç›®å½•åæˆ–æ˜¯æ•°æ®åº“å</span>
    <span class="token class-name">String</span> <span class="token function">catalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token class-name">String</span> <span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token comment">//å±æ€§çš„å€¼è¡¨ç¤ºåœ¨æŒä¹…åŒ–è¡¨ä¸­ï¼Œè¯¥ä¸»é”®ç”Ÿæˆç­–ç•¥æ‰€å¯¹åº”é”®å€¼çš„åç§°ã€‚ä¾‹å¦‚åœ¨â€œtb_generatorâ€ä¸­å°†â€œgen_nameâ€ä½œä¸ºä¸»é”®çš„é”®å€¼</span>
    <span class="token class-name">String</span> <span class="token function">pkColumnName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token comment">//å±æ€§çš„å€¼è¡¨ç¤ºåœ¨æŒä¹…åŒ–è¡¨ä¸­ï¼Œè¯¥ä¸»é”®å½“å‰æ‰€ç”Ÿæˆçš„å€¼ï¼Œå®ƒçš„å€¼å°†ä¼šéšç€æ¯æ¬¡åˆ›å»ºç´¯åŠ ã€‚ä¾‹å¦‚ï¼Œåœ¨â€œtb_generatorâ€ä¸­å°†â€œgen_valueâ€ä½œä¸ºä¸»é”®çš„å€¼ </span>
    <span class="token class-name">String</span> <span class="token function">valueColumnName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token comment">//å±æ€§çš„å€¼è¡¨ç¤ºåœ¨æŒä¹…åŒ–è¡¨ä¸­ï¼Œè¯¥ç”Ÿæˆç­–ç•¥æ‰€å¯¹åº”çš„ä¸»é”®ã€‚ä¾‹å¦‚åœ¨â€œtb_generatorâ€è¡¨ä¸­ï¼Œå°†â€œgen_nameâ€çš„å€¼ä¸ºâ€œCUSTOMER_PKâ€ã€‚ </span>
    <span class="token class-name">String</span> <span class="token function">pkColumnValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>  
    <span class="token comment">//è¡¨ç¤ºä¸»é”®åˆè¯†å€¼ï¼Œé»˜è®¤ä¸º0ã€‚ </span>
    <span class="token keyword">int</span> <span class="token function">initialValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token comment">//è¡¨ç¤ºæ¯æ¬¡ä¸»é”®å€¼å¢åŠ çš„å¤§å°ï¼Œä¾‹å¦‚è®¾ç½®æˆ1ï¼Œåˆ™è¡¨ç¤ºæ¯æ¬¡åˆ›å»ºæ–°è®°å½•åè‡ªåŠ¨åŠ 1ï¼Œé»˜è®¤ä¸º50ã€‚</span>
    <span class="token keyword">int</span> <span class="token function">allocationSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token number">50</span><span class="token punctuation">;</span>  
    <span class="token class-name">UniqueConstraint</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">uniqueConstraints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> 
<span class="token comment">/*==================================================================*/</span>
<span class="token comment">//è¿™é‡Œåº”ç”¨è¡¨tb_generatorï¼Œå®šä¹‰ä¸º ï¼š</span>
CREATE <span class="token class-name">TABLE</span>  tb_generator <span class="token punctuation">(</span>  
    id NUMBER <span class="token class-name">NOT</span> NULL<span class="token punctuation">,</span>  
    gen_name <span class="token function">VARCHAR2</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token class-name">NOT</span> NULL<span class="token punctuation">,</span>  
    gen_value NUMBER <span class="token class-name">NOT</span> NULL<span class="token punctuation">,</span>  
    <span class="token class-name">PRIMARY</span> <span class="token function">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>  
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div></li> <li><p><code>AUTO</code>ï¼šä¸»é”®ç”±ç¨‹åºè‡ªåŠ¨æ§åˆ¶ï¼Œå¦‚æ•°æ®åº“ï¼Œç¯å¢ƒç­‰ï¼ˆæµ‹è¯•äº†ä¸‹MySQLä½¿ç”¨çš„æ˜¯TABLEï¼‰</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Id</span>  
<span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span>  
<span class="token keyword">private</span> <span class="token class-name">Long</span> custId<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="column"><a href="#column" class="header-anchor">#</a> @Column</h3> <p>ä½œç”¨ï¼šæŒ‡å®šå®ä½“ç±»å±æ€§å’Œæ•°æ®åº“è¡¨ä¹‹é—´çš„å¯¹åº”å…³ç³»</p> <p>å±æ€§ï¼š</p> <ul><li><code>name</code>ï¼šæŒ‡å®šæ•°æ®åº“è¡¨çš„åˆ—åç§°ã€‚ä¸æŒ‡å®šåˆ™ä¸ºå±æ€§å</li> <li><code>unique</code>ï¼šæ˜¯å¦å”¯ä¸€</li> <li><code>nullable</code>ï¼šæ˜¯å¦å¯ä»¥ä¸ºç©º</li> <li><code>inserttable</code>ï¼šæ˜¯å¦å¯ä»¥æ’å…¥</li> <li><code>updateable</code>ï¼šæ˜¯å¦å¯ä»¥æ›´æ–°</li> <li><code>columnDefinition</code>: å®šä¹‰å»ºè¡¨æ—¶åˆ›å»ºæ­¤åˆ—çš„DDL</li> <li><code>secondaryTable</code>: ä»è¡¨åã€‚å¦‚æœæ­¤åˆ—ä¸å»ºåœ¨ä¸»è¡¨ä¸Šï¼ˆé»˜è®¤å»ºåœ¨ä¸»è¡¨ï¼‰ï¼Œè¯¥å±æ€§å®šä¹‰è¯¥åˆ—æ‰€åœ¨ä»è¡¨çš„åå­—æ­å»ºå¼€å‘ç¯å¢ƒğŸ”¥</li></ul></div></div> <div class="page-slot page-slot-bottom"><!-- æ¨ªå‘è‡ªé€‚åº” -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/master/docs/200.Java Web/600.SpringDataJPA/401.JPAåŸºç¡€.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2021/06/21, 15:45:42</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/0ac831/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Log</div></a> <a href="/pages/5427c0/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">æ€»è§ˆå…¥é—¨</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/0ac831/" class="prev">Log</a></span> <span class="next"><a href="/pages/5427c0/">æ€»è§ˆå…¥é—¨</a>â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/7fcc72/"><div>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</div></a> <span>07-06</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/a4ef99/"><div>çº¿ç¨‹å®‰å…¨ç†è®º</div></a> <span>06-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/890a0b/"><div>å¹¶å‘ç®€å²</div></a> <span>06-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2019-2021
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">Ã—</i> <div><!-- å›ºå®š160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.ac5e3ef4.js" defer></script><script src="/assets/js/2.d960b235.js" defer></script><script src="/assets/js/68.c29f5efe.js" defer></script>
  </body>
</html>