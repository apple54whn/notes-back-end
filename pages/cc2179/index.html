<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>string | conanan&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.03260d1f.css" as="style"><link rel="preload" href="/assets/js/app.ac5e3ef4.js" as="script"><link rel="preload" href="/assets/js/2.d960b235.js" as="script"><link rel="preload" href="/assets/js/23.fd9e2f2e.js" as="script"><link rel="prefetch" href="/assets/js/10.949143aa.js"><link rel="prefetch" href="/assets/js/100.122fb3a2.js"><link rel="prefetch" href="/assets/js/101.88060c8d.js"><link rel="prefetch" href="/assets/js/102.06832b28.js"><link rel="prefetch" href="/assets/js/103.a0c17aef.js"><link rel="prefetch" href="/assets/js/104.b38ef641.js"><link rel="prefetch" href="/assets/js/105.603033e4.js"><link rel="prefetch" href="/assets/js/106.6b288074.js"><link rel="prefetch" href="/assets/js/107.1ffec4c0.js"><link rel="prefetch" href="/assets/js/108.c7b79afa.js"><link rel="prefetch" href="/assets/js/109.dda9fbee.js"><link rel="prefetch" href="/assets/js/11.326a1f58.js"><link rel="prefetch" href="/assets/js/110.920cbe6e.js"><link rel="prefetch" href="/assets/js/111.45bfe7f2.js"><link rel="prefetch" href="/assets/js/112.1f11c570.js"><link rel="prefetch" href="/assets/js/113.fab1cc04.js"><link rel="prefetch" href="/assets/js/114.21ea4ed6.js"><link rel="prefetch" href="/assets/js/115.96f65264.js"><link rel="prefetch" href="/assets/js/116.b324c49b.js"><link rel="prefetch" href="/assets/js/117.dc4d308c.js"><link rel="prefetch" href="/assets/js/118.8f152d6d.js"><link rel="prefetch" href="/assets/js/119.ede5fffc.js"><link rel="prefetch" href="/assets/js/12.23122444.js"><link rel="prefetch" href="/assets/js/120.044161d7.js"><link rel="prefetch" href="/assets/js/121.453c745a.js"><link rel="prefetch" href="/assets/js/122.e3b088eb.js"><link rel="prefetch" href="/assets/js/123.d5a90d16.js"><link rel="prefetch" href="/assets/js/124.7731d89c.js"><link rel="prefetch" href="/assets/js/125.e64126c4.js"><link rel="prefetch" href="/assets/js/126.e46361b1.js"><link rel="prefetch" href="/assets/js/127.067ae046.js"><link rel="prefetch" href="/assets/js/128.59df2a2f.js"><link rel="prefetch" href="/assets/js/129.a2b82230.js"><link rel="prefetch" href="/assets/js/13.6780e0cd.js"><link rel="prefetch" href="/assets/js/130.c20833b9.js"><link rel="prefetch" href="/assets/js/131.da020742.js"><link rel="prefetch" href="/assets/js/132.e20ac455.js"><link rel="prefetch" href="/assets/js/133.f114b097.js"><link rel="prefetch" href="/assets/js/134.49de9e80.js"><link rel="prefetch" href="/assets/js/135.1a24633f.js"><link rel="prefetch" href="/assets/js/136.d5853212.js"><link rel="prefetch" href="/assets/js/137.3a1020dd.js"><link rel="prefetch" href="/assets/js/138.f194f86d.js"><link rel="prefetch" href="/assets/js/139.bf8c1ca0.js"><link rel="prefetch" href="/assets/js/14.08edf279.js"><link rel="prefetch" href="/assets/js/140.c800f5e0.js"><link rel="prefetch" href="/assets/js/141.47afa8e4.js"><link rel="prefetch" href="/assets/js/142.fda2db61.js"><link rel="prefetch" href="/assets/js/143.0224a2e5.js"><link rel="prefetch" href="/assets/js/144.4126fe8d.js"><link rel="prefetch" href="/assets/js/145.9fe0839a.js"><link rel="prefetch" href="/assets/js/146.89a9e1b2.js"><link rel="prefetch" href="/assets/js/147.56419b8e.js"><link rel="prefetch" href="/assets/js/148.03d2b50f.js"><link rel="prefetch" href="/assets/js/149.c1331b6d.js"><link rel="prefetch" href="/assets/js/15.f198e5b9.js"><link rel="prefetch" href="/assets/js/16.00e51c93.js"><link rel="prefetch" href="/assets/js/17.291d3ebc.js"><link rel="prefetch" href="/assets/js/18.017a098e.js"><link rel="prefetch" href="/assets/js/19.61ae84a4.js"><link rel="prefetch" href="/assets/js/20.2fed9841.js"><link rel="prefetch" href="/assets/js/21.0540e3f5.js"><link rel="prefetch" href="/assets/js/22.65f1eb05.js"><link rel="prefetch" href="/assets/js/24.199ad75b.js"><link rel="prefetch" href="/assets/js/25.005a23bb.js"><link rel="prefetch" href="/assets/js/26.46587fdd.js"><link rel="prefetch" href="/assets/js/27.eaf61373.js"><link rel="prefetch" href="/assets/js/28.12bcc1aa.js"><link rel="prefetch" href="/assets/js/29.2ee78c15.js"><link rel="prefetch" href="/assets/js/3.aae4de15.js"><link rel="prefetch" href="/assets/js/30.5a13fad2.js"><link rel="prefetch" href="/assets/js/31.d559ae93.js"><link rel="prefetch" href="/assets/js/32.d5a38545.js"><link rel="prefetch" href="/assets/js/33.484dfc49.js"><link rel="prefetch" href="/assets/js/34.1a006a06.js"><link rel="prefetch" href="/assets/js/35.12b84d1e.js"><link rel="prefetch" href="/assets/js/36.b2cd4408.js"><link rel="prefetch" href="/assets/js/37.a5859cb8.js"><link rel="prefetch" href="/assets/js/38.96209f1d.js"><link rel="prefetch" href="/assets/js/39.71d70a82.js"><link rel="prefetch" href="/assets/js/4.0e4cf147.js"><link rel="prefetch" href="/assets/js/40.a59b859c.js"><link rel="prefetch" href="/assets/js/41.ebb72a6a.js"><link rel="prefetch" href="/assets/js/42.71f99aa2.js"><link rel="prefetch" href="/assets/js/43.092ff2c9.js"><link rel="prefetch" href="/assets/js/44.d70e216f.js"><link rel="prefetch" href="/assets/js/45.afb733d1.js"><link rel="prefetch" href="/assets/js/46.86c421f9.js"><link rel="prefetch" href="/assets/js/47.6d337ef6.js"><link rel="prefetch" href="/assets/js/48.157e1f1c.js"><link rel="prefetch" href="/assets/js/49.1aed4add.js"><link rel="prefetch" href="/assets/js/5.831f36ca.js"><link rel="prefetch" href="/assets/js/50.b495cbac.js"><link rel="prefetch" href="/assets/js/51.f4a8b763.js"><link rel="prefetch" href="/assets/js/52.beec293d.js"><link rel="prefetch" href="/assets/js/53.2ac4d785.js"><link rel="prefetch" href="/assets/js/54.342112cf.js"><link rel="prefetch" href="/assets/js/55.61e2bfb6.js"><link rel="prefetch" href="/assets/js/56.fa782548.js"><link rel="prefetch" href="/assets/js/57.41bc249e.js"><link rel="prefetch" href="/assets/js/58.c1d5fafb.js"><link rel="prefetch" href="/assets/js/59.4297a34f.js"><link rel="prefetch" href="/assets/js/6.54e4e793.js"><link rel="prefetch" href="/assets/js/60.634948c3.js"><link rel="prefetch" href="/assets/js/61.de4327e7.js"><link rel="prefetch" href="/assets/js/62.c6902476.js"><link rel="prefetch" href="/assets/js/63.737a0e11.js"><link rel="prefetch" href="/assets/js/64.cbe1b041.js"><link rel="prefetch" href="/assets/js/65.2df8f108.js"><link rel="prefetch" href="/assets/js/66.ee7de747.js"><link rel="prefetch" href="/assets/js/67.88edee59.js"><link rel="prefetch" href="/assets/js/68.c29f5efe.js"><link rel="prefetch" href="/assets/js/69.2fedc1f9.js"><link rel="prefetch" href="/assets/js/7.1c00f39e.js"><link rel="prefetch" href="/assets/js/70.0fe4782b.js"><link rel="prefetch" href="/assets/js/71.6c22c273.js"><link rel="prefetch" href="/assets/js/72.1fc7ddbd.js"><link rel="prefetch" href="/assets/js/73.25cb42eb.js"><link rel="prefetch" href="/assets/js/74.e922e1cc.js"><link rel="prefetch" href="/assets/js/75.f48393b6.js"><link rel="prefetch" href="/assets/js/76.72e96818.js"><link rel="prefetch" href="/assets/js/77.3df4edcb.js"><link rel="prefetch" href="/assets/js/78.73c6a652.js"><link rel="prefetch" href="/assets/js/79.22ba589c.js"><link rel="prefetch" href="/assets/js/8.b5f907d4.js"><link rel="prefetch" href="/assets/js/80.2d070db4.js"><link rel="prefetch" href="/assets/js/81.c0bc2539.js"><link rel="prefetch" href="/assets/js/82.4c6a47fa.js"><link rel="prefetch" href="/assets/js/83.a43f597f.js"><link rel="prefetch" href="/assets/js/84.8ce525d0.js"><link rel="prefetch" href="/assets/js/85.6b21aae0.js"><link rel="prefetch" href="/assets/js/86.f6ebabd9.js"><link rel="prefetch" href="/assets/js/87.9acaeb0d.js"><link rel="prefetch" href="/assets/js/88.99cdf592.js"><link rel="prefetch" href="/assets/js/89.58f63450.js"><link rel="prefetch" href="/assets/js/9.053d267f.js"><link rel="prefetch" href="/assets/js/90.1d59f40c.js"><link rel="prefetch" href="/assets/js/91.e8b2a5cd.js"><link rel="prefetch" href="/assets/js/92.b92bba74.js"><link rel="prefetch" href="/assets/js/93.688cad95.js"><link rel="prefetch" href="/assets/js/94.2c11a588.js"><link rel="prefetch" href="/assets/js/95.aa37d1df.js"><link rel="prefetch" href="/assets/js/96.fffa0e6e.js"><link rel="prefetch" href="/assets/js/97.04e9be9f.js"><link rel="prefetch" href="/assets/js/98.2672abca.js"><link rel="prefetch" href="/assets/js/99.c8de1c63.js">
    <link rel="stylesheet" href="/assets/css/0.styles.03260d1f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/EB-logo.png" alt="conanan's blog" class="logo"> <span class="site-name can-hide">conanan's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/pages/4b56bd/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4b56bd/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/724936/" class="nav-link">Java Web</a></li><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b18d09/" class="nav-link">Maven</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><a href="/pages/74cdda/" class="link-title">DataBase</a> <span class="title" style="display:none;">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/74cdda/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/4e9f47/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool" class="dropdown-title"><a href="/pages/89d1e7/" class="link-title">Tool</a> <span class="title" style="display:none;">Tool</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/89d1e7/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Vim</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d5fb/" class="nav-link">Docker</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Evan Xu</h3> <span>前端界的小学生</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/pages/4b56bd/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4b56bd/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/724936/" class="nav-link">Java Web</a></li><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b18d09/" class="nav-link">Maven</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="DataBase" class="dropdown-title"><a href="/pages/74cdda/" class="link-title">DataBase</a> <span class="title" style="display:none;">DataBase</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/74cdda/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/pages/4e9f47/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tool" class="dropdown-title"><a href="/pages/89d1e7/" class="link-title">Tool</a> <span class="title" style="display:none;">Tool</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/89d1e7/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Vim</a></li><li class="dropdown-item"><!----> <a href="/pages/2029ba/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d5fb/" class="nav-link">Docker</a></li></ul></div></div> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/4e9f47/" class="sidebar-link">简介</a></li><li><a href="/pages/cc2179/" aria-current="page" class="active sidebar-link">string</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cc2179/#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥key-的命名约定" class="sidebar-link">🔥KEY 的命名约定</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥set为字符串键设置值" class="sidebar-link">🔥SET为字符串键设置值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cc2179/#可选参数-ex-px-nx-xx" class="sidebar-link">可选参数 EX PX NX XX</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#setnx-setxx❗️改变覆盖规则" class="sidebar-link">SETNX/SETXX❗️改变覆盖规则</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#setex-psetex❗️设置过期时间" class="sidebar-link">SETEX / PSETEX❗️设置过期时间</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥get获取字符串键的值" class="sidebar-link">🔥GET获取字符串键的值</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#getset-获取旧值并设置新值" class="sidebar-link">GETSET 获取旧值并设置新值</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥mset一次为多个字符串键设置值" class="sidebar-link">🔥MSET一次为多个字符串键设置值</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#msetnx-键不存在的情况下批量设置值" class="sidebar-link">MSETNX 键不存在的情况下批量设置值</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥mget" class="sidebar-link">🔥MGET</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#set-和-mset-对比" class="sidebar-link">SET 和 MSET 对比</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#strlen" class="sidebar-link">STRLEN</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#getrange-获取字符串值指定索引范围上的内容" class="sidebar-link">GETRANGE 获取字符串值指定索引范围上的内容</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#setrange-对字符串值的指定索引范围进行设置" class="sidebar-link">SETRANGE 对字符串值的指定索引范围进行设置</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#append-追加新内容到值的末尾" class="sidebar-link">APPEND 追加新内容到值的末尾</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥del所有类型都可删除" class="sidebar-link">🔥DEL所有类型都可删除</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥incr-incrby-incrbyfloat" class="sidebar-link">🔥INCR / INCRBY / INCRBYFLOAT</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#decr-decrby" class="sidebar-link">DECR / DECRBY</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#" class="sidebar-link">====================</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥【场景】分布式数据库主键-id" class="sidebar-link">🔥【场景】分布式数据库主键 ID</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥【场景】限速器" class="sidebar-link">🔥【场景】限速器</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥【场景】密码错误限制" class="sidebar-link">🔥【场景】密码错误限制</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#🔥【场景】数据时效性" class="sidebar-link">🔥【场景】数据时效性</a></li><li class="sidebar-sub-header"><a href="/pages/cc2179/#主页高频访问信息显示控制思考" class="sidebar-link">主页高频访问信息显示控制思考</a></li></ul></li><li><a href="/pages/647382/" class="sidebar-link">hash</a></li><li><a href="/pages/49e768/" class="sidebar-link">list—顺序双向链表</a></li><li><a href="/pages/64c6e5/" class="sidebar-link">set—大量数据</a></li><li><a href="/pages/7ba3fd/" class="sidebar-link">sorted_set—排序的大量数据</a></li><li><a href="/pages/0349cf/" class="sidebar-link">bitmap—位图</a></li><li><a href="/pages/7330af/" class="sidebar-link">HyperLogLog</a></li><li><a href="/pages/cc251d/" class="sidebar-link">GEO—地理坐标</a></li><li><a href="/pages/aa0182/" class="sidebar-link">stream</a></li><li><a href="/pages/8731d0/" class="sidebar-link">通用指令</a></li><li><a href="/pages/139d9f/" class="sidebar-link">Jedis</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高级</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>集群</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/pages/f6a0e4/" class="sidebar-link">Redis面试</a></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/categories/?category=Redis" title="分类" data-v-1cd794fe>Redis</a></li> <li data-v-1cd794fe><a href="/categories/?category=%E5%9F%BA%E7%A1%80" title="分类" data-v-1cd794fe>基础</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/apple54whn" target="_blank" title="作者" class="beLink" data-v-1cd794fe>conanan</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-06-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          string
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h1 id="string"><a href="#string" class="header-anchor">#</a> string</h1> <h2 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h2> <ul><li><p>字符串（string）键是Redis最基本的键值对类型，这种类型的键值对会在数据库中把<strong>单独的一个键</strong>和<strong>单独的一个值</strong>关联起来</p></li> <li><p>被关联的键和值既可以是<strong>普通的文字数据</strong>，也可以是图片、视频、音频、压缩文件等更为<strong>复杂的二进制数据</strong></p></li> <li><p><strong>如果字符串以整数的形式展示，可以作为数字操作使用</strong>，但本质还是字符串！</p></li> <li><p>数据最大存储量</p> <ul><li><strong>512MB</strong>，也不可能存储这么大的值！</li></ul></li> <li><p>数值计算最大范围(java中的long的最大值)</p> <ul><li>9223372036854775807</li></ul></li> <li><p>数据操作不成功的反馈与数据正常操作之间的差异</p> <ul><li><p>表示运行结果是否成功</p> <ul><li>(integer) 0 → false 失败</li> <li>(integer) 1 → true 成功</li></ul></li> <li><p>表示运行结果值</p> <ul><li>(integer) 3 → 3 3个</li> <li>(integer) 1 → 1 1个</li></ul></li></ul></li> <li><p>数据未获取到</p> <ul><li>(nil)等同于null</li></ul></li></ul> <h2 id="🔥key-的命名约定"><a href="#🔥key-的命名约定" class="header-anchor">#</a> 🔥KEY 的命名约定</h2> <p>数据库中的热点数据key命名惯例</p> <p><img src="/assets/img/image-20210224235138080.c167c99c.png" alt="image-20210224235138080"></p> <h2 id="🔥set为字符串键设置值"><a href="#🔥set为字符串键设置值" class="header-anchor">#</a> 🔥SET为字符串键设置值</h2> <p>设置即为<strong>添加、修改</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> key value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; set name conan
OK

127.0.0.1:6379&gt; set name conanan
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="可选参数-ex-px-nx-xx"><a href="#可选参数-ex-px-nx-xx" class="header-anchor">#</a> 可选参数 EX PX NX XX</h3> <p>从 Redis 2.6.12 版本开始， <code>SET</code> 命令的行为可以通过一系列参数来修改：</p> <ul><li><code>EX seconds</code> ： 将键的过期时间设置为 <code>seconds</code> <strong>秒</strong>。 执行 <code>SET key value EX seconds</code> 的效果等同于执行 <code>SETEX key seconds value</code> 。</li> <li><code>PX milliseconds</code> ： 将键的过期时间设置为 <code>milliseconds</code> <strong>毫秒</strong>。 执行 <code>SET key value PX milliseconds</code> 的效果等同于执行 <code>PSETEX key milliseconds value</code> 。</li> <li><code>NX</code> ： 只在键不存在时， 才对键进行设置操作。 执行 <code>SET key value NX</code> 的效果等同于执行 <code>SETNX key value</code> 。</li> <li><code>XX</code> ： 只在键已经存在时， 才对键进行设置操作。</li></ul> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>因为 <code>SET</code> 命令可以通过参数来实现 <code>SETNX</code> 、<code>SETXX</code>、 <code>SETEX</code> 以及 <code>PSETEX</code> 命令的效果， 所以 Redis 将来的版本可能会移除并废弃这几个命令。</p></div> <h2 id="setnx-setxx❗️改变覆盖规则"><a href="#setnx-setxx❗️改变覆盖规则" class="header-anchor">#</a> SETNX/SETXX❗️改变覆盖规则</h2> <ul><li>NX：只会在<strong>键没有值</strong>的情况下执行<strong>设置</strong>操作，并返回OK表示设置成功；如果键已经存在，那么SET命令将放弃执行设置操作，并返回空值nil表示设置失败</li> <li>XX：只会在<strong>键已经有值</strong>的情况下执行<strong>设置</strong>操作，并返回OK表示设置成功；如果给定的键并没有值，那么SET命令将放弃执行设置操作，并返回空值nil表示设置失败</li></ul> <h2 id="setex-psetex❗️设置过期时间"><a href="#setex-psetex❗️设置过期时间" class="header-anchor">#</a> SETEX / PSETEX❗️设置过期时间</h2> <p>设置数据具有指定的生命周期</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>setex key seconds value  -- 秒
psetex key milliseconds value -- 毫秒
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex tel <span class="token number">3</span> <span class="token number">110</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get tel
<span class="token string">&quot;110&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get tel
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>但是记住，<strong>再次执行会重置时间</strong>，如：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex tel <span class="token number">3</span> <span class="token number">110</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex tel <span class="token number">60</span> <span class="token number">110</span> -- 重置为60秒
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex tel <span class="token number">110</span> -- 重置永久
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="🔥get获取字符串键的值"><a href="#🔥get获取字符串键的值" class="header-anchor">#</a> 🔥GET获取字符串键的值</h2> <p>如果键 <code>key</code> 不存在， 那么返回特殊值 <code>nil</code> ； 否则， 返回键 <code>key</code> 的值。</p> <p>如果键 <code>key</code> 的值<strong>并非string类型</strong>， 那么返回一个<strong>错误</strong>， 因为 <code>GET</code> 命令只能用于字符串值。</p> <p>查询命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>get key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查询一个存在的key：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;conanan&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>查询一个不存在的key：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get age
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Redis的数据库要求<strong>所有键必须拥有与之相关联的值</strong>，所以如果一个键有值，那么我们就说这个键存在于数据库；相反，如果一个键没有值，那么我们就说这个键不存在于数据库</p> <h2 id="getset-获取旧值并设置新值"><a href="#getset-获取旧值并设置新值" class="header-anchor">#</a> GETSET 获取旧值并设置新值</h2> <p>就像GET命令和SET命令的组合版本，GETSET首先获取字符串键目前已有的值，接着为键设置新值，最后把之前获取到的旧值返回给用户</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>GETSET key newValue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="🔥mset一次为多个字符串键设置值"><a href="#🔥mset一次为多个字符串键设置值" class="header-anchor">#</a> 🔥MSET一次为多个字符串键设置值</h2> <p>添加、修改多个数据：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mset key1 value1 key2 value2 <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中<code>m</code>为 mutiple 多个意思</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset a <span class="token number">1</span> b <span class="token number">2</span> c <span class="token number">3</span>
OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="msetnx-键不存在的情况下批量设置值"><a href="#msetnx-键不存在的情况下批量设置值" class="header-anchor">#</a> MSETNX 键不存在的情况下批量设置值</h2> <p>略</p> <h2 id="🔥mget"><a href="#🔥mget" class="header-anchor">#</a> 🔥MGET</h2> <p>获取多个数据：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mget key1 key2 <span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget a b c d
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>nil<span class="token punctuation">)</span> --注意这里
-- 注意整个返回的格式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="set-和-mset-对比"><a href="#set-和-mset-对比" class="header-anchor">#</a> SET 和 MSET 对比</h2> <p>单数据操作与多数据操作的选择之惑</p> <p><img src="/assets/img/image-20210224232436229.163db171.png" alt="image-20210224232436229"></p> <p>基本上选择<code>mset</code>不会有问题，但是要注意实际数据大小！太少这俩没太大区别；太多太多也不能使用他俩，一条一条处理不行，单线程处理太多数据也不行，应该拆分数据后使用<code>mset</code></p> <h2 id="strlen"><a href="#strlen" class="header-anchor">#</a> STRLEN</h2> <p>获取数据字符个数（字符串长度）：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>strlen key
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;conanan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意中文：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> c_name 哈哈
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get c_name
<span class="token string">&quot;<span class="token entity" title="\xe5">\xe5</span><span class="token entity" title="\x93">\x93</span><span class="token entity" title="\x88">\x88</span><span class="token entity" title="\xe5">\xe5</span><span class="token entity" title="\x93">\x93</span><span class="token entity" title="\x88">\x88</span>&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen c_name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="getrange-获取字符串值指定索引范围上的内容"><a href="#getrange-获取字符串值指定索引范围上的内容" class="header-anchor">#</a> GETRANGE 获取字符串值指定索引范围上的内容</h2> <p>通过使用GETRANGE命令，用户可以获取字符串值从start索引开始，直到end索引为止的所有内容</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>GETRANGE key start end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>GETRANGE命令接受的是<strong>闭区间</strong>索引范围</p> <h2 id="setrange-对字符串值的指定索引范围进行设置"><a href="#setrange-对字符串值的指定索引范围进行设置" class="header-anchor">#</a> SETRANGE 对字符串值的指定索引范围进行设置</h2> <p>通过使用SETRANGE命令，用户可以将字符串键的值从索引index开始的部分替换为指定的新内容，被替换内容的长度<strong>取决于新内容的长度</strong>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>SETRANGE key index substitute
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="append-追加新内容到值的末尾"><a href="#append-追加新内容到值的末尾" class="header-anchor">#</a> APPEND 追加新内容到值的末尾</h2> <p><strong>追加</strong>信息到原始信息后部（如果<strong>原始信息存在就追加，否则新建</strong>）：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>append key value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：<strong>返回的是追加完毕后的长度</strong>！</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name conanan
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append name <span class="token string">' and lan'</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">15</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;conanan and lan&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="🔥del所有类型都可删除"><a href="#🔥del所有类型都可删除" class="header-anchor">#</a> 🔥DEL所有类型都可删除</h2> <p>删除命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>del key <span class="token punctuation">[</span>key <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除一个存在的key，返回影响的数量1：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; del name
(integer) 1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>删除一个不存在的key，返回影响的数量0：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; del name
(integer) 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>删除多个</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; set name a
OK
127.0.0.1:6379&gt; set age 1
OK
127.0.0.1:6379&gt; del name age
(integer) 2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="🔥incr-incrby-incrbyfloat"><a href="#🔥incr-incrby-incrbyfloat" class="header-anchor">#</a> 🔥INCR / INCRBY / INCRBYFLOAT</h2> <p>设置数值数据增加指定范围的值（但是值为负数时即是减法操作）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>incr key
incrby key increment 
incrbyfloat key increment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="decr-decrby"><a href="#decr-decrby" class="header-anchor">#</a> DECR / DECRBY</h2> <p>设置数值数据减少指定范围的值（但是值为负数时即是加法操作）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>decr key
decrby key increment
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id=""><a href="#" class="header-anchor">#</a> ====================</h2> <h2 id="🔥【场景】分布式数据库主键-id"><a href="#🔥【场景】分布式数据库主键-id" class="header-anchor">#</a> 🔥【场景】分布式数据库主键 ID</h2> <p>大型企业级应用中，分表操作是基本操作，使用多张表存储同类型数据，但是对应的主键 id 必须保证统一性 ，不能重复。Oracle 数据库具有 sequence 设定，可以解决该问题，但是 MySQL数据库并不具有类似的机制，那么如何解决?</p> <p>可以<strong>利用 string 存储数字类型，并利用 incr 命令来生成主键id</strong></p> <p>string 作为数值操作注意：</p> <ul><li><p>string在redis内部存储默认就是一个字符串，当<strong>遇到增减类操作incr，decr时会转成数值型进行计算</strong>。</p></li> <li><p><strong>redis所有的操作都是原子性的</strong>，采用<strong>单线程</strong>处理所有业务，命令是一个一个执行的，因此<strong>无需考虑并发</strong></p> <p><strong>带来的数据影响</strong>。</p></li> <li><p>注意：按数值进行操作的数据，如果<strong>原始数据不能转成数值</strong>，或<strong>超越了redis 数值上限范围</strong>，将<strong>报错</strong>。 9223372036854775807（java中long型数据最大值，Long.MAX_VALUE）</p></li></ul> <p>结论：</p> <ul><li><strong>redis用于控制数据库表主键id，为数据库表主键提供生成策略，保障数据库表的主键唯一性</strong></li> <li>此方案<strong>适用于所有数据库，且支持数据库集群</strong></li></ul> <h2 id="🔥【场景】限速器"><a href="#🔥【场景】限速器" class="header-anchor">#</a> 🔥【场景】限速器</h2> <ul><li>为了防止网站内容被网络爬虫抓取，网站管理者通常会限制每个IP地址在固定时间段内能够访问的页面数量，比如1min之内最多只能访问30个页面，超过这一限制的用户将被要求进行身份验证，确认本人并非网络爬虫，或者等到限制解除之后再进行访问。</li> <li>为了防止用户的账号遭到暴力破解，网上银行通常会对访客的密码试错次数进行限制，如果一个访客在尝试登录某个账号的过程中，连续好几次输入了错误的密码，那么这个账号将被冻结，只能等到第二天再尝试登录，有的银行还会向账号持有者的手机发送通知来汇报这一情况。</li></ul> <p>实现这些限制机制的其中一种方法是使用限速器，它可以限制用户在<strong>指定时间段之内能够执行某项操作的次数</strong>。</p> <ul><li><strong>输入成功后需要重置！</strong></li> <li><strong>错误后减1即可</strong></li></ul> <h2 id="🔥【场景】密码错误限制"><a href="#🔥【场景】密码错误限制" class="header-anchor">#</a> 🔥【场景】密码错误限制</h2> <p>密码输入错误3次后，3小时后解封</p> <p>解决方案</p> <ul><li><p>设计计数器，记录调用次数，用于控制业务执行次数。以用户id作为key，使用次数作为value</p></li> <li><p>在调用前获取次数，判断是否超过限定次数</p> <ul><li>不超过次数的情况下，每次调用计数+1</li> <li>业务调用失败，计数-1</li></ul></li> <li><p>为计数器设置生命周期为指定周期，例如1秒/分钟，自动清空周期内使用次数</p></li></ul> <p>错误时调用</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get u:01
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> u:01 <span class="token number">1</span> ex <span class="token number">10</span> -- 设置超时时间
OK

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get u:01
<span class="token string">&quot;1&quot;</span> -- 若是大于等于限制次数，则之间返回，否则执行 incr
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr u:01
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>改进：</p> <ul><li><p>取消最大值的判定，利用incr操作超过最大值抛出异常的形式替代每次判断是否大于最大值（但是存储占用会变大）</p></li> <li><p>判断是否为nil</p> <ul><li>如果是，设置为Max-次数-1</li> <li>如果不是，计数+1</li> <li>业务调用失败，计数-1</li></ul></li> <li><p>遇到异常即+操作超过上限，视为使用达到上限</p></li></ul> <h2 id="🔥【场景】数据时效性"><a href="#🔥【场景】数据时效性" class="header-anchor">#</a> 🔥【场景】数据时效性</h2> <p>业务场景：</p> <ul><li>“最强女生”启动海选投票，只能通过微信投票，每个微信号每 4 小时只能投1票。</li> <li>电商商家开启热门商品推荐，热门商品不能一直处于热门期，每种商品热门期维持3天，3天后自动取消热门。</li> <li>新闻网站会出现热点新闻，热点新闻最大的特征是时效性，如何自动控制热点新闻的时效性。</li></ul> <p>通过<code>SET</code>的 <code>ex</code> 或<code>px</code> 参数控制数据的生命周期，通过数据是否失效控制业务行为，适用于所有具有时效性限定控制的操作</p> <h2 id="主页高频访问信息显示控制思考"><a href="#主页高频访问信息显示控制思考" class="header-anchor">#</a> 主页高频访问信息显示控制思考</h2> <p>例如新浪微博大V主页显示粉丝数与微博数量。解决如下（但是不推荐下面的存储格式）：</p> <ul><li><p>在redis中为大V用户设定用户信息，<strong>以用户主键和属性值作为key</strong>，后台设定定时刷新策略即可</p> <p><img src="/assets/img/image-20210224235606470.17dd20f5.png" alt="image-20210224235606470"></p></li> <li><p>在redis中<strong>以json格式</strong>存储大V用户信息（不推荐），定时刷新（也可以<strong>使用hash类型</strong>，推荐）</p> <p><img src="/assets/img/image-20210224235537410.0f0a063c.png" alt="image-20210224235537410"></p></li></ul></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing/edit/master/docs/1200.Redis/100.基础/102.string.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/06/21, 15:45:42</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/4e9f47/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">简介</div></a> <a href="/pages/647382/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">hash</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/4e9f47/" class="prev">简介</a></span> <span class="next"><a href="/pages/647382/">hash</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/7fcc72/"><div>线程生命周期</div></a> <span>07-06</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/a4ef99/"><div>线程安全理论</div></a> <span>06-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/890a0b/"><div>并发简史</div></a> <span>06-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:894072666@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xugaoyi" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2021
    <span>Evan Xu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.ac5e3ef4.js" defer></script><script src="/assets/js/2.d960b235.js" defer></script><script src="/assets/js/23.fd9e2f2e.js" defer></script>
  </body>
</html>