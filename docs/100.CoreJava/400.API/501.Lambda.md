---
title: 13 Lambda
date: 2020-12-14 23:04:19
permalink: /pages/630cbb/
categories:
  - Java
  - Core
tags:
  -
---

# Lambda

åœ¨æ•°å­¦ä¸­ï¼Œå‡½æ•°å°±æ˜¯æœ‰è¾“å…¥é‡ã€è¾“å‡ºé‡çš„ä¸€å¥—è®¡ç®—æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯â€œæ‹¿ä»€ä¹ˆä¸œè¥¿åšä»€ä¹ˆäº‹æƒ…â€ã€‚ç›¸å¯¹è€Œè¨€ï¼Œ**é¢å‘å¯¹è±¡**è¿‡åˆ†å¼ºè°ƒâ€œå¿…é¡»**é€šè¿‡å¯¹è±¡çš„å½¢å¼æ¥åšäº‹æƒ…**â€ï¼Œè€Œ**å‡½æ•°å¼æ€æƒ³**åˆ™å°½é‡å¿½ç•¥é¢å‘å¯¹è±¡çš„å¤æ‚è¯­æ³•â€”â€”**å¼ºè°ƒåšä»€ä¹ˆåŠç»“æœï¼Œè€Œä¸æ˜¯ä»¥ä»€ä¹ˆå½¢å¼åš**ã€‚

é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼šåšä¸€ä»¶äº‹æƒ…ï¼Œæ‰¾ä¸€ä¸ªèƒ½è§£å†³è¿™ä¸ªäº‹æƒ…çš„å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•,å®Œæˆäº‹æƒ….

å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼šåªè¦èƒ½è·å–åˆ°ç»“æœï¼Œè°å»åšçš„ï¼Œæ€ä¹ˆåšçš„éƒ½ä¸é‡è¦ï¼Œé‡è§†çš„æ˜¯ç»“æœï¼Œä¸é‡è§†è¿‡ç¨‹

- å†—ä½™çš„ Runnable ä»£ç åˆ†æ

  - Thread ç±»éœ€è¦ Runnable æ¥å£ä½œä¸ºå‚æ•°ï¼Œå…¶ä¸­çš„æŠ½è±¡ run æ–¹æ³•æ˜¯ç”¨æ¥æŒ‡å®šçº¿ç¨‹ä»»åŠ¡å†…å®¹çš„æ ¸å¿ƒï¼›
  - ä¸ºäº†æŒ‡å®š run çš„æ–¹æ³•ä½“ï¼Œä¸å¾—ä¸éœ€è¦ Runnable æ¥å£çš„å®ç°ç±»ï¼›
  - ä¸ºäº†çœå»å®šä¹‰ä¸€ä¸ª RunnableImpl å®ç°ç±»çš„éº»çƒ¦ï¼Œä¸å¾—ä¸ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼›
  - å¿…é¡»è¦†ç›–é‡å†™æŠ½è±¡ run æ–¹æ³•ï¼Œæ‰€ä»¥æ–¹æ³•åç§°ã€æ–¹æ³•å‚æ•°ã€æ–¹æ³•è¿”å›å€¼ä¸å¾—ä¸å†å†™ä¸€éï¼Œä¸”ä¸èƒ½å†™é”™ï¼›
  - è€Œå®é™…ä¸Šï¼Œä¼¼ä¹åª**æœ‰æ–¹æ³•ä½“æ‰æ˜¯å…³é”®æ‰€åœ¨**ã€‚

- åŒ¿åå†…éƒ¨ç±»çš„å¥½å¤„ä¸å¼Šç«¯

  - ä¸€æ–¹é¢ï¼ŒåŒ¿åå†…éƒ¨ç±»å¯ä»¥å¸®æˆ‘ä»¬çœå»å®ç°ç±»çš„å®šä¹‰ï¼›
  - å¦ä¸€æ–¹é¢ï¼ŒåŒ¿åå†…éƒ¨ç±»çš„è¯­æ³•â€”â€”ç¡®å®å¤ªå¤æ‚äº†ï¼

- ç¼–ç¨‹æ€æƒ³è½¬æ¢

  **åšä»€ä¹ˆ**ï¼Œè€Œä¸æ˜¯æ€ä¹ˆåšï¼Œåªè¦èƒ½å¤Ÿæ›´å¥½åœ°è¾¾åˆ°ç›®çš„ï¼Œè¿‡ç¨‹ä¸å½¢å¼å…¶å®å¹¶ä¸é‡è¦ã€‚2014 å¹´ 3 æœˆ Oracle æ‰€å‘å¸ƒçš„ Java 8 ä¸­ï¼ŒåŠ å…¥äº† Lambda è¡¨è¾¾å¼çš„é‡é‡çº§æ–°ç‰¹æ€§ï¼Œä¸ºæˆ‘ä»¬æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚

## å‡½æ•°å¼æ¥å£

å‡½æ•°å¼æ¥å£åœ¨ Java ä¸­æ˜¯æŒ‡ï¼š**æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£**ã€‚å¯ä»¥é€‚ç”¨äº Lambda ä½¿ç”¨çš„æ¥å£ï¼Œåªæœ‰ç¡®ä¿æ¥å£ä¸ºå‡½æ•°å¼æ¥å£ï¼ŒJava ä¸­çš„ Lambda æ‰èƒ½é¡ºåˆ©åœ°è¿›è¡Œ**æ¨å¯¼**ã€‚

> å¤‡æ³¨ï¼šâ€œè¯­æ³•ç³–â€æ˜¯æŒ‡ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ï¼Œä½†æ˜¯åŸç†ä¸å˜çš„ä»£ç è¯­æ³•ã€‚ä¾‹å¦‚åœ¨éå†é›†åˆæ—¶ä½¿ç”¨çš„ for-each è¯­æ³•ï¼Œå…¶å®åº•å±‚çš„å®ç°åŸç†ä»ç„¶æ˜¯è¿­ä»£å™¨ï¼Œè¿™ä¾¿æ˜¯â€œè¯­æ³•ç³–â€ã€‚ä»åº”ç”¨å±‚é¢æ¥è®²ï¼ŒJava ä¸­çš„ Lambda å¯ä»¥è¢«å½“åšæ˜¯åŒ¿åå†…éƒ¨ç±»çš„â€œè¯­æ³•ç³–â€ï¼Œä½†æ˜¯äºŒè€…åœ¨åŸç†ä¸Šæ˜¯ä¸åŒçš„ã€‚

**æ ¼å¼**

```java
ä¿®é¥°ç¬¦ interface æ¥å£åç§° {
    /*public abstract*/ è¿”å›å€¼ç±»å‹ æ–¹æ³•åç§°(å¯é€‰å‚æ•°ä¿¡æ¯);
    // å…¶ä»–éæŠ½è±¡æ–¹æ³•å†…å®¹ï¼Œé»˜è®¤æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ï¼Œç§æœ‰æ–¹æ³•
}
```

`@FunctionalInterface`æ³¨è§£

Java 8 ä¸­ä¸“é—¨ä¸ºå‡½æ•°å¼æ¥å£å¼•å…¥çš„æ³¨è§£ï¼Œå¯ç”¨äºä¸€ä¸ªæ¥å£çš„å®šä¹‰ä¸Šã€‚ä¸€æ—¦ä½¿ç”¨è¯¥æ³¨è§£æ¥å®šä¹‰æ¥å£ï¼Œ**ç¼–è¯‘å™¨å°†ä¼šå¼ºåˆ¶æ£€æŸ¥**è¯¥æ¥å£æ˜¯å¦ç¡®å®æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™ã€‚ä¸ä½¿ç”¨è¯¥æ³¨è§£ä¹Ÿå¯ä»¥å®šä¹‰å‡½æ•°å¼æ¥å£ã€‚

## å‡½æ•°å¼ç¼–ç¨‹

- Lambda è¡¨è¾¾å¼çš„æ ‡å‡†æ ¼å¼ä¸º

  ```java
  (å‚æ•°ç±»å‹ å‚æ•°åç§°) â€> { ä»£ç è¯­å¥ }
  ```

  - å°æ‹¬å·å†…çš„è¯­æ³•ä¸ä¼ ç»Ÿæ–¹æ³•**å‚æ•°åˆ—è¡¨ä¸€è‡´**ï¼šæ— å‚æ•°åˆ™ç•™ç©ºï¼›å¤šä¸ªå‚æ•°åˆ™ç”¨é€—å·åˆ†éš”ã€‚
  - `->` æ˜¯æ–°å¼•å…¥çš„è¯­æ³•æ ¼å¼ï¼Œä»£è¡¨**æŒ‡å‘åŠ¨ä½œ**ã€‚
  - å¤§æ‹¬å·å†…çš„è¯­æ³•ä¸ä¼ ç»Ÿ**æ–¹æ³•ä½“**è¦æ±‚åŸºæœ¬ä¸€è‡´ã€‚

- æ— å‚æ•°è¿”å›å€¼

  ```java
  new Thread( () â€>  System.out.println("å¤šçº¿ç¨‹ä»»åŠ¡æ‰§è¡Œï¼")).start());
  ```

- æœ‰å‚æ•°å’Œè¿”å›å€¼

  ```java
  Arrays.sort(students,(s1, s2)->{ //å‚æ•°ç±»å‹å¯ä»¥ä»studentsæ¨å¯¼å‡ºï¼Œsoå¯ä»¥çœç•¥
      return s1.getAge()-s2.getAge();
  });
  ```

  ```java
  Collections.sort(students, (o1, o2) -> o1.getAge()-o2.getAge()); //{}å†…åªæœ‰ä¸€è¡Œè¡¨è¾¾å¼ï¼Œå¯ä»¥çœç•¥{}å’Œreturn
  ```

  ```java
  Arrays.sort(students, Comparator.comparingInt(Student::getAge)); //æ›´ç®€æ´çš„å†™æ³•,ä½†{}ä¸­è¯­å¥å¤šæ—¶ä¸èƒ½ç®€å†™
  ```

- **å¯æ¨å¯¼å¯çœç•¥**ï¼šLambda å¼ºè°ƒçš„æ˜¯â€œåšä»€ä¹ˆâ€è€Œä¸æ˜¯â€œæ€ä¹ˆåšâ€ï¼Œå‡¡å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡æ¨å¯¼å¾—çŸ¥çš„ä¿¡æ¯ï¼Œéƒ½å¯ä»¥çœç•¥ã€‚

  - **å°æ‹¬å·å†…å‚æ•°çš„ç±»å‹**å¯ä»¥çœç•¥
  - å¦‚æœ**å°æ‹¬å·å†…æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‚**ï¼Œåˆ™**å°æ‹¬å·å¯ä»¥çœç•¥**
  - å¦‚æœ**å¤§æ‹¬å·å†…æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè¯­å¥**ï¼Œåˆ™æ— è®ºæ˜¯å¦æœ‰è¿”å›å€¼ï¼Œéƒ½å¯ä»¥çœç•¥å¤§æ‹¬å·ã€return å…³é”®å­—åŠè¯­å¥åˆ†å·ã€‚

- Lambda çš„è¯­æ³•éå¸¸ç®€æ´ï¼Œå®Œå…¨æ²¡æœ‰é¢å‘å¯¹è±¡å¤æ‚çš„æŸç¼šã€‚ä½†æ˜¯ä½¿ç”¨æ—¶æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š

  - ä½¿ç”¨ Lambda å¿…é¡»å…·æœ‰**å‡½æ•°å¼æ¥å£**ï¼Œå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ª**å‡½æ•°å¼æ¥å£çš„å®ä¾‹**

    æ— è®ºæ˜¯ JDK å†…ç½®çš„ Runnable ã€ Comparator æ¥å£è¿˜æ˜¯è‡ªå®šä¹‰çš„æ¥å£ï¼Œåªæœ‰å½“æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•å­˜åœ¨ä¸”å”¯ä¸€æ—¶ï¼Œæ‰å¯ä»¥ä½¿ç”¨ Lambdaã€‚

  - ä½¿ç”¨ Lambda å¿…é¡»**å…·æœ‰ä¸Šä¸‹æ–‡ç±»å‹æ¨æ–­**

    æ–¹æ³•çš„å‚æ•°æˆ–å±€éƒ¨å˜é‡ç±»å‹å¿…é¡»ä¸º**Lambda å¯¹åº”çš„æ¥å£ç±»å‹**ï¼Œæ‰èƒ½ä½¿ç”¨ Lambda ä½œä¸ºè¯¥æ¥å£çš„å®ä¾‹ã€‚

  - è‹¥ Lambda è¡¨è¾¾å¼æŠ›å‡ºä¸€ä¸ªå—æ£€å¼‚å¸¸ï¼ˆå³éè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ï¼Œé‚£ä¹ˆè¯¥å¼‚å¸¸éœ€è¦åœ¨ç›®æ ‡æ¥å£çš„æŠ½è±¡æ–¹æ³•ä¸Šè¿›è¡Œå£°æ˜

## Lambda çš„å»¶è¿Ÿæ‰§è¡Œ

æœ‰äº›åœºæ™¯çš„ä»£ç æ‰§è¡Œåï¼Œç»“æœä¸ä¸€å®šä¼šè¢«ä½¿ç”¨ï¼Œä»è€Œé€ æˆæ€§èƒ½æµªè´¹ã€‚è€Œ Lambda è¡¨è¾¾å¼æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ï¼Œè¿™æ­£å¥½å¯ä»¥ ä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Œæå‡æ€§èƒ½ã€‚

### æ€§èƒ½æµªè´¹çš„æ—¥å¿—æ¡ˆä¾‹

```java
public static void main(String[] args) throws FileNotFoundException {
    String a = "hello";
    String b = "world";
    log(1,a+b);
}
public static void log(int level,String msg) {
    if (level==1) {
        System.out.println(msg);
    }
}
```

> æ— è®ºçº§åˆ«æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Œä½œä¸º`log` æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸‰ä¸ªå­—ç¬¦ä¸²ä¸€å®šä¼šé¦–å…ˆè¢«æ‹¼æ¥å¹¶ä¼ å…¥æ–¹æ³•å†…ï¼Œç„¶åæ‰ä¼šè¿›è¡Œçº§åˆ«åˆ¤æ–­ã€‚å¦‚æœçº§åˆ«ä¸ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²çš„æ‹¼æ¥æ“ä½œå°±ç™½åšäº†ï¼Œå­˜åœ¨**æ€§èƒ½æµªè´¹**ã€‚
>
> å¤‡æ³¨ï¼š**SLF4J**æ˜¯åº”ç”¨éå¸¸å¹¿æ³›çš„æ—¥å¿—æ¡†æ¶ï¼Œå®ƒåœ¨è®°å½•æ—¥å¿—æ—¶ä¸ºäº†è§£å†³è¿™ç§æ€§èƒ½æµªè´¹çš„é—®é¢˜ï¼Œå¹¶ä¸æ¨èé¦–å…ˆè¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œè€Œæ˜¯**å°†å­—ç¬¦ä¸²çš„è‹¥å¹²éƒ¨åˆ†ä½œä¸ºå¯å˜å‚æ•°ä¼ å…¥æ–¹æ³•ä¸­**ï¼Œä»…åœ¨æ—¥å¿—çº§åˆ«**æ»¡è¶³è¦æ±‚**çš„æƒ…å†µä¸‹**æ‰ä¼šè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥**ã€‚ä¾‹å¦‚ï¼š LOGGER.debug("å˜é‡{}çš„å–å€¼ä¸º{}ã€‚", "os", "macOS") ï¼Œå…¶ä¸­çš„å¤§æ‹¬å· {} ä¸ºå ä½ç¬¦ã€‚å¦‚æœæ»¡è¶³æ—¥å¿—çº§åˆ«è¦æ±‚ï¼Œåˆ™ä¼šå°†â€œosâ€å’Œâ€œmacOSâ€ä¸¤ä¸ªå­—ç¬¦ä¸²ä¾æ¬¡æ‹¼æ¥åˆ°å¤§æ‹¬å·çš„ä½ç½®ï¼›å¦åˆ™ä¸ä¼šè¿›è¡Œå­— ç¬¦ä¸²æ‹¼æ¥ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§å¯è¡Œè§£å†³æ–¹æ¡ˆï¼Œä½† Lambda å¯ä»¥åšåˆ°æ›´å¥½

### ä½“éªŒ Lambda çš„æ›´ä¼˜å†™æ³•

å‡½æ•°å¼æ¥å£

```java
@FunctionalInterface
public interface MessageBuilder {
    String buildMessage();
}
```

ç„¶åå¯¹ `log` æ–¹æ³•è¿›è¡Œæ”¹é€ 

```java
public static void main(String[] args) throws FileNotFoundException {
    String a = "hello";
    String b = "world";
    log(1, () -> a + b );
}
public static void log(int level,MessageBuilder mb) {
    if (level==1) {
        System.out.println(mb.buildMessage());
    }
}
```

> åªæœ‰å½“çº§åˆ«æ»¡è¶³è¦æ±‚çš„æ—¶å€™ï¼Œæ‰ä¼šè¿›è¡Œä¸‰ä¸ªå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼›å¦åˆ™ä¸‰ä¸ªå­—ç¬¦ä¸²å°†ä¸ä¼šè¿›è¡Œæ‹¼æ¥ã€‚
>
> è¯æ˜ï¼šåªéœ€åœ¨ lambda å¤§æ‹¬å·ä¸­æ‰“å°ä¸€ä¸ªè¯­å¥ï¼Œå¹¶è®©`log`æ–¹æ³•ä¼ é€’çš„å‚æ•°æ”¹ä¸º 2ï¼Œå‘ç°æ‰“å°è¯­å¥ä¸æ‰§è¡Œ

## å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£

JDK æä¾›äº†å¤§é‡å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£ä»¥ä¸°å¯Œ Lambda çš„å…¸å‹ä½¿ç”¨åœºæ™¯ï¼Œå®ƒä»¬ä¸»è¦åœ¨**`java.util.function`**ä¸­æä¾›ã€‚

`java.lang.Runnable`ã€`java.util.Comparator`ä¸å†ä¸Šè¿°åŒ…ä¸­ï¼Œä½†ä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£

> å¦‚ä¸‹å‡½æ•°å¼æ¥å£å¼ºè°ƒçš„æ˜¯çŠ¶æ€çš„æ”¹å˜ï¼ä¸åœ¨ä¹å…·ä½“å®ç°ç»†èŠ‚ï¼å…·ä½“å®ç°äº¤ç»™ Lambda æ¥å®Œæˆï¼

Java å†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£

![image-20191105234610241](../images/image-20191105234610241.png)

å…¶ä»–æ¥å£

![image-20191105234644979](../images/image-20191105234644979.png)

### Supplierâ€”ç”Ÿäº§å‹æ¥å£

`java.util.function.Supplier<T>`ç”¨æ¥**è·å–ä¸€ä¸ªæ³›å‹å‚æ•°æŒ‡å®šç±»å‹çš„å¯¹è±¡æ•°æ®**ã€‚ç”±äºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å¯¹åº”çš„ Lambda è¡¨è¾¾å¼**éœ€è¦â€œå¯¹å¤–æä¾›â€ä¸€ä¸ªç¬¦åˆæ³›å‹ç±»å‹**çš„å¯¹è±¡æ•°æ®ã€‚è¿™ä¸ªæ¥å£ä¹Ÿç§°ä¸º**ç”Ÿäº§å‹æ¥å£**ã€‚

- æŠ½è±¡æ–¹æ³• `T get()`

  ```java
  //æ±‚æ•°ç»„å…ƒç´ æœ€å¤§å€¼
  public static void main(String[] args) {
    int[] arr = {1, 22, 55, 333, 66};
    int m = getMax(arr,() -> {
      int max = arr[0];
      for (int i = 1; i < arr.length; i++) {
        if (arr[i] > max)
          max = arr[i];
      }
      return max;
    });
    System.out.println(m);
  }

  public static int getMax(int[] arr,Supplier<Integer> supplier) {
    return supplier.get();
  }
  ```

### Consumerâ€”æ¶ˆè´¹å‹æ¥å£

`java.util.function.Consumer<T>`æ¥å£åˆ™æ­£å¥½ä¸`Supplier`æ¥å£ç›¸åï¼Œå®ƒä¸æ˜¯ç”Ÿäº§ä¸€ä¸ªæ•°æ®ã€‚**æ¶ˆè´¹å‹æ¥å£**ã€‚

- æŠ½è±¡æ–¹æ³•`void accept(T t)`

  > æ„ä¸º**æ¶ˆè´¹ä¸€ä¸ªæŒ‡å®šæ³›å‹çš„æ•°æ®**ã€‚

  ```java
  public static void main(String[] args) {
      String msg = "ç‰›é€¼";
      consumeString(msg,s â€> {
          //æ€ä¹ˆå¤„é‡Œæ¶ˆè´¹éšæ„
      }
  }

  public static void consumeString(String msg, Consumer<String> consumer) {
      consumer.accept(msg);
  }
  ```

- é»˜è®¤æ–¹æ³•`default Consumer<T> andThen(Consumer<T> c)`

  > å¦‚æœä¸€ä¸ªæ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼å…¨éƒ½æ˜¯ Consumer ç±»å‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°æ•ˆæœï¼š**æ¶ˆè´¹æ•°æ®çš„æ—¶å€™ï¼Œé¦–å…ˆåšä¸€ä¸ªæ“ä½œï¼Œ ç„¶åå†åšä¸€ä¸ªæ“ä½œï¼Œå®ç°ç»„åˆï¼Œå“ªä¸ªå†™å‰é¢åˆ™å…ˆæ¶ˆè´¹**ã€‚è¿”å›å€¼æ˜¯æœ¬èº«ï¼Œå¯ä»¥ç”¨é“¾å¼ç¼–ç¨‹ï¼Œä¸‰ä¸ªã€å››ä¸ªæ“ä½œéƒ½è¡Œã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯ Consumer æ¥å£ä¸­çš„ default æ–¹æ³• andThen ã€‚

  ```java
  public static void main(String[] args) {
      /**
       * ä¸‹é¢çš„å­—ç¬¦ä¸²æ•°ç»„å½“ä¸­å­˜æœ‰å¤šæ¡ä¿¡æ¯ï¼Œè¯·æŒ‰ç…§æ ¼å¼â€œ å§“åï¼šXXï¼›æ€§åˆ«ï¼šXXã€‚ â€çš„æ ¼å¼å°†ä¿¡æ¯æ‰“å°å‡ºæ¥ã€‚
       * è¦æ±‚å°†æ‰“å°å§“åçš„åŠ¨ä½œä½œä¸ºç¬¬ä¸€ä¸ªConsumeræ¥å£çš„Lambdaå®ä¾‹ï¼Œå°†æ‰“å°æ€§åˆ«çš„åŠ¨ä½œä½œä¸ºç¬¬äºŒä¸ªConsumeræ¥å£çš„Lambdaå®ä¾‹ï¼Œ
       */
      String[] arr = {"è¿ªä¸½çƒ­å·´,å¥³", "å¤åŠ›å¨œæ‰,å¥³", "é©¬å°”æ‰å“ˆ,ç”·"};
      consumerString(arr,
                     s -> System.out.print("å§“åï¼š" + s.split(",")[0] + "ï¼›"),
                     s -> System.out.println("æ€§åˆ«ï¼š" + s.split(",")[1] + "ã€‚")
      );

  }

  public static void consumerString(String[] msg, Consumer<String> consumer1, Consumer<String> consumer2) {
      for (String s : msg) {
          consumer1.andThen(consumer2).accept(s);
      }
  }
  ```

### Predicateâ€”åˆ¤æ–­

æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦**å¯¹æŸç§ç±»å‹çš„æ•°æ®è¿›è¡Œåˆ¤æ–­**ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ª boolean å€¼ç»“æœã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨ `java.util.function.Predicate<T>`æ¥å£ã€‚

- æŠ½è±¡æ–¹æ³•ï¼š `boolean test(T t)`

  ```java
  //åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦å¤§äº3
  public static void main(String[] args) {
      String msg = "hello";
      boolean b = panduan(msg, s -> s.length() > 3);
      System.out.println(b);

  }
  public static boolean panduan(String s, Predicate<String> predicate){
      return predicate.test(s);
  }
  ```

- é»˜è®¤æ–¹æ³•ï¼š`Predicate<T> and(Predicate<? super T> other)` ï¼Œä¸

- é»˜è®¤æ–¹æ³•ï¼š`Predicate<T> or(Predicate<? super T> other)` ï¼Œæˆ–

- é»˜è®¤æ–¹æ³•ï¼š`Predicate<T> negate()` ï¼Œé

- é™æ€æ–¹æ³•ï¼š`static <T> Predicate<T> isEqual(Object targetRef)`ï¼Œç›¸ç­‰ï¼Œæ ¹æ®`Objects.equals(O,O)`

  ```java
  System.out.println(Predicate.isEqual("test").test("test"));//trueï¼Œè¿”å›Predicateå®ä¾‹ï¼Œä¹‹åä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹æ³•
  ```

  ```java
  public static void main(String[] args) {
      String msg = "hello";
      boolean b = panduan(msg,s -> s.length() > 3,s -> s.contains("w"));
      System.out.println(b);

  }
  public static boolean panduan(String s, Predicate<String> p1,Predicate<String> p2){
      return p1.and(p2).test(s); //and
      //return p1.or(p2).test(s); //or
      //return p1.negate().and(p2).test(s); //negate
  }
  ```

  ```java
  public static void main(String[] args) {
      /**
           * æ•°ç»„å½“ä¸­æœ‰å¤šæ¡â€œå§“å+æ€§åˆ«â€çš„ä¿¡æ¯å¦‚ä¸‹ï¼Œè¯·é€šè¿‡ Predicate æ¥å£çš„æ‹¼è£…å°†ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸²ç­›é€‰åˆ°é›†åˆ ArrayList ä¸­
           * éœ€è¦åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š1. å¿…é¡»ä¸ºå¥³ç”Ÿï¼› 2. å§“åä¸º4ä¸ªå­—ã€‚
           */
      String[] array = {"è¿ªä¸½çƒ­å·´,å¥³", "å¤åŠ›å¨œæ‰,å¥³", "é©¬å°”æ‰å“ˆ,ç”·", "èµµä¸½é¢–,å¥³"};
      ArrayList<String> list = toList(array,
                                      s -> s.split(",")[0].length() == 4,
                                      s -> "å¥³".equals(s.split(",")[1])
      );
      System.out.println(list);
  }

  public static ArrayList<String> toList(String[] arr, Predicate<String> p1, Predicate<String> p2) {
      ArrayList<String> list = new ArrayList<>();
      for (String s : arr) {
          if (p1.and(p2).test(s))
              list.add(s);
      }
      return list;
  }
  ```

### Function

`java.util.function.Function<T,R>` æ¥å£ç”¨æ¥**æ ¹æ®ä¸€ä¸ªç±»å‹çš„æ•°æ®å¾—åˆ°å¦ä¸€ä¸ªç±»å‹çš„æ•°æ®**ï¼Œå‰è€…ç§°ä¸ºå‰ç½®æ¡ä»¶ï¼Œ åè€…ç§°ä¸ºåç½®æ¡ä»¶ã€‚

- æŠ½è±¡æ–¹æ³•ï¼š `R apply(T t)`ï¼šæ ¹æ®ç±»å‹ T çš„å‚æ•°è·å–ç±»å‹ R çš„ç»“æœã€‚å¦‚`String`è½¬`Integer`

- é»˜è®¤æ–¹æ³•ï¼š`Function<T,V> andThen(Function<? super R,? extends V> after)`ï¼Œç”¨æ¥**ç»„åˆæ“ä½œ**

  ```java
  public static void main(String[] args) {
      /**
           * ç¬¬ä¸€ä¸ªæ“ä½œæ˜¯å°†å­—ç¬¦ä¸²è§£ææˆä¸ºintæ•°å­—ï¼Œ
           * ç¬¬äºŒä¸ªæ“ä½œæ˜¯ä¹˜ä»¥10å¹¶è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ä¸¤ä¸ªæ“ä½œé€šè¿‡ andThen æŒ‰ç…§å‰åé¡ºåºç»„åˆåˆ°äº†ä¸€ èµ·ã€‚
           */
      String msg = "1234";
      String string = change(msg, s -> Integer.valueOf(s), s -> (s * 10)+"" /*æˆ–String.valueOf()*/);
      System.out.println(string);
  }

  public static String change(String msg, Function<String, Integer> f1, Function<Integer, String> f2) {
      return f1.andThen(f2).apply(msg);
  }
  ```

  ```java
  public static void main(String[] args) {
      String str = "èµµä¸½é¢–,20";
      //1. å°†å­—ç¬¦ä¸²æˆªå–æ•°å­—å¹´é¾„éƒ¨åˆ†ï¼Œå¾—åˆ°å­—ç¬¦ä¸²ï¼›
      //2. å°†ä¸Šä¸€æ­¥çš„å­—ç¬¦ä¸²è½¬æ¢æˆä¸ºintç±»å‹çš„æ•°å­—ï¼›
      //3. å°†ä¸Šä¸€æ­¥çš„intæ•°å­—ç´¯åŠ 100ï¼Œå¾—åˆ°ç»“æœintæ•°å­—
      int change = change(str,
                          s -> s.split(",")[1],
                          s -> Integer.parseInt(s),
                          i -> i + 100
      );
      System.out.println(change);
  }

  public static int change(String s, Function<String, String> f1,
                           Function<String, Integer> f2, Function<Integer, Integer> f3) {
      return f1.andThen(f2).andThen(f3).apply(s);
  }
  ```

## æ–¹æ³•å¼•ç”¨

> åœ¨ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¼ é€’è¿›å»çš„ä»£ç å°±æ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šæ‹¿ä»€ä¹ˆå‚æ•°åšä»€ä¹ˆæ“ä½œã€‚é‚£ä¹ˆè€ƒè™‘ ä¸€ç§æƒ…å†µï¼šå¦‚æœæˆ‘ä»¬åœ¨ Lambda ä¸­æ‰€æŒ‡å®šçš„æ“ä½œæ–¹æ¡ˆï¼Œå·²ç»æœ‰åœ°æ–¹å­˜åœ¨ç›¸åŒæ–¹æ¡ˆï¼Œé‚£æ˜¯å¦è¿˜æœ‰å¿…è¦å†å†™é‡å¤é€»è¾‘ï¼Ÿ

### å¼•ç”¨ç¬¦::

**åŒå†’å·`::` ä¸ºå¼•ç”¨è¿ç®—ç¬¦**ï¼Œè€Œå®ƒæ‰€åœ¨çš„**è¡¨è¾¾å¼è¢«ç§°ä¸ºæ–¹æ³•å¼•ç”¨**ã€‚å¦‚æœ Lambda è¦è¡¨è¾¾çš„**å‡½æ•°æ–¹æ¡ˆï¼ˆæ–¹æ³•ä½“ï¼‰å·²ç»å­˜åœ¨äºæŸä¸ªæ–¹æ³•çš„å®ç°ä¸­ï¼ˆå‡ºå…¥å‚ä¸€è‡´ä»…ä»£è¡¨å¯¹è±¡::éé™æ€æ–¹æ³•å’Œç±»å::é™æ€æ–¹æ³•ï¼‰**ï¼Œé‚£ä¹ˆåˆ™å¯ä»¥é€šè¿‡åŒå†’å·æ¥å¼•ç”¨è¯¥æ–¹æ³•ä½œä¸º Lambda çš„æ›¿ä»£è€…ã€‚

**è¯­ä¹‰åˆ†æ**

`System.out`å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªé‡è½½çš„ `println(String)` æ–¹æ³•æ°å¥½å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚é‚£ä¹ˆå¯¹äº `printString` æ–¹æ³•çš„å‡½æ•°å¼æ¥å£å‚æ•°ï¼Œå¯¹æ¯”ä¸‹é¢ä¸¤ç§å†™æ³•ï¼Œå®Œå…¨ç­‰æ•ˆï¼š

- Lambda è¡¨è¾¾å¼å†™æ³•ï¼š `s -> System.out.println(s);`
- æ–¹æ³•å¼•ç”¨å†™æ³•ï¼š `System.out::println`

ç¬¬ä¸€ç§è¯­ä¹‰æ˜¯æŒ‡ï¼šæ‹¿åˆ°å‚æ•°ä¹‹åç» Lambda ä¹‹æ‰‹ï¼Œç»§è€Œä¼ é€’ç»™ `System.out.println` æ–¹æ³•å»å¤„ç†ã€‚

ç¬¬äºŒç§ç­‰æ•ˆå†™æ³•çš„è¯­ä¹‰æ˜¯æŒ‡ï¼šç›´æ¥è®© `System.out` ä¸­çš„ `println` æ–¹æ³•æ¥å–ä»£ Lambda

> æ³¨ï¼šLambda ä¸­ä¼ é€’çš„å‚æ•° ä¸€å®šæ˜¯æ–¹æ³•å¼•ç”¨ä¸­çš„é‚£ä¸ªæ–¹æ³•å¯ä»¥æ¥æ”¶çš„ç±»å‹ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸

**æ¨å¯¼ä¸çœç•¥**

å¦‚æœä½¿ç”¨ Lambdaï¼Œé‚£ä¹ˆæ ¹æ®â€œå¯æ¨å¯¼å°±æ˜¯å¯çœç•¥â€çš„åŸåˆ™ï¼Œ**æ— éœ€æŒ‡å®šå‚æ•°ç±»å‹**ï¼Œ**ä¹Ÿæ— éœ€æŒ‡å®šçš„é‡è½½å½¢å¼**â€”â€”å®ƒä»¬éƒ½å°†è¢«è‡ªåŠ¨æ¨å¯¼ã€‚è€Œå¦‚æœä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼Œä¹Ÿæ˜¯åŒæ ·å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œæ¨å¯¼ã€‚

å‡½æ•°å¼æ¥å£æ˜¯ Lambda çš„åŸºç¡€ï¼Œè€Œæ–¹æ³•å¼•ç”¨æ˜¯ Lambda çš„å­ªç”Ÿå…„å¼Ÿã€‚

### å¯¹è±¡::éé™æ€æ–¹æ³•

ä¸ä¸Šä¾‹ç›¸åŒã€‚å¯¹è±¡å·²ç»å­˜åœ¨ï¼Œæ–¹æ³•ä¹Ÿå­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨`å¯¹è±¡å::æ–¹æ³•å`æ›¿ä»£ lambda

```java
//Consumerä¸­çš„void accept(T t)
//PrintStreamä¸­çš„void println(T t)
@Test
public void test1() {
  Consumer<String> con1 = str -> System.out.println(str);
  con1.accept("åŒ—äº¬");

  System.out.println("*******************");
  PrintStream ps = System.out;
  Consumer<String> con2 = ps::println;
  con2.accept("beijing");
}

//Supplierä¸­çš„T get()
//Employeeä¸­çš„String getName()
@Test
public void test2() {
  Employee emp = new Employee(1001,"Tom",23,5600);

  Supplier<String> sup1 = () -> emp.getName();
  System.out.println(sup1.get());

  System.out.println("*******************");
  Supplier<String> sup2 = emp::getName;
  System.out.println(sup2.get());
}
```

### ç±»å::é™æ€æ–¹æ³•

ç±»å·²ç»å­˜åœ¨ï¼Œé™æ€æ–¹æ³•ä¹Ÿå­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨`ç±»å::é™æ€æ–¹æ³•`æ›¿ä»£ lambda

```java
public interface Calcable {
    int calc(int num);
}
// -------------------------------
public static void main(String[] args) {
    method(â€10, Math::abs);
}
private static void method(int num, Calcable lambda) {
    System.out.println(lambda.calc(num));
}
```

```java
//Comparatorä¸­çš„int compare(T t1,T t2)
//Integerä¸­çš„int compare(T t1,T t2)
@Test
public void test3() {
  Comparator<Integer> com1 = (t1,t2) -> Integer.compare(t1,t2);
  System.out.println(com1.compare(12,21));

  System.out.println("*******************");

  Comparator<Integer> com2 = Integer::compare;
  System.out.println(com2.compare(12,3));

}

//Functionä¸­çš„R apply(T t)
//Mathä¸­çš„Long round(Double d)
@Test
public void test4() {
  Function<Double,Long> func = new Function<Double, Long>() {
    @Override
    public Long apply(Double d) {
      return Math.round(d);
    }
  };

  System.out.println("*******************");

  Function<Double,Long> func1 = d -> Math.round(d);
  System.out.println(func1.apply(12.3));

  System.out.println("*******************");

  Function<Double,Long> func2 = Math::round;
  System.out.println(func2.apply(12.6));
}
```

### ç±»å::éé™æ€æ–¹æ³•

å½“å‡½æ•°å¼æ¥å£æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„å‚æ•°ï¼ˆæˆ–æ— å‚æ•°ï¼‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`ç±»å::éé™æ€æ–¹æ³•`æ›¿ä»£ lambda

### é€šè¿‡ super å¼•ç”¨æˆå‘˜æ–¹æ³•

å¦‚æœå­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œå½“ Lambda ä¸­éœ€è¦å‡ºç° super è°ƒç”¨æ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨è¿›è¡Œæ›¿ä»£ã€‚

```java
@FunctionalInterface
public interface Greetable {
    void greet();
}
```

```java
public class Human {
    public void sayHello() {
        System.out.println("Hello!");
    }
}
```

```java
public class Man extends Human {
    @Override
    public void sayHello() {
        System.out.println("å¤§å®¶å¥½,æˆ‘æ˜¯Man!");
    }
    //å®šä¹‰æ–¹æ³•method,å‚æ•°ä¼ é€’Greetableæ¥å£
    public void method(Greetable g){
        g.greet();
    }
    public void show(){ //åœ¨mainä¸­è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œä¼šæ‰“å°Helloï¼
        //method(()â€>super.sayHello());
        method(super::sayHello);
    }
}
```

### é€šè¿‡ this å¼•ç”¨æˆå‘˜æ–¹æ³•

this ä»£è¡¨å½“å‰å¯¹è±¡ï¼Œå¦‚æœéœ€è¦å¼•ç”¨çš„æ–¹æ³•å°±æ˜¯å½“å‰ç±»ä¸­çš„æˆå‘˜æ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨`this::æˆå‘˜æ–¹æ³•`çš„æ ¼å¼æ¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨

```java
@FunctionalInterface
public interface Richable {
    void buy();
}
```

```java
public class Husband {
    private void buyHouse() {
        System.out.println("ä¹°å¥—æˆ¿å­");
    }
    private void marry(Richable lambda) {
        lambda.buy();
    }
    public void beHappy() { //mainä¸­è°ƒç”¨æ­¤æ–¹æ³•ï¼Œä¼šæ‰“å° ä¹°å¥—æˆ¿å­
        //marry(() â€> this.buyHouse());
        marry(this::buyHouse);
    }
}
```

## æ„é€ å™¨å¼•ç”¨

å’Œæ–¹æ³•å¼•ç”¨ç±»ä¼¼ï¼Œå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å½¢å‚åˆ—è¡¨å’Œæ„é€ å™¨çš„å½¢å‚åˆ—è¡¨ä¸€è‡´ï¼ŒæŠ½è±¡æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å³ä¸ºæ„é€ å™¨æ‰€å±çš„ç±»çš„ç±»å‹ã€‚ç”±äºæ„é€ å™¨çš„åç§°ä¸ç±»åå®Œå…¨ä¸€æ ·ï¼Œå¹¶ä¸å›ºå®šã€‚æ‰€ä»¥æ„é€ å™¨å¼•ç”¨ä½¿ç”¨`ç±»åç§°::new` çš„æ ¼å¼è¡¨ç¤º

```java
public class Person {
    private String name;
    ...
}
// ------------------
@FunctionalInterface
public interface PersonBuilder {
    Person buildPerson(String name);
}
// ------------------
public class Demo {
    public static void printName(String name, PersonBuilder builder) {
        System.out.println(builder.buildPerson(name).getName());
    }
    public static void main(String[] args) {
        //printName("èµµä¸½é¢–", name â€> new Person(name));
        printName("èµµä¸½é¢–", Person::new);
    }
}
```

```java
//Supplierä¸­çš„T get()
//Employeeçš„ç©ºå‚æ„é€ å™¨ï¼šEmployee()
@Test
public void test1(){

  Supplier<Employee> sup = new Supplier<Employee>() {
    @Override
    public Employee get() {
      return new Employee();
    }
  };
  System.out.println("*******************");

  Supplier<Employee>  sup1 = () -> new Employee();
  System.out.println(sup1.get());

  System.out.println("*******************");

  Supplier<Employee>  sup2 = Employee :: new;
  System.out.println(sup2.get());
}

//Functionä¸­çš„R apply(T t)
@Test
public void test2(){
  Function<Integer,Employee> func1 = id -> new Employee(id);
  Employee employee = func1.apply(1001);
  System.out.println(employee);

  System.out.println("*******************");

  Function<Integer,Employee> func2 = Employee :: new;
  Employee employee1 = func2.apply(1002);
  System.out.println(employee1);

}

//BiFunctionä¸­çš„R apply(T t,U u)
@Test
public void test3(){
  BiFunction<Integer,String,Employee> func1 = (id,name) -> new Employee(id,name);
  System.out.println(func1.apply(1001,"Tom"));

  System.out.println("*******************");

  BiFunction<Integer,String,Employee> func2 = Employee :: new;
  System.out.println(func2.apply(1002,"Tom"));

}
```

## æ•°ç»„çš„æ„é€ å™¨å¼•ç”¨

æ•°ç»„ä¹Ÿæ˜¯`Object` çš„å­ç±»å¯¹è±¡ï¼Œæ‰€ä»¥åŒæ ·**å…·æœ‰æ„é€ å™¨**ï¼Œåªæ˜¯è¯­æ³•ç¨æœ‰ä¸åŒ

```java
@FunctionalInterface
public interface ArrayBuilder {
    int[] buildArray(int length);
}
public class Demo {
    private static int[] initArray(int length, ArrayBuilder builder) {
        return builder.buildArray(length);
    }
    public static void main(String[] args) {
        //int[] array = initArray(10, length â€> new int[length]);
        int[] array = initArray(10, int[]::new);
    }
}
```

```java
//Functionä¸­çš„R apply(T t)
@Test
public void test4(){
  Function<Integer,String[]> func1 = length -> new String[length];
  String[] arr1 = func1.apply(5);
  System.out.println(Arrays.toString(arr1));

  System.out.println("*******************");

  Function<Integer,String[]> func2 = String[] :: new;
  String[] arr2 = func2.apply(10);
  System.out.println(Arrays.toString(arr2));

}
```

## ä¹ é¢˜

**Lambda æ¥å£åœ¨ Java ä¸­åªèƒ½ç”¨äºæ–¹æ³•çš„å‚æ•°ï¼ï¼ï¼**

### Comparator ä½¿ç”¨ ğŸ”¥

ä½¿ç”¨ Collections.sort() æ–¹æ³•, æ¨èç›´æ¥ä½¿ç”¨ Streamï¼Œé€šè¿‡å®šåˆ¶æ’åºæ¯”è¾ƒä¸¤ä¸ª Employee (å…ˆæŒ‰å¹´é¾„æ¯”ï¼Œå¹´é¾„ç›¸åŒæŒ‰å§“åæ¯”), ä½¿ç”¨ Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ä¼ é€’ã€‚

```java
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Employee {

	private int id;
	private String name;
	private int age;
	private double salary;

}
```

```java
public class LambdaTest {

    List<Employee> emps = Arrays.asList(
        new Employee(101, "å¼ ä¸‰", 18, 9999.99),
        new Employee(102, "æå››", 59, 6666.66),
        new Employee(103, "ç‹äº”", 18, 3333.33),
        new Employee(104, "èµµå…­", 8, 7777.77),
        new Employee(105, "ç”°ä¸ƒ", 18, 5555.55)
    );

    @Test
    public void test1() {
        emps.stream().sorted((e1, e2) -> {
            if (e1.getAge() != e2.getAge()) {
                return Integer.compare(e1.getAge(), e2.getAge());
            } else {
                return e1.getName().compareTo(e2.getName());
            }
        }).forEach(System.out::println);

        /*Collections.sort(emps, (e1, e2) -> {
            if (e1.getAge() != e2.getAge()) {
                return Integer.compare(e1.getAge(), e2.getAge());
            } else {
                return e1.getName().compareTo(e2.getName());
            }
        });*/

        // Collections.sort ä¼šæç¤ºç›´æ¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼
        /*emps.sort((e1, e2) -> {
            if (e1.getAge() != e2.getAge()) {
                return Integer.compare(e1.getAge(), e2.getAge());
            } else {
                return e1.getName().compareTo(e2.getName());
            }
        });*/
    }
}
```

### å‡½æ•°å¼æ¥å£ 1 ğŸ”¥

1.  å£°æ˜å‡½æ•°å¼æ¥å£ï¼Œæ¥å£ä¸­å£°æ˜æŠ½è±¡æ–¹æ³•ï¼š`String getValue(String str);`
2.  å£°æ˜ç±» LambdaTestï¼Œç±»ä¸­**ç¼–å†™æ–¹æ³•**ä½¿ç”¨æ¥å£ä½œä¸ºå‚æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆå¤§å†™ï¼Œå¹¶ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ã€‚
3.  å†å°†ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ 2 ä¸ªåˆ°ç¬¬ 4 ä¸ªç´¢å¼•ä½ç½®è¿›è¡Œæˆªå–å­ä¸²ã€‚

```java
@FunctionalInterface
public interface MyFunctional1 {
    String getValue(String str);
}
```

```java
@Test
public void test2(){
    String s = "abcdEfg";

    String s1 = strHandler(s, String::toUpperCase);
    System.out.println(s1);

    String s2 = strHandler(s, str -> str.substring(2, 5));
    System.out.println(s2);
}

/**
 * ç”¨äºå¤„ç†å­—ç¬¦ä¸²
 */
private String strHandler(String str, MyFunctional1 func){
    return func.getValue(str);
}
```

### å‡½æ•°å¼æ¥å£ 2 ğŸ”¥

1.  å£°æ˜ä¸€ä¸ªå¸¦ä¸¤ä¸ª**æ³›å‹çš„å‡½æ•°å¼æ¥å£**ï¼Œæ³›å‹ç±»å‹ä¸º<T,R> : T ä¸ºå‚æ•°ï¼ŒR ä¸ºè¿”å›å€¼
2.  æ¥å£ä¸­å£°æ˜å¯¹åº”æŠ½è±¡æ–¹æ³•
3.  åœ¨ LambdaTest ç±»ä¸­**å£°æ˜æ–¹æ³•**ï¼Œä½¿ç”¨æ¥å£ä½œä¸ºå‚æ•°ï¼Œè®¡ç®—ä¸¤ä¸ª long å‹å‚æ•°çš„å’Œ
4.  å†è®¡ç®—ä¸¤ä¸ª long å‹å‚æ•°çš„ä¹˜ç§¯

```java
@FunctionalInterface
public interface MyFunctional2<T, R> {
    R calc(T t1, T t2);
}
```

```java
@Test
void test3() {
    long l = calcSum(2, 3, Long::sum);
    System.out.println(l);

    long ll = calcSum(2, 3, (l1, l2) -> l1 * l2);
    System.out.println(ll);
}

/**
 * ç”¨äºå¤„ç†ä¸¤ä¸ªlongæ•°çš„è®¡ç®—
 */
private long calcSum(long l1, long l2, MyFunctional2<Long,Long> func){
    return func.calc(l1, l2);
}
```

### Pedicate æ¥å£ä½¿ç”¨ ğŸ”¥

```java
Integer[] arr = {-12345, 9999, 520, 0, -38, -7758520, 941213};

Predicate<Integer> p1 = i -> i >= 0; //ä½¿ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºPredicateå¯¹è±¡p1,p1èƒ½åˆ¤æ–­æ•´æ•°æ˜¯å¦æ˜¯è‡ªç„¶æ•°
Predicate<Integer> p2 = i -> Math.abs(i) > 100; //ä½¿ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºPredicateå¯¹è±¡p2,p2èƒ½åˆ¤æ–­æ•´æ•°çš„ç»å¯¹å€¼æ˜¯å¦å¤§äº100
Predicate<Integer> p3 = i -> i % 2 == 0; //ä½¿ç”¨lambdaè¡¨è¾¾å¼åˆ›å»ºPredicateå¯¹è±¡p3,p3èƒ½åˆ¤æ–­æ•´æ•°æ˜¯å¦æ˜¯å¶æ•°

int count1 = 0;
int count2 = 0;
int count3 = 0;
int count4 = 0;
for (Integer i : arr) {
    if (p1.test(i))
        count1++;
    if (p1.negate().test(i))
        count2++;
    if (p2.and(p3).test(i))
        count3++;
    if (p1.negate().or(p3).test(i))
        count4++;
}
System.out.println("è‡ªç„¶æ•°ä¸ªæ•°:"+count1);
System.out.println("è´Ÿæ•´æ•°ä¸ªæ•°:"+count2);
System.out.println("ç»å¯¹å€¼å¤§äº100çš„å¶æ•°çš„ä¸ªæ•°:"+count3);
System.out.println("è´Ÿæ•´æ•°æˆ–å¶æ•°çš„æ•°çš„ä¸ªæ•°:"+count4);
```

### Function æ¥å£ä½¿ç”¨ ğŸ”¥

```java
/**
         * 1.	ä½¿ç”¨lambdaè¡¨è¾¾å¼åˆ†åˆ«å°†ä»¥ä¸‹åŠŸèƒ½å°è£…åˆ°Functionå¯¹è±¡ä¸­
         * a)	æ±‚Integerç±»å‹ArrayListä¸­æ‰€æœ‰å…ƒç´ çš„å¹³å‡æ•°
         * b)	å°†Map<String,Integer>ä¸­valueå­˜åˆ°ArrayList<Integer>ä¸­
         */
Function<ArrayList<Integer>, Integer> avg = list -> {
    int sum = 0;
    for (Integer i : list) {
        sum += i;
    }
    return sum / list.size();
};

Function<Map<String, Integer>, ArrayList<Integer>> change = map -> {
    ArrayList<Integer> list = new ArrayList<>();
    map.entrySet().stream().forEach(s -> list.add(s.getValue()));//æˆ–ç”¨valuesï¼ŒaddAll
    return list;
};

HashMap<String, Integer> students = new HashMap<>();
students.put("å²‘å°æ‘", 59);
students.put("è°·å¤©æ´›", 82);
students.put("æ¸£æ¸£è¾‰", 98);
students.put("è“å°æœˆ", 65);
students.put("çš®å‡ ä¸‡", 70);

int avg_score = change.andThen(avg).apply(students);
System.out.println(avg_score);
```
