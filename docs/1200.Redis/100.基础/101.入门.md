---
title: å…¥é—¨
date: 2021-02-24 21:37:25
permalink: /pages/d746af/
categories:
  - Redis
  - åŸºç¡€
tags:
  -
---

# å…¥é—¨

## å¼•å…¥

### ç°è±¡&é—®é¢˜

å¥¥è¿ä¼šé—¨ç¥¨é¢„å”®ç³»ç»Ÿå¼€æ”¾ç¬¬ä¸€å¤©ï¼Œä¸Šåˆ9ç‚¹æ­£å¼å¼€å§‹å”®ç¥¨åˆ°ä¸­åˆ12ç‚¹ï¼Œ3ä¸ªå°æ—¶å†…ï¼Œç¥¨åŠ¡ç½‘ç«™è¢«æµè§ˆæ¬¡æ•°è¾¾åˆ°2000ä¸‡æ¬¡ã€‚12306ã€æ·˜å®ã€äº¬ä¸œåœ¨å½“æ—¶éƒ½ä¼šå‘ç”Ÿå´©æºƒçš„ç°è±¡ã€‚æ€»ç»“æ¥è¯´å°±æ˜¯ï¼š

*   æµ·é‡ç”¨æˆ·
*   é«˜å¹¶å‘



### åŸå› 

ç½ªé­ç¥¸é¦–å°±æ˜¯**å…³ç³»å‹æ•°æ®åº“**

*   **æ€§èƒ½**ç“¶é¢ˆï¼š**ç£ç›˜IOæ€§èƒ½ä½ä¸‹**
*   **æ‰©å±•**ç“¶é¢ˆï¼š**æ•°æ®å…³ç³»å¤æ‚**ï¼Œ**æ‰©å±•æ€§å·®**ï¼Œä¸ä¾¿äºå¤§è§„æ¨¡é›†ç¾¤



### è§£å†³æ€è·¯

*   é™ä½ç£ç›˜IOæ¬¡æ•°ï¼Œè¶Šä½è¶Šå¥½ï¼šä½¿ç”¨å†…å­˜å­˜å‚¨
*   å»é™¤æ•°æ®é—´å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ï¼šä¸å­˜å‚¨å…³ç³»ï¼Œä»…å­˜å‚¨æ•°æ®

æ€»ç»“å°±æ˜¯å¼•å…¥ NoSQL



### NoSQL

NoSQLï¼šå³ **Not-Only SQL**ï¼ˆ**æ³›æŒ‡**éå…³ç³»å‹çš„æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„**è¡¥å……**ã€‚

ä½œç”¨ï¼šåº”å¯¹åŸºäºæµ·é‡ç”¨æˆ·å’Œæµ·é‡æ•°æ®å‰æä¸‹çš„æ•°æ®å¤„ç†é—®é¢˜

ç‰¹å¾ï¼š

*   å¯æ‰©å®¹ï¼Œå¯ä¼¸ç¼©
*   å¤§æ•°æ®é‡ä¸‹é«˜æ€§èƒ½
*   çµæ´»çš„æ•°æ®æ¨¡å‹
*   é«˜å¯ç”¨

å¸¸è§ Nosql æ•°æ®åº“:

*   Redis
*   memcache
*   HBase
*   MongoDB



### Redis æ‰€å¤„ç”µå•†ç³»ç»Ÿä½ç½®

![image-20210224222012508](../images/image-20210224222012508.png)









## Redis ç®€ä»‹

### æ¦‚å¿µ

Redisï¼ˆRemote Dictionary Serverï¼‰æ˜¯ç”¨ C è¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„**é«˜æ€§èƒ½é”®å€¼å¯¹**ï¼ˆkey-valueï¼‰æ•°æ®åº“



### ç‰¹å¾

*   æ•°æ®é—´æ²¡æœ‰å¿…ç„¶çš„å…³è”å…³ç³»
*   å†…éƒ¨é‡‡ç”¨å•çº¿ç¨‹æœºåˆ¶è¿›è¡Œå·¥ä½œï¼ˆ6.0åæ”¯æŒå¤šçº¿ç¨‹ï¼‰
*   é«˜æ€§èƒ½ã€‚å®˜æ–¹æä¾›æµ‹è¯•æ•°æ®ï¼Œ50ä¸ªå¹¶å‘æ‰§è¡Œ100000 ä¸ªè¯·æ±‚,è¯»çš„é€Ÿåº¦æ˜¯110000 æ¬¡/s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s
*   å¤šæ•°æ®ç±»å‹æ”¯æŒ
    *   å­—ç¬¦ä¸²ç±»å‹ string
    *   åˆ—è¡¨ç±»å‹ list
    *   æ•£åˆ—ç±»å‹ hash
    *   é›†åˆç±»å‹ set
    *   æœ‰åºé›†åˆç±»å‹ sorted_set
*   æŒä¹…åŒ–æ”¯æŒã€‚å¯ä»¥è¿›è¡Œæ•°æ®ç¾éš¾æ¢å¤



### åº”ç”¨åœºæ™¯ ğŸ”¥

*   ç¼“å­˜ï¼Œä¸º**çƒ­ç‚¹æ•°æ®åŠ é€ŸæŸ¥è¯¢**ï¼ˆä¸»è¦åœºæ™¯ï¼‰ï¼Œå¦‚çƒ­ç‚¹å•†å“ã€çƒ­ç‚¹æ–°é—»ã€çƒ­ç‚¹èµ„è®¯ã€æ¨å¹¿ç±»ã€çŸ­é“¾æ¥ç­‰é«˜è®¿é—®é‡ä¿¡æ¯ç­‰
*   **å³æ—¶ä¿¡æ¯æŸ¥è¯¢**ï¼Œå¦‚å„ä½**æ’è¡Œæ¦œ**ã€å„ç±»ç½‘ç«™è®¿é—®**ç»Ÿè®¡**ã€å…¬äº¤åˆ°ç«™ä¿¡æ¯ã€åœ¨çº¿äººæ•°ä¿¡æ¯ï¼ˆèŠå¤©å®¤ã€ç½‘ç«™ï¼‰ã€è®¾å¤‡ä¿¡å·ç­‰
*   **æ—¶æ•ˆæ€§ä¿¡æ¯æ§åˆ¶**ï¼Œå¦‚**éªŒè¯ç **æ§åˆ¶ã€**æŠ•ç¥¨æ§åˆ¶**ç­‰
*   **åˆ†å¸ƒå¼æ•°æ®å…±äº«**ï¼Œå¦‚**åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ä¸­çš„ session åˆ†ç¦»**
*   æ•°æ®è¿‡æœŸå¤„ç†ï¼ˆå¯ä»¥ç²¾ç¡®åˆ°æ¯«ç§’ï¼‰
*   **ä»»åŠ¡é˜Ÿåˆ—**ï¼Œå¦‚ç§’æ€ã€æŠ¢è´­ã€12306è´­ç¥¨æ’é˜Ÿç­‰
*   **æ¶ˆæ¯é˜Ÿåˆ—**
*   åˆ†å¸ƒå¼é”ï¼ˆä¸æ¨èï¼Œæ¨èä½¿ç”¨ zookepperï¼‰





## Redis ä¸‹è½½å®‰è£…â€”6379

### å®˜ç½‘

*   [å®˜ç½‘](https://redis.io)

*   [ä¸­æ–‡ç½‘](http://www.redis.net.cn/)

è§£å‹ç›´æ¥å¯ä»¥ä½¿ç”¨ï¼š

- redis.windows.confï¼šé…ç½®æ–‡ä»¶
- redis-cli.exeï¼šredis çš„å®¢æˆ·ç«¯
- redis-server.exeï¼šredis æœåŠ¡å™¨ç«¯



### docker-compose

```yml
version: '3.1'

services:
  redis:
    image: redis
    restart: "no"
    ports:
      - 6379:6379
```

å¯åŠ¨ Redis å®¹å™¨

*   æ‰§è¡Œ`docker compose up -d`ä¸‹è½½å¯åŠ¨å³å¯

è¿›å…¥ Redis å®¹å™¨ï¼Œä½¿ç”¨ cli

*   æ‰§è¡Œ`docker exec -it b2 redis-cli`ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è¿›å…¥ bash åæ‰§è¡Œ`redis-cli`



### åŸºæœ¬æ“ä½œ

æ¸…å±ï¼šæ‰§è¡Œ`clear`

å¸®åŠ©ï¼šè·å–**å‘½ä»¤**å¸®åŠ©æ–‡æ¡£ï¼Œè·å–**ç»„ä¸­æ‰€æœ‰å‘½ä»¤**ä¿¡æ¯åç§°

```
help å‘½ä»¤åç§°
help @ç»„å   -- è¿™é‡Œå¯ä»¥ä½¿ç”¨ tab è‡ªåŠ¨è¡¥å…¨
```







## æ•°æ®å­˜å‚¨ç±»å‹â€”æ•°æ®ç»“æ„

**åˆ†æä¸šåŠ¡æ•°æ®çš„ç‰¹æ®Šæ€§**ï¼Œæ˜¯ä»€ä¹ˆæ•°æ®ä¼šå­˜å‚¨åœ¨ Redis ä¸­å‘¢ï¼Ÿæ®æ­¤æ¥è®¾è®¡

### ä½œä¸ºç¼“å­˜ä½¿ç”¨

åŸå§‹ä¸šåŠ¡åŠŸèƒ½è®¾è®¡

*   ç§’æ€
*   618æ´»åŠ¨
*   åŒ11æ´»åŠ¨
*   æ’é˜Ÿè´­ç¥¨

è¿è¥å¹³å°ç›‘æ§åˆ°çš„çªå‘é«˜é¢‘è®¿é—®æ•°æ®

*   çªå‘æ—¶æ”¿è¦é—»ï¼Œè¢«å¼ºåŠ¿å…³æ³¨å›´è§‚

é«˜é¢‘ã€å¤æ‚çš„ç»Ÿè®¡æ•°æ®

*   åœ¨çº¿äººæ•°
*   æŠ•ç¥¨æ’è¡Œæ¦œ



### é™„åŠ åŠŸèƒ½

ç³»ç»ŸåŠŸèƒ½ä¼˜åŒ–æˆ–å‡çº§

*   å•æœåŠ¡å™¨å‡çº§é›†ç¾¤

*   Session ç®¡ç†
*   Token ç®¡ç†





### æ•°æ®ç»“æ„æ€»è§ˆ

*   redis è‡ªèº«æ˜¯ä¸€ä¸ª **Map**ï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯**é‡‡ç”¨ key : value çš„å½¢å¼å­˜å‚¨**
*   **æ•°æ®ç±»å‹æŒ‡çš„æ˜¯å­˜å‚¨çš„æ•°æ®çš„ç±»å‹**ï¼Œä¹Ÿå°±æ˜¯ **value** éƒ¨åˆ†çš„ç±»å‹ï¼Œ**key éƒ¨åˆ†æ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²**

<img src="../images/image-20210224225852838.png" alt="image-20210224225852838" style="zoom:50%;" />

å¸¸è§ç±»å‹å¦‚ä¸‹ï¼š

- **å­—ç¬¦ä¸²**ç±»å‹ string
- **å“ˆå¸Œ**ç±»å‹ hash ï¼š map æ ¼å¼
- **åˆ—è¡¨**ç±»å‹ list ï¼š linkedlist æ ¼å¼ã€‚æ”¯æŒé‡å¤å…ƒç´ 
- **é›†åˆ**ç±»å‹ set ï¼š ä¸å…è®¸é‡å¤å…ƒç´ 
- **æœ‰åºé›†åˆ**ç±»å‹ sortedsetï¼šä¸å…è®¸é‡å¤å…ƒç´ ï¼Œä¸”å…ƒç´ æœ‰é¡ºåº

*   ...





## 1.3 å‘½ä»¤æ“ä½œ

### 1.3.2 å­—ç¬¦ä¸² Strings

- 


### 1.3.3 å“ˆå¸Œ Hashes

- å­˜å‚¨ï¼š **hset** key field value

  ```
  127.0.0.1:6379> hset myhash username lisi
  (integer) 1
  127.0.0.1:6379> hset myhash password 123
  (integer) 1
  ```

- è·å–

  - **hget** key field: è·å–æŒ‡å®šçš„ field å¯¹åº”çš„å€¼

    ```
    127.0.0.1:6379> hget myhash username
    "lisi"
    ```

  - **hgetall** keyï¼šè·å–æ‰€æœ‰çš„ field å’Œ value

    ```
    127.0.0.1:6379> hgetall myhash
    1) "username"
    2) "lisi"
    3) "password"
    4) "123"
    ```

- åˆ é™¤ï¼š **hdel** key field

  ```
  127.0.0.1:6379> hdel myhash username
  (integer) 1
  ```

### 1.3.4 åˆ—è¡¨ Lists

å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰

- æ·»åŠ 

  - **lpush** key value: å°†å…ƒç´ åŠ å…¥åˆ—è¡¨å·¦è¡¨

  - **rpush** key valueï¼šå°†å…ƒç´ åŠ å…¥åˆ—è¡¨å³è¾¹

    ```
    127.0.0.1:6379> lpush myList a
    (integer) 1
    127.0.0.1:6379> lpush myList b
    (integer) 2
    127.0.0.1:6379> rpush myList c
    (integer) 3
    ```

- è·å–

  - **lrange** key start end ï¼šèŒƒå›´è·å–

    ```
    127.0.0.1:6379> lrange myList 0 -1
    1) "b"
    2) "a"
    3) "c"
    ```

- åˆ é™¤

  - **lpop** keyï¼š åˆ é™¤åˆ—è¡¨æœ€å·¦è¾¹çš„å…ƒç´ ï¼Œå¹¶å°†å…ƒç´ è¿”å›
  - **rpop** keyï¼š åˆ é™¤åˆ—è¡¨æœ€å³è¾¹çš„å…ƒç´ ï¼Œå¹¶å°†å…ƒç´ è¿”å›

### 1.3.5 é›†åˆ Sets

ä¸å…è®¸é‡å¤å…ƒç´ 

- å­˜å‚¨ï¼š**sadd** key value

  ```
  127.0.0.1:6379> sadd myset a
  (integer) 1
  127.0.0.1:6379> sadd myset a
  (integer) 0
  ```

- è·å–ï¼š**smembers** key:è·å– set é›†åˆä¸­æ‰€æœ‰å…ƒç´ 

  ```
  127.0.0.1:6379> smembers myset
  1) "a"
  ```

- åˆ é™¤ï¼š**srem** key value:åˆ é™¤ set é›†åˆä¸­çš„æŸä¸ªå…ƒç´ 

  ```
  127.0.0.1:6379> srem myset a
  (integer) 1
  ```

### 1.3.6 æœ‰åºé›†åˆ Sorted sets

ä¸å…è®¸é‡å¤å…ƒç´ ï¼Œä¸”å…ƒç´ æœ‰é¡ºåºã€‚æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª double ç±»å‹çš„åˆ†æ•°ï¼Œredis æ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚

- å­˜å‚¨ï¼š**zadd** key score value

  ```
  127.0.0.1:6379> zadd mysort 60 zhangsan
  (integer) 1
  127.0.0.1:6379> zadd mysort 50 lisi
  (integer) 1
  127.0.0.1:6379> zadd mysort 80 wangwu
  (integer) 1
  ```

- è·å–ï¼š**zrange** key start end [withscores]

  ```
  127.0.0.1:6379> zrange mysort 0 -1
  1) "lisi"
  2) "zhangsan"
  3) "wangwu"

  127.0.0.1:6379> zrange mysort 0 -1 withscores
  1) "zhangsan"
  2) "60"
  3) "wangwu"
  4) "80"
  5) "lisi"
  6) "500"
  ```

- åˆ é™¤ï¼š**zrem** key value

  ```
  127.0.0.1:6379> zrem mysort lisi
  (integer) 1
  ```

### 1.3.7 é€šç”¨å‘½ä»¤

- `keys *` : æŸ¥è¯¢æ‰€æœ‰çš„é”®
- `type key` ï¼š è·å–é”®å¯¹åº”çš„ value çš„ç±»å‹
- `del key`ï¼šåˆ é™¤æŒ‡å®šçš„ key value

## 1.4 Redis æŒä¹…åŒ–

redis ä¸­æ•°æ®å­˜å‚¨åœ¨å†…å­˜ï¼Œå½“ redis æœåŠ¡å™¨é‡å¯æˆ–ç”µè„‘é‡å¯ï¼Œæ•°æ®ä¼šä¸¢å¤±ï¼Œå¯ä»¥å°† redis å†…å­˜ä¸­çš„æ•°æ®æŒä¹…åŒ–ä¿å­˜åˆ°ç¡¬ç›˜çš„æ–‡ä»¶ä¸­ã€‚

- redis æŒä¹…åŒ–æœºåˆ¶

  - **RDB**ï¼šé»˜è®¤æ–¹å¼ï¼Œä¸éœ€è¦è¿›è¡Œé…ç½®ã€‚åœ¨ä¸€å®šçš„é—´éš”æ—¶é—´ä¸­ï¼Œæ£€æµ‹ key çš„å˜åŒ–æƒ…å†µï¼Œç„¶åæŒä¹…åŒ–æ•°æ®

    1. ç¼–è¾‘ redis.windwos.conf æ–‡ä»¶

       ```nginx
       #   after 900 sec (15 min) if at least 1 key changed
       save 900 1
       #   after 300 sec (5 min) if at least 10 keys changed
       save 300 10
       #   after 60 sec if at least 10000 keys changed
       save 60 10000
       ```

    2. å‘½ä»¤è¡Œä¸­é‡æ–°å¯åŠ¨ redis æœåŠ¡å™¨ï¼Œå¹¶æŒ‡å®šé…ç½®æ–‡ä»¶åç§°`redis-server.exe redis.windows.conf`

  - AOFï¼šæ—¥å¿—è®°å½•çš„æ–¹å¼ï¼Œå¯ä»¥è®°å½•æ¯ä¸€æ¡å‘½ä»¤çš„æ“ä½œã€‚å¯ä»¥æ¯ä¸€æ¬¡å‘½ä»¤æ“ä½œåï¼ŒæŒä¹…åŒ–æ•°æ®ã€‚ä¸æ¨è

    1. ç¼–è¾‘ redis.windwos.conf æ–‡ä»¶

       ```nginx
       appendonly noï¼ˆå…³é—­aofï¼‰ # --> appendonly yes ï¼ˆå¼€å¯aofï¼‰

       # appendfsync always ï¼š æ¯ä¸€æ¬¡æ“ä½œéƒ½è¿›è¡ŒæŒä¹…åŒ–
       appendfsync everysec ï¼š æ¯éš”ä¸€ç§’è¿›è¡Œä¸€æ¬¡æŒä¹…åŒ–
       # appendfsync no	 ï¼š ä¸è¿›è¡ŒæŒä¹…åŒ–
       ```

    2. å‘½ä»¤è¡Œä¸­é‡æ–°å¯åŠ¨ redis æœåŠ¡å™¨ï¼Œå¹¶æŒ‡å®šé…ç½®æ–‡ä»¶åç§°ã€‚åŒä¸Š

## 1.5 Jedis

### 1.5.1 Jedis ç®€ä»‹

Jedis: Redis å®˜æ–¹æ¨å‡ºçš„ä¸€æ¬¾ java æ“ä½œ redis æ•°æ®åº“çš„å·¥å…·ï¼ˆåç»­ä¼šä½¿ç”¨ Spring Data Redisï¼‰

- ä½¿ç”¨æ­¥éª¤

  1. å¯¼å…¥ jedis çš„ jar åŒ…

  2. ä½¿ç”¨

     ```java
     //1. è·å–è¿æ¥
     Jedis jedis = new Jedis("localhost",6379);
     //2. æ“ä½œ
     jedis.set("username","zhangsan");
     //3. å…³é—­è¿æ¥
     jedis.close();
     ```

### 1.5.2 Jedis æ“ä½œ Redis ä¸­çš„æ•°æ®ç»“æ„

```java
//è·å–è¿æ¥
@Before
public void init(){
    Jedis jedis = new Jedis();//å¦‚æœä½¿ç”¨ç©ºå‚æ„é€ ï¼Œé»˜è®¤å€¼ "localhost",6379ç«¯å£
}
//å…³é—­è¿æ¥
@After
public void close(){
    jedis.close();
}
```

- å­—ç¬¦ä¸² Stringsï¼š`set`ã€`setex`ã€`del`ã€`get`

  ```java
  //å­˜å‚¨
  jedis.set("username","zhangsan");
  //è·å–
  String username = jedis.get("username"); //zhangsan

  //å¯ä»¥ä½¿ç”¨setex()æ–¹æ³•å­˜å‚¨å¯ä»¥æŒ‡å®šè¿‡æœŸæ—¶é—´çš„ key value
  jedis.setex("activecode",20,"hehe");//å°†activecodeï¼šheheé”®å€¼å¯¹å­˜å…¥redisï¼Œå¹¶ä¸”20ç§’åè‡ªåŠ¨åˆ é™¤è¯¥é”®å€¼å¯¹
  ```

- å“ˆå¸Œ Hashesï¼ˆmap æ ¼å¼ï¼‰ï¼š`hset`ã€`hdel`ã€`hget`ã€`hgetAll`

  ```java
  // å­˜å‚¨hash
  jedis.hset("user","name","lisi");
  jedis.hset("user","age","23");
  jedis.hset("user","gender","female");

  // è·å–hash
  String name = jedis.hget("user", "name"); //lisi
  // è·å–hashçš„æ‰€æœ‰mapä¸­çš„æ•°æ®
  Map<String, String> user = jedis.hgetAll("user");
  ```

- åˆ—è¡¨ Listsï¼š`lpush/rpush`ã€`lpop/rpop`ã€`lrange`

  ```java
  jedis.lpush("mylist","a","b","c");//ä»å·¦è¾¹å­˜
  jedis.rpush("mylist","a","b","c");//ä»å³è¾¹å­˜

  // list èŒƒå›´è·å–
  List<String> mylist = jedis.lrange("mylist", 0, -1); // [c,b,a,a,b,c]

  // list å¼¹å‡º
  String element1 = jedis.lpop("mylist");//c
  String element2 = jedis.rpop("mylist");//c
  List<String> mylist2 = jedis.lrange("mylist", 0, -1); // ,b,a,a,b]
  ```

- é›†åˆ Setsï¼š`sadd`ã€`srem`ã€`smembers`

  ```java
  // set å­˜å‚¨
  jedis.sadd("myset","java","php","c++");

  // set è·å–
  Set<String> myset = jedis.smembers("myset"); //[c++,java,php]
  ```

- æœ‰åºé›†åˆ Sorted setsï¼š`zadd`ã€`zrem`ã€`zrange [withscores]`

  ```java
  jedis.zadd("mysortedset",3,"äºšç‘Ÿ");
  jedis.zadd("mysortedset",30,"åè£”");
  jedis.zadd("mysortedset",55,"å­™æ‚Ÿç©º");

  // sortedset è·å–
  Set<String> mysortedset = jedis.zrange("mysortedset", 0, -1);
  ```

### 1.5.3 Jedis è¿æ¥æ± -JedisPool

- ä½¿ç”¨

  1. åˆ›å»º`JedisPool`è¿æ¥æ± å¯¹è±¡
  2. è°ƒç”¨æ–¹æ³•`getResource()`æ–¹æ³•è·å– Jedis è¿æ¥

  ```java
  //0.åˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè€¦åˆåº¦é«˜ï¼
  JedisPoolConfig config = new JedisPoolConfig();
  config.setMaxTotal(50);
  config.setMaxIdle(10);

  //1.åˆ›å»ºJedisè¿æ¥æ± å¯¹è±¡
  JedisPool jedisPool = new JedisPool(config,"localhost",6379);

  //2.è·å–è¿æ¥
  Jedis jedis = jedisPool.getResource();
  //3. ä½¿ç”¨
  jedis.set("hehe","heihei");
  //4. å…³é—­ å½’è¿˜åˆ°è¿æ¥æ± ä¸­
  jedis.close();
  ```

- **JedisUtils**

  ```java
  /**
   JedisPoolå·¥å…·ç±»
      åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé…ç½®è¿æ¥æ± çš„å‚æ•°
      æä¾›è·å–è¿æ¥çš„æ–¹æ³•
   */
  public class JedisPoolUtils {
      private static JedisPool jedisPool;
      static{
          //è¯»å–é…ç½®æ–‡ä»¶
          InputStream is = JedisPoolUtils.class.getClassLoader().getResourceAsStream("jedis.properties");
          //åˆ›å»ºPropertieså¯¹è±¡
          Properties pro = new Properties();
          //å…³è”æ–‡ä»¶
          try {
              pro.load(is);
          } catch (IOException e) {
              e.printStackTrace();
          }
          //è·å–æ•°æ®ï¼Œè®¾ç½®åˆ°JedisPoolConfigä¸­
          JedisPoolConfig config = new JedisPoolConfig();
          config.setMaxTotal(Integer.parseInt(pro.getProperty("maxTotal")));
          config.setMaxIdle(Integer.parseInt(pro.getProperty("maxIdle")));
          //åˆå§‹åŒ–JedisPool
          jedisPool = new JedisPool(config,pro.getProperty("host"),Integer.parseInt(pro.getProperty("port")));
      }
      /**
       * è·å–è¿æ¥æ–¹æ³•
       */
      public static Jedis getJedis(){
          return jedisPool.getResource();
      }
  }
  ```

## 1.6 æ¡ˆä¾‹

éœ€æ±‚ï¼š

- æä¾› index.html é¡µé¢ï¼Œé¡µé¢ä¸­æœ‰ä¸€ä¸ªçœä»½ ä¸‹æ‹‰åˆ—è¡¨
- å½“é¡µé¢åŠ è½½å®Œæˆå å‘é€ ajax è¯·æ±‚ï¼ŒåŠ è½½æ‰€æœ‰çœä»½

æ³¨æ„ï¼šä½¿ç”¨**redis**ç¼“å­˜ä¸€äº›**ä¸ç»å¸¸å‘ç”Ÿå˜åŒ–çš„æ•°æ®**ã€‚

- **æ•°æ®åº“çš„æ•°æ®ä¸€æ—¦å‘ç”Ÿæ”¹å˜ï¼Œåˆ™éœ€è¦æ›´æ–°ç¼“å­˜**ã€‚
  - æ•°æ®åº“çš„è¡¨æ‰§è¡Œå¢åˆ æ”¹çš„ç›¸å…³æ“ä½œï¼Œéœ€è¦å°† redis ç¼“å­˜æ•°æ®æ¸…ç©ºï¼Œå†æ¬¡å­˜å…¥
  - åœ¨ service å¯¹åº”çš„å¢åˆ æ”¹æ–¹æ³•ä¸­ï¼Œå°† redis æ•°æ®åˆ é™¤ã€‚
