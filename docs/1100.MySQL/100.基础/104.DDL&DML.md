---
title: DDL & DML
date: 2021-01-08 00:26:28
permalink: /pages/9cf90b/
categories:
  - MySQL
  - 基础
tags:
  - 
---

# DDL & DML

**DDL 无需 commit；DML 需要 commit；**

## DDL—数据库

### 查看所有数据库 🔥

```
mysql> SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.01 sec)

mysql>
```



### 创建数据库 🔥

```
CREATE DATABASE [IF NOT EXISTS] 数据库名 [CHARSET=UTF8];
```

```
mysql> CREATE DATABASE IF NOT EXISTS demo;
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql>
```





### 切换当前数据库 🔥

对于每一个连接到`MySQL`服务器的客户端，都有一个`当前数据库`的概念（也可以称之为`默认数据库`），我们创建的表默认都会被放到当前数据库中

```
USE 数据库名;
```

在介绍表的基本操作之前，我们应该把当前数据库切换到刚刚创建的数据库`demo`上：

```
mysql> USE demo;
Database changed
mysql>
```

看到显示了`Database changed`说明当前数据库已经切换成功了。需要注意的是，在退出当前客户端之后，也就是你输入了`exit`或者`quit`命令之后或者直接把当前的黑框框页面关掉，当你再次调用`mysql -h 主机名 -u 用户名 -p密码`的时候，相当于重新开启了一个客户端，需要重新调用`USE 数据库名称`的语句来选择一下当前数据库。

其实我们在新启动客户端连接服务器时就可以指定连接建立成功后客户端的当前数据库，只要把数据库名称写在启动客户端的命令`mysql -h 主机名 -u 用户名 -p密码`后边就好，如下：

```
mysql -h localhost -u root -p123456 demo
```



### 删除数据库 🔥

```
DROP DATABASE [IF EXISTS] 数据库名;
```

```
mysql> DROP DATABASE IF EXISTS demo;
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql>
```



### 查看数据库定义信息

包括创建语句和字符集

```
SHOW CREATE DATABASE 数据库名;
```



### 修改数据库编码

```
ALTER DATABASE 数据库名 CHARACTER  SET UTF8;
```



### 查看当前使用的数据库，MySQL特有

```
SELECT DATABASE();
```





## DDL—表

### 展示当前数据库中的表

```
SHOW TABLES;
```

当前数据库是`demo`，然后用上述语句查看下`demo`数据库中都有哪些表：

```
mysql> SHOW TABLES;
Empty set (0.00 sec)

mysql>
```



### 创建表

```
CREATE TABLE [IF NOT EXISTS] 表名 (
    列名1    数据类型    [列的属性],
    列名2    数据类型    [列的属性],
    ...
    列名n    数据类型    [列的属性],
    PRIMARY KEY (列名)
) COMMENT '表的注释信息';

-- 约束可以在定义列的时候进行设置，也可以在语句的末尾进行设置。但是NOT NULL约束只能以列为单位进行设置
```

```sql
DROP TABLE IF EXISTS `player`;
CREATE TABLE `player`  (
    `player_id` int(11) NOT NULL AUTO_INCREMENT,
    `team_id` int(11) NOT NULL,
    `player_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
    `height` float(3, 2) NULL DEFAULT 0.00,
    PRIMARY KEY (`player_id`) USING BTREE,
    UNIQUE INDEX `player_name`(`player_name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;
-- 其中 player_name 字段的字符集是 utf8（推荐utf-8mb4），排序规则是 utf8_general_ci，代表对大小写不敏感，如果设置为utf8_bin，代表对大小写敏感，还有许多其他排序规则这里不进行介绍。
```

```
mysql> CREATE TABLE ...
Query OK, 0 rows affected (0.02 sec)

mysql>
```





### 复制表结构

```
CREATE TABLE 表名 LIKE 被复制的表名;
```



### 查看当前数据库中所有表名称 🔥

```
SHOW TABLES;
```



### **查看表结构 🔥**

```
DESC 表名;
```



### 查看指定表的定义信息，包括SQL创建语句、字符集

```
SHOW CREATE TABLE 表名;
```





### 删除表(DROP TABLE) 🔥

```
DROP TABLE [IF EXISTS] 表名;
```



### 修改表名称(RENAME TO)

```
ALTER TABLE 原表名 RENAME TO 新表名; -- Oracle和PostgreSQL使用这个，MySQL8测试也可以使用
RENAME TABLE 原表名 TO 新表名;
```



### 修改之添加列(ADD)

```
ALTER TABLE 表名 ADD /*COLUMN*/(
  列名 列类型 该列所需约束,
    列名 列类型 该列所需约束,
  ...
);
-- MySQL、Oracle、SQL Server中可以不用写COLUMN，PostgreSQL需写上
```



### 修改之删除列(DROP)

```
ALTER TABLE 表名 DROP /*COLUMN*/ 列名;
-- MySQL、Oracle可以用 (列名，列名...)来删除多个列
-- MySQL、Oracle、SQL Server中可以不用写COLUMN，PostgreSQL需写上
```



### 修改之修改列名/类型(CHANGE)

```
ALTER TABLE 表名 CHANGE 原列名 新列名 列类型 主键自增长 非空约束; -- 新的类型可能会影响到已存在数据
ALTER TABLE player RENAME COLUMN age to player_age -- RENAME也可以
```





### 修改之修改列类型(MODIFY)

```
ALTER TABLE 表名 MODIFY 列名 列类型 主键自增长 非空约束 -- /新的类型可能会影响到已存在数据
```





### 修改表的字符集

```
ALTER TABLE 表名 CHARACTER  SET UTF8;
```



